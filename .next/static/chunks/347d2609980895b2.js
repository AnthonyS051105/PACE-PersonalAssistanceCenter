(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,81694,e=>{"use strict";let t,n,i,r,l,o,s,a,u;var d,c,p,h,m,f,g,y,v,x,b,E,S,w,T,A,C,I,_,O,N,R,P,k,M,D,j,U,L,V,F,q,G,H,B,$,z,J,W,Y,K,X,Q,Z,ee,et,en,ei,er,el,eo,es,ea,eu,ed,ec,ep,eh,em,ef,eg,ey,ev,ex,eb,eE,eS,ew,eT,eA,eC,eI,e_,eO,eN,eR,eP,ek,eM,eD,ej,eU,eL,eV,eF,eq,eG,eH,eB,e$,ez,eJ,eW,eY,eK,eX,eQ,eZ,e0,e1,e2,e5,e4,e3,e6,e8,e9,e7,te,tt,tn,ti,tr,tl,to,ts,ta,tu,td,tc,tp,th,tm,tf,tg,ty,tv,tx,tb,tE,tS,tw,tT,tA,tC,tI,t_=e.i(43476),tO=e.i(71645);let tN=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,n)=>n?n.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},tR=(...e)=>e.filter((e,t,n)=>!!e&&""!==e.trim()&&n.indexOf(e)===t).join(" ").trim();var tP={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let tk=(0,tO.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:i,className:r="",children:l,iconNode:o,...s},a)=>(0,tO.createElement)("svg",{ref:a,...tP,width:t,height:t,stroke:e,strokeWidth:i?24*Number(n)/Number(t):n,className:tR("lucide",r),...!l&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(s)&&{"aria-hidden":"true"},...s},[...o.map(([e,t])=>(0,tO.createElement)(e,t)),...Array.isArray(l)?l:[l]])),tM=(e,t)=>{let n=(0,tO.forwardRef)(({className:n,...i},r)=>(0,tO.createElement)(tk,{ref:r,iconNode:t,className:tR(`lucide-${tN(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,n),...i}));return n.displayName=tN(e),n},tD=tM("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]),tj=tM("square-check-big",[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),tU=tM("brain-circuit",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M9 13a4.5 4.5 0 0 0 3-4",key:"10igwf"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M16 8V5a2 2 0 0 1 2-2",key:"u6izg6"}],["circle",{cx:"16",cy:"13",r:".5",key:"ry7gng"}],["circle",{cx:"18",cy:"3",r:".5",key:"1aiba7"}],["circle",{cx:"20",cy:"21",r:".5",key:"yhc1fs"}],["circle",{cx:"20",cy:"8",r:".5",key:"1e43v0"}]]),tL=tM("database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]),tV=tM("layout-grid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]),tF=tM("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]),tq=tM("palette",[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]]),tG=tM("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),tH=tM("moon",[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]]),tB=tM("sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),t$=tM("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),tz=tM("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),tJ=tM("sticky-note",[["path",{d:"M21 9a2.4 2.4 0 0 0-.706-1.706l-3.588-3.588A2.4 2.4 0 0 0 15 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2z",key:"1dfntj"}],["path",{d:"M15 3v5a1 1 0 0 0 1 1h5",key:"6s6qgf"}]]);var tW=e.i(74080);let tY="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement;function tK(e){let t=Object.prototype.toString.call(e);return"[object Window]"===t||"[object global]"===t}function tX(e){return"nodeType"in e}function tQ(e){var t,n;return e?tK(e)?e:tX(e)&&null!=(t=null==(n=e.ownerDocument)?void 0:n.defaultView)?t:window:window}function tZ(e){let{Document:t}=tQ(e);return e instanceof t}function t0(e){return!tK(e)&&e instanceof tQ(e).HTMLElement}function t1(e){return e instanceof tQ(e).SVGElement}function t2(e){return e?tK(e)?e.document:tX(e)?tZ(e)?e:t0(e)||t1(e)?e.ownerDocument:document:document:document}let t5=tY?tO.useLayoutEffect:tO.useEffect;function t4(e){let t=(0,tO.useRef)(e);return t5(()=>{t.current=e}),(0,tO.useCallback)(function(){for(var e=arguments.length,n=Array(e),i=0;i<e;i++)n[i]=arguments[i];return null==t.current?void 0:t.current(...n)},[])}function t3(e,t){void 0===t&&(t=[e]);let n=(0,tO.useRef)(e);return t5(()=>{n.current!==e&&(n.current=e)},t),n}function t6(e,t){let n=(0,tO.useRef)();return(0,tO.useMemo)(()=>{let t=e(n.current);return n.current=t,t},[...t])}function t8(e){let t=t4(e),n=(0,tO.useRef)(null),i=(0,tO.useCallback)(e=>{e!==n.current&&(null==t||t(e,n.current)),n.current=e},[]);return[n,i]}function t9(e){let t=(0,tO.useRef)();return(0,tO.useEffect)(()=>{t.current=e},[e]),t.current}let t7={};function ne(e,t){return(0,tO.useMemo)(()=>{if(t)return t;let n=null==t7[e]?0:t7[e]+1;return t7[e]=n,e+"-"+n},[e,t])}function nt(e){return function(t){for(var n=arguments.length,i=Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return i.reduce((t,n)=>{for(let[i,r]of Object.entries(n)){let n=t[i];null!=n&&(t[i]=n+e*r)}return t},{...t})}}let nn=nt(1),ni=nt(-1);function nr(e){if(!e)return!1;let{KeyboardEvent:t}=tQ(e.target);return t&&e instanceof t}function nl(e){if(function(e){if(!e)return!1;let{TouchEvent:t}=tQ(e.target);return t&&e instanceof t}(e)){if(e.touches&&e.touches.length){let{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){let{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return"clientX"in e&&"clientY"in e?{x:e.clientX,y:e.clientY}:null}let no=Object.freeze({Translate:{toString(e){if(!e)return;let{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;let{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[no.Translate.toString(e),no.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:i}=e;return t+" "+n+"ms "+i}}}),ns="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]",na={display:"none"};function nu(e){let{id:t,value:n}=e;return tO.default.createElement("div",{id:t,style:na},n)}function nd(e){let{id:t,announcement:n,ariaLiveType:i="assertive"}=e;return tO.default.createElement("div",{id:t,style:{position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"},role:"status","aria-live":i,"aria-atomic":!0},n)}let nc=(0,tO.createContext)(null),np={draggable:"\n    To pick up a draggable item, press the space bar.\n    While dragging, use the arrow keys to move the item.\n    Press space again to drop the item in its new position, or press escape to cancel.\n  "},nh={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function nm(e){var t;let n,{announcements:i=nh,container:r,hiddenTextDescribedById:l,screenReaderInstructions:o=np}=e,{announce:s,announcement:a}=function(){let[e,t]=(0,tO.useState)("");return{announce:(0,tO.useCallback)(e=>{null!=e&&t(e)},[]),announcement:e}}(),u=ne("DndLiveRegion"),[d,c]=(0,tO.useState)(!1);if((0,tO.useEffect)(()=>{c(!0)},[]),t=(0,tO.useMemo)(()=>({onDragStart(e){let{active:t}=e;s(i.onDragStart({active:t}))},onDragMove(e){let{active:t,over:n}=e;i.onDragMove&&s(i.onDragMove({active:t,over:n}))},onDragOver(e){let{active:t,over:n}=e;s(i.onDragOver({active:t,over:n}))},onDragEnd(e){let{active:t,over:n}=e;s(i.onDragEnd({active:t,over:n}))},onDragCancel(e){let{active:t,over:n}=e;s(i.onDragCancel({active:t,over:n}))}}),[s,i]),n=(0,tO.useContext)(nc),(0,tO.useEffect)(()=>{if(!n)throw Error("useDndMonitor must be used within a children of <DndContext>");return n(t)},[t,n]),!d)return null;let p=tO.default.createElement(tO.default.Fragment,null,tO.default.createElement(nu,{id:l,value:o.draggable}),tO.default.createElement(nd,{id:u,announcement:a}));return r?(0,tW.createPortal)(p,r):p}function nf(){}function ng(e,t){return(0,tO.useMemo)(()=>({sensor:e,options:null!=t?t:{}}),[e,t])}(d=eA||(eA={})).DragStart="dragStart",d.DragMove="dragMove",d.DragEnd="dragEnd",d.DragCancel="dragCancel",d.DragOver="dragOver",d.RegisterDroppable="registerDroppable",d.SetDroppableDisabled="setDroppableDisabled",d.UnregisterDroppable="unregisterDroppable";let ny=Object.freeze({x:0,y:0});function nv(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function nx(e,t){let{data:{value:n}}=e,{data:{value:i}}=t;return n-i}function nb(e,t){let{data:{value:n}}=e,{data:{value:i}}=t;return i-n}function nE(e){let{left:t,top:n,height:i,width:r}=e;return[{x:t,y:n},{x:t+r,y:n},{x:t,y:n+i},{x:t+r,y:n+i}]}function nS(e,t){if(!e||0===e.length)return null;let[n]=e;return t?n[t]:n}function nw(e,t,n){return void 0===t&&(t=e.left),void 0===n&&(n=e.top),{x:t+.5*e.width,y:n+.5*e.height}}let nT=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:i}=e,r=nw(t,t.left,t.top),l=[];for(let e of i){let{id:t}=e,i=n.get(t);if(i){let n=nv(nw(i),r);l.push({id:t,data:{droppableContainer:e,value:n}})}}return l.sort(nx)},nA=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:i}=e,r=[];for(let e of i){let{id:i}=e,l=n.get(i);if(l){let n=function(e,t){let n=Math.max(t.top,e.top),i=Math.max(t.left,e.left),r=Math.min(t.left+t.width,e.left+e.width),l=Math.min(t.top+t.height,e.top+e.height);if(i<r&&n<l){let o=t.width*t.height,s=e.width*e.height,a=(r-i)*(l-n);return Number((a/(o+s-a)).toFixed(4))}return 0}(l,t);n>0&&r.push({id:i,data:{droppableContainer:e,value:n}})}}return r.sort(nb)};function nC(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:ny}let nI=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return n.reduce((e,t)=>({...e,top:e.top+ +t.y,bottom:e.bottom+ +t.y,left:e.left+ +t.x,right:e.right+ +t.x}),{...e})},n_={ignoreTransform:!1};function nO(e,t){void 0===t&&(t=n_);let n=e.getBoundingClientRect();if(t.ignoreTransform){let{transform:t,transformOrigin:i}=tQ(e).getComputedStyle(e);t&&(n=function(e,t,n){let i=function(e){if(e.startsWith("matrix3d(")){let t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}if(e.startsWith("matrix(")){let t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}(t);if(!i)return e;let{scaleX:r,scaleY:l,x:o,y:s}=i,a=e.left-o-(1-r)*parseFloat(n),u=e.top-s-(1-l)*parseFloat(n.slice(n.indexOf(" ")+1)),d=r?e.width/r:e.width,c=l?e.height/l:e.height;return{width:d,height:c,top:u,right:a+d,bottom:u+c,left:a}}(n,t,i))}let{top:i,left:r,width:l,height:o,bottom:s,right:a}=n;return{top:i,left:r,width:l,height:o,bottom:s,right:a}}function nN(e){return nO(e,{ignoreTransform:!0})}function nR(e,t){let n=[];return e?function i(r){var l,o;let s;if(null!=t&&n.length>=t||!r)return n;if(tZ(r)&&null!=r.scrollingElement&&!n.includes(r.scrollingElement))return n.push(r.scrollingElement),n;if(!t0(r)||t1(r)||n.includes(r))return n;let a=tQ(e).getComputedStyle(r);return(r!==e&&(void 0===(l=a)&&(l=tQ(r).getComputedStyle(r)),s=/(auto|scroll|overlay)/,["overflow","overflowX","overflowY"].some(e=>{let t=l[e];return"string"==typeof t&&s.test(t)}))&&n.push(r),void 0===(o=a)&&(o=tQ(r).getComputedStyle(r)),"fixed"===o.position)?n:i(r.parentNode)}(e):n}function nP(e){let[t]=nR(e,1);return null!=t?t:null}function nk(e){return tY&&e?tK(e)?e:tX(e)?tZ(e)||e===t2(e).scrollingElement?window:t0(e)?e:null:null:null}function nM(e){return tK(e)?e.scrollX:e.scrollLeft}function nD(e){return tK(e)?e.scrollY:e.scrollTop}function nj(e){return{x:nM(e),y:nD(e)}}function nU(e){return!!tY&&!!e&&e===document.scrollingElement}function nL(e){let t={x:0,y:0},n=nU(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},i={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},r=e.scrollTop<=t.y,l=e.scrollLeft<=t.x;return{isTop:r,isLeft:l,isBottom:e.scrollTop>=i.y,isRight:e.scrollLeft>=i.x,maxScroll:i,minScroll:t}}(c=eC||(eC={}))[c.Forward=1]="Forward",c[c.Backward=-1]="Backward";let nV={x:.2,y:.2};function nF(e){return e.reduce((e,t)=>nn(e,nj(t)),ny)}let nq=[["x",["left","right"],function(e){return e.reduce((e,t)=>e+nM(t),0)}],["y",["top","bottom"],function(e){return e.reduce((e,t)=>e+nD(t),0)}]];class nG{constructor(e,t){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const n=nR(t),i=nF(n);for(const[t,r,l]of(this.rect={...e},this.width=e.width,this.height=e.height,nq))for(const e of r)Object.defineProperty(this,e,{get:()=>{let r=l(n),o=i[t]-r;return this.rect[e]+o},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class nH{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(e=>{var t;return null==(t=this.target)?void 0:t.removeEventListener(...e)})},this.target=e}add(e,t,n){var i;null==(i=this.target)||i.addEventListener(e,t,n),this.listeners.push([e,t,n])}}function nB(e,t){let n=Math.abs(e.x),i=Math.abs(e.y);return"number"==typeof t?Math.sqrt(n**2+i**2)>t:"x"in t&&"y"in t?n>t.x&&i>t.y:"x"in t?n>t.x:"y"in t&&i>t.y}function n$(e){e.preventDefault()}function nz(e){e.stopPropagation()}(p=eI||(eI={})).Click="click",p.DragStart="dragstart",p.Keydown="keydown",p.ContextMenu="contextmenu",p.Resize="resize",p.SelectionChange="selectionchange",p.VisibilityChange="visibilitychange",(h=e_||(e_={})).Space="Space",h.Down="ArrowDown",h.Right="ArrowRight",h.Left="ArrowLeft",h.Up="ArrowUp",h.Esc="Escape",h.Enter="Enter",h.Tab="Tab";let nJ={start:[e_.Space,e_.Enter],cancel:[e_.Esc],end:[e_.Space,e_.Enter,e_.Tab]},nW=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case e_.Right:return{...n,x:n.x+25};case e_.Left:return{...n,x:n.x-25};case e_.Down:return{...n,y:n.y+25};case e_.Up:return{...n,y:n.y-25}}};class nY{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:t}}=e;this.props=e,this.listeners=new nH(t2(t)),this.windowListeners=new nH(tQ(t)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(eI.Resize,this.handleCancel),this.windowListeners.add(eI.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(eI.Keydown,this.handleKeyDown))}handleStart(){let{activeNode:e,onStart:t}=this.props,n=e.node.current;n&&function(e,t){if(void 0===t&&(t=nO),!e)return;let{top:n,left:i,bottom:r,right:l}=t(e);nP(e)&&(r<=0||l<=0||n>=window.innerHeight||i>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}(n),t(ny)}handleKeyDown(e){if(nr(e)){let{active:t,context:n,options:i}=this.props,{keyboardCodes:r=nJ,coordinateGetter:l=nW,scrollBehavior:o="smooth"}=i,{code:s}=e;if(r.end.includes(s))return void this.handleEnd(e);if(r.cancel.includes(s))return void this.handleCancel(e);let{collisionRect:a}=n.current,u=a?{x:a.left,y:a.top}:ny;this.referenceCoordinates||(this.referenceCoordinates=u);let d=l(e,{active:t,context:n.current,currentCoordinates:u});if(d){let t=ni(d,u),i={x:0,y:0},{scrollableAncestors:r}=n.current;for(let n of r){let r=e.code,{isTop:l,isRight:s,isLeft:a,isBottom:u,maxScroll:c,minScroll:p}=nL(n),h=function(e){if(e===document.scrollingElement){let{innerWidth:e,innerHeight:t}=window;return{top:0,left:0,right:e,bottom:t,width:e,height:t}}let{top:t,left:n,right:i,bottom:r}=e.getBoundingClientRect();return{top:t,left:n,right:i,bottom:r,width:e.clientWidth,height:e.clientHeight}}(n),m={x:Math.min(r===e_.Right?h.right-h.width/2:h.right,Math.max(r===e_.Right?h.left:h.left+h.width/2,d.x)),y:Math.min(r===e_.Down?h.bottom-h.height/2:h.bottom,Math.max(r===e_.Down?h.top:h.top+h.height/2,d.y))},f=r===e_.Right&&!s||r===e_.Left&&!a,g=r===e_.Down&&!u||r===e_.Up&&!l;if(f&&m.x!==d.x){let e=n.scrollLeft+t.x,l=r===e_.Right&&e<=c.x||r===e_.Left&&e>=p.x;if(l&&!t.y)return void n.scrollTo({left:e,behavior:o});l?i.x=n.scrollLeft-e:i.x=r===e_.Right?n.scrollLeft-c.x:n.scrollLeft-p.x,i.x&&n.scrollBy({left:-i.x,behavior:o});break}if(g&&m.y!==d.y){let e=n.scrollTop+t.y,l=r===e_.Down&&e<=c.y||r===e_.Up&&e>=p.y;if(l&&!t.x)return void n.scrollTo({top:e,behavior:o});l?i.y=n.scrollTop-e:i.y=r===e_.Down?n.scrollTop-c.y:n.scrollTop-p.y,i.y&&n.scrollBy({top:-i.y,behavior:o});break}}this.handleMove(e,nn(ni(d,this.referenceCoordinates),i))}}}handleMove(e,t){let{onMove:n}=this.props;e.preventDefault(),n(t)}handleEnd(e){let{onEnd:t}=this.props;e.preventDefault(),this.detach(),t()}handleCancel(e){let{onCancel:t}=this.props;e.preventDefault(),this.detach(),t()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}function nK(e){return!!(e&&"distance"in e)}function nX(e){return!!(e&&"delay"in e)}nY.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:i=nJ,onActivation:r}=t,{active:l}=n,{code:o}=e.nativeEvent;if(i.start.includes(o)){let t=l.activatorNode.current;return(!t||e.target===t)&&(e.preventDefault(),null==r||r({event:e.nativeEvent}),!0)}return!1}}];class nQ{constructor(e,t,n){var i;void 0===n&&(n=function(e){let{EventTarget:t}=tQ(e);return e instanceof t?e:t2(e)}(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=t;const{event:r}=e,{target:l}=r;this.props=e,this.events=t,this.document=t2(l),this.documentListeners=new nH(this.document),this.listeners=new nH(n),this.windowListeners=new nH(tQ(l)),this.initialCoordinates=null!=(i=nl(r))?i:ny,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){let{events:e,props:{options:{activationConstraint:t,bypassActivationConstraint:n}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(eI.Resize,this.handleCancel),this.windowListeners.add(eI.DragStart,n$),this.windowListeners.add(eI.VisibilityChange,this.handleCancel),this.windowListeners.add(eI.ContextMenu,n$),this.documentListeners.add(eI.Keydown,this.handleKeydown),t){if(null!=n&&n({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(nX(t)){this.timeoutId=setTimeout(this.handleStart,t.delay),this.handlePending(t);return}if(nK(t))return void this.handlePending(t)}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),null!==this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,t){let{active:n,onPending:i}=this.props;i(n,e,this.initialCoordinates,t)}handleStart(){let{initialCoordinates:e}=this,{onStart:t}=this.props;e&&(this.activated=!0,this.documentListeners.add(eI.Click,nz,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(eI.SelectionChange,this.removeTextSelection),t(e))}handleMove(e){var t;let{activated:n,initialCoordinates:i,props:r}=this,{onMove:l,options:{activationConstraint:o}}=r;if(!i)return;let s=null!=(t=nl(e))?t:ny,a=ni(i,s);if(!n&&o){if(nK(o)){if(null!=o.tolerance&&nB(a,o.tolerance))return this.handleCancel();if(nB(a,o.distance))return this.handleStart()}return nX(o)&&nB(a,o.tolerance)?this.handleCancel():void this.handlePending(o,a)}e.cancelable&&e.preventDefault(),l(s)}handleEnd(){let{onAbort:e,onEnd:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleCancel(){let{onAbort:e,onCancel:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleKeydown(e){e.code===e_.Esc&&this.handleCancel()}removeTextSelection(){var e;null==(e=this.document.getSelection())||e.removeAllRanges()}}let nZ={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class n0 extends nQ{constructor(e){const{event:t}=e;super(e,nZ,t2(t.target))}}n0.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:i}=t;return!!n.isPrimary&&0===n.button&&(null==i||i({event:n}),!0)}}];(m=eO||(eO={}))[m.RightClick=2]="RightClick";(f=eN||(eN={}))[f.Pointer=0]="Pointer",f[f.DraggableRect=1]="DraggableRect",(g=eR||(eR={}))[g.TreeOrder=0]="TreeOrder",g[g.ReversedTreeOrder=1]="ReversedTreeOrder";let n1={x:{[eC.Backward]:!1,[eC.Forward]:!1},y:{[eC.Backward]:!1,[eC.Forward]:!1}};(y=eP||(eP={}))[y.Always=0]="Always",y[y.BeforeDragging=1]="BeforeDragging",y[y.WhileDragging=2]="WhileDragging",(ek||(ek={})).Optimized="optimized";let n2=new Map;function n5(e,t){return t6(n=>e?n||("function"==typeof t?t(e):e):null,[t,e])}function n4(e){let{callback:t,disabled:n}=e,i=t4(t),r=(0,tO.useMemo)(()=>{if(n||"undefined"==typeof window||void 0===window.ResizeObserver)return;let{ResizeObserver:e}=window;return new e(i)},[n]);return(0,tO.useEffect)(()=>()=>null==r?void 0:r.disconnect(),[r]),r}function n3(e){return new nG(nO(e),e)}function n6(e,t,n){void 0===t&&(t=n3);let[i,r]=(0,tO.useState)(null);function l(){r(i=>{if(!e)return null;if(!1===e.isConnected){var r;return null!=(r=null!=i?i:n)?r:null}let l=t(e);return JSON.stringify(i)===JSON.stringify(l)?i:l})}let o=function(e){let{callback:t,disabled:n}=e,i=t4(t),r=(0,tO.useMemo)(()=>{if(n||"undefined"==typeof window||void 0===window.MutationObserver)return;let{MutationObserver:e}=window;return new e(i)},[i,n]);return(0,tO.useEffect)(()=>()=>null==r?void 0:r.disconnect(),[r]),r}({callback(t){if(e)for(let n of t){let{type:t,target:i}=n;if("childList"===t&&i instanceof HTMLElement&&i.contains(e)){l();break}}}}),s=n4({callback:l});return t5(()=>{l(),e?(null==s||s.observe(e),null==o||o.observe(document.body,{childList:!0,subtree:!0})):(null==s||s.disconnect(),null==o||o.disconnect())},[e]),i}let n8=[];function n9(e,t){void 0===t&&(t=[]);let n=(0,tO.useRef)(null);return(0,tO.useEffect)(()=>{n.current=null},t),(0,tO.useEffect)(()=>{let t=e!==ny;t&&!n.current&&(n.current=e),!t&&n.current&&(n.current=null)},[e]),n.current?ni(e,n.current):ny}function n7(e){return(0,tO.useMemo)(()=>{let t,n;return e?(t=e.innerWidth,{top:0,left:0,right:t,bottom:n=e.innerHeight,width:t,height:n}):null},[e])}let ie=[],it=[{sensor:n0,options:{}},{sensor:nY,options:{}}],ii={current:{}},ir={draggable:{measure:nN},droppable:{measure:nN,strategy:eP.WhileDragging,frequency:ek.Optimized},dragOverlay:{measure:nO}};class il extends Map{get(e){var t;return null!=e&&null!=(t=super.get(e))?t:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:t}=e;return!t})}getNodeFor(e){var t,n;return null!=(t=null==(n=this.get(e))?void 0:n.node.current)?t:void 0}}let io={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new il,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:nf},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:ir,measureDroppableContainers:nf,windowRect:null,measuringScheduled:!1},is={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:nf,draggableNodes:new Map,over:null,measureDroppableContainers:nf},ia=(0,tO.createContext)(is),iu=(0,tO.createContext)(io);function id(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new il}}}function ic(e,t){switch(t.type){case eA.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case eA.DragMove:if(null==e.draggable.active)return e;return{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case eA.DragEnd:case eA.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case eA.RegisterDroppable:{let{element:n}=t,{id:i}=n,r=new il(e.droppable.containers);return r.set(i,n),{...e,droppable:{...e.droppable,containers:r}}}case eA.SetDroppableDisabled:{let{id:n,key:i,disabled:r}=t,l=e.droppable.containers.get(n);if(!l||i!==l.key)return e;let o=new il(e.droppable.containers);return o.set(n,{...l,disabled:r}),{...e,droppable:{...e.droppable,containers:o}}}case eA.UnregisterDroppable:{let{id:n,key:i}=t,r=e.droppable.containers.get(n);if(!r||i!==r.key)return e;let l=new il(e.droppable.containers);return l.delete(n),{...e,droppable:{...e.droppable,containers:l}}}default:return e}}function ip(e){let{disabled:t}=e,{active:n,activatorEvent:i,draggableNodes:r}=(0,tO.useContext)(ia),l=t9(i),o=t9(null==n?void 0:n.id);return(0,tO.useEffect)(()=>{if(!t&&!i&&l&&null!=o){if(!nr(l)||document.activeElement===l.target)return;let e=r.get(o);if(!e)return;let{activatorNode:t,node:n}=e;(t.current||n.current)&&requestAnimationFrame(()=>{for(let e of[t.current,n.current]){if(!e)continue;let t=e.matches(ns)?e:e.querySelector(ns);if(t){t.focus();break}}})}},[i,t,r,o,l]),null}let ih=(0,tO.createContext)({...ny,scaleX:1,scaleY:1});(v=eM||(eM={}))[v.Uninitialized=0]="Uninitialized",v[v.Initializing=1]="Initializing",v[v.Initialized=2]="Initialized";let im=(0,tO.memo)(function(e){var t,n,i,r,l,o,s,a;let u,d,c,p,h,m,f,g,{id:y,accessibility:v,autoScroll:x=!0,children:b,sensors:E=it,collisionDetection:S=nA,measuring:w,modifiers:T,...A}=e,[C,I]=(0,tO.useReducer)(ic,void 0,id),[_,O]=function(){let[e]=(0,tO.useState)(()=>new Set),t=(0,tO.useCallback)(t=>(e.add(t),()=>e.delete(t)),[e]);return[(0,tO.useCallback)(t=>{let{type:n,event:i}=t;e.forEach(e=>{var t;return null==(t=e[n])?void 0:t.call(e,i)})},[e]),t]}(),[N,R]=(0,tO.useState)(eM.Uninitialized),P=N===eM.Initialized,{draggable:{active:k,nodes:M,translate:D},droppable:{containers:j}}=C,U=null!=k?M.get(k):null,L=(0,tO.useRef)({initial:null,translated:null}),V=(0,tO.useMemo)(()=>{var e;return null!=k?{id:k,data:null!=(e=null==U?void 0:U.data)?e:ii,rect:L}:null},[k,U]),F=(0,tO.useRef)(null),[q,G]=(0,tO.useState)(null),[H,B]=(0,tO.useState)(null),$=t3(A,Object.values(A)),z=ne("DndDescribedBy",y),J=(0,tO.useMemo)(()=>j.getEnabled(),[j]),W=(0,tO.useMemo)(()=>({draggable:{...ir.draggable,...null==w?void 0:w.draggable},droppable:{...ir.droppable,...null==w?void 0:w.droppable},dragOverlay:{...ir.dragOverlay,...null==w?void 0:w.dragOverlay}}),[null==w?void 0:w.draggable,null==w?void 0:w.droppable,null==w?void 0:w.dragOverlay]),{droppableRects:Y,measureDroppableContainers:K,measuringScheduled:X}=function(e,t){let{dragging:n,dependencies:i,config:r}=t,[l,o]=(0,tO.useState)(null),{frequency:s,measure:a,strategy:u}=r,d=(0,tO.useRef)(e),c=function(){switch(u){case eP.Always:return!1;case eP.BeforeDragging:return n;default:return!n}}(),p=t3(c),h=(0,tO.useCallback)(function(e){void 0===e&&(e=[]),p.current||o(t=>null===t?e:t.concat(e.filter(e=>!t.includes(e))))},[p]),m=(0,tO.useRef)(null),f=t6(t=>{if(c&&!n)return n2;if(!t||t===n2||d.current!==e||null!=l){let t=new Map;for(let n of e){if(!n)continue;if(l&&l.length>0&&!l.includes(n.id)&&n.rect.current){t.set(n.id,n.rect.current);continue}let e=n.node.current,i=e?new nG(a(e),e):null;n.rect.current=i,i&&t.set(n.id,i)}return t}return t},[e,l,n,c,a]);return(0,tO.useEffect)(()=>{d.current=e},[e]),(0,tO.useEffect)(()=>{c||h()},[n,c]),(0,tO.useEffect)(()=>{l&&l.length>0&&o(null)},[JSON.stringify(l)]),(0,tO.useEffect)(()=>{c||"number"!=typeof s||null!==m.current||(m.current=setTimeout(()=>{h(),m.current=null},s))},[s,c,h,...i]),{droppableRects:f,measureDroppableContainers:h,measuringScheduled:null!=l}}(J,{dragging:P,dependencies:[D.x,D.y],config:W.droppable}),Q=t6(e=>{var t;return null==k?null:null!=(t=null!=h?h:e)?t:null},[h=(p=null!=k?M.get(k):void 0)?p.node.current:null,k]),Z=(0,tO.useMemo)(()=>H?nl(H):null,[H]),ee=(u=(null==q?void 0:q.autoScrollEnabled)===!1,d="object"==typeof x?!1===x.enabled:!1===x,c=P&&!u&&!d,"object"==typeof x?{...x,enabled:c}:{enabled:c}),et=n5(Q,W.draggable.measure);!function(e){let{activeNode:t,measure:n,initialRect:i,config:r=!0}=e,l=(0,tO.useRef)(!1),{x:o,y:s}="boolean"==typeof r?{x:r,y:r}:r;t5(()=>{if(!o&&!s||!t){l.current=!1;return}if(l.current||!i)return;let e=null==t?void 0:t.node.current;if(!e||!1===e.isConnected)return;let r=nC(n(e),i);if(o||(r.x=0),s||(r.y=0),l.current=!0,Math.abs(r.x)>0||Math.abs(r.y)>0){let t=nP(e);t&&t.scrollBy({top:r.y,left:r.x})}},[t,o,s,i,n])}({activeNode:null!=k?M.get(k):null,config:ee.layoutShiftCompensation,initialRect:et,measure:W.draggable.measure});let en=n6(Q,W.draggable.measure,et),ei=n6(Q?Q.parentElement:null),er=(0,tO.useRef)({activatorEvent:null,active:null,activeNode:Q,collisionRect:null,collisions:null,droppableRects:Y,draggableNodes:M,draggingNode:null,draggingNodeRect:null,droppableContainers:j,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),el=j.getNodeFor(null==(t=er.current.over)?void 0:t.id),eo=function(e){let{measure:t}=e,[n,i]=(0,tO.useState)(null),r=n4({callback:(0,tO.useCallback)(e=>{for(let{target:n}of e)if(t0(n)){i(e=>{let i=t(n);return e?{...e,width:i.width,height:i.height}:i});break}},[t])}),[l,o]=t8((0,tO.useCallback)(e=>{let n=function(e){if(!e)return null;if(e.children.length>1)return e;let t=e.children[0];return t0(t)?t:e}(e);null==r||r.disconnect(),n&&(null==r||r.observe(n)),i(n?t(n):null)},[t,r]));return(0,tO.useMemo)(()=>({nodeRef:l,rect:n,setRef:o}),[n,l,o])}({measure:W.dragOverlay.measure}),es=null!=(n=eo.nodeRef.current)?n:Q,ea=P?null!=(i=eo.rect)?i:en:null,eu=!!(eo.nodeRef.current&&eo.rect),ed=(m=n5(l=eu?null:en),nC(l,m)),ec=n7(es?tQ(es):null),ep=(o=P?null!=el?el:Q:null,f=(0,tO.useRef)(o),g=t6(e=>o?e&&e!==n8&&o&&f.current&&o.parentNode===f.current.parentNode?e:nR(o):n8,[o]),(0,tO.useEffect)(()=>{f.current=o},[o]),g),eh=function(e,t){void 0===t&&(t=nO);let[n]=e,i=n7(n?tQ(n):null),[r,l]=(0,tO.useState)(ie);function o(){l(()=>e.length?e.map(e=>nU(e)?i:new nG(t(e),e)):ie)}let s=n4({callback:o});return t5(()=>{null==s||s.disconnect(),o(),e.forEach(e=>null==s?void 0:s.observe(e))},[e]),r}(ep),em=function(e,t){let{transform:n,...i}=t;return null!=e&&e.length?e.reduce((e,t)=>t({transform:e,...i}),n):n}(T,{transform:{x:D.x-ed.x,y:D.y-ed.y,scaleX:1,scaleY:1},activatorEvent:H,active:V,activeNodeRect:en,containerNodeRect:ei,draggingNodeRect:ea,over:er.current.over,overlayNodeRect:eo.rect,scrollableAncestors:ep,scrollableAncestorRects:eh,windowRect:ec}),ef=Z?nn(Z,D):null,eg=function(e){let[t,n]=(0,tO.useState)(null),i=(0,tO.useRef)(e),r=(0,tO.useCallback)(e=>{let t=nk(e.target);t&&n(e=>e?(e.set(t,nj(t)),new Map(e)):null)},[]);return(0,tO.useEffect)(()=>{let t=i.current;if(e!==t){l(t);let o=e.map(e=>{let t=nk(e);return t?(t.addEventListener("scroll",r,{passive:!0}),[t,nj(t)]):null}).filter(e=>null!=e);n(o.length?new Map(o):null),i.current=e}return()=>{l(e),l(t)};function l(e){e.forEach(e=>{let t=nk(e);null==t||t.removeEventListener("scroll",r)})}},[r,e]),(0,tO.useMemo)(()=>e.length?t?Array.from(t.values()).reduce((e,t)=>nn(e,t),ny):nF(e):ny,[e,t])}(ep),ey=n9(eg),ev=n9(eg,[en]),ex=nn(em,ey),eb=ea?nI(ea,em):null,eE=V&&eb?S({active:V,collisionRect:eb,droppableRects:Y,droppableContainers:J,pointerCoordinates:ef}):null,eS=nS(eE,"id"),[ew,eT]=(0,tO.useState)(null),eI=(s=eu?em:nn(em,ev),a=null!=(r=null==ew?void 0:ew.rect)?r:null,{...s,scaleX:a&&en?a.width/en.width:1,scaleY:a&&en?a.height/en.height:1}),e_=(0,tO.useRef)(null),eO=(0,tO.useCallback)((e,t)=>{let{sensor:n,options:i}=t;if(null==F.current)return;let r=M.get(F.current);if(!r)return;let l=e.nativeEvent,o=new n({active:F.current,activeNode:r,event:l,options:i,context:er,onAbort(e){if(!M.get(e))return;let{onDragAbort:t}=$.current,n={id:e};null==t||t(n),_({type:"onDragAbort",event:n})},onPending(e,t,n,i){if(!M.get(e))return;let{onDragPending:r}=$.current,l={id:e,constraint:t,initialCoordinates:n,offset:i};null==r||r(l),_({type:"onDragPending",event:l})},onStart(e){let t=F.current;if(null==t)return;let n=M.get(t);if(!n)return;let{onDragStart:i}=$.current,r={activatorEvent:l,active:{id:t,data:n.data,rect:L}};(0,tW.unstable_batchedUpdates)(()=>{null==i||i(r),R(eM.Initializing),I({type:eA.DragStart,initialCoordinates:e,active:t}),_({type:"onDragStart",event:r}),G(e_.current),B(l)})},onMove(e){I({type:eA.DragMove,coordinates:e})},onEnd:s(eA.DragEnd),onCancel:s(eA.DragCancel)});function s(e){return async function(){let{active:t,collisions:n,over:i,scrollAdjustedTranslate:r}=er.current,o=null;if(t&&r){let{cancelDrop:s}=$.current;o={activatorEvent:l,active:t,collisions:n,delta:r,over:i},e===eA.DragEnd&&"function"==typeof s&&await Promise.resolve(s(o))&&(e=eA.DragCancel)}F.current=null,(0,tW.unstable_batchedUpdates)(()=>{I({type:e}),R(eM.Uninitialized),eT(null),G(null),B(null),e_.current=null;let t=e===eA.DragEnd?"onDragEnd":"onDragCancel";if(o){let e=$.current[t];null==e||e(o),_({type:t,event:o})}})}}e_.current=o},[M]),ek=(0,tO.useCallback)((e,t)=>(n,i)=>{let r=n.nativeEvent,l=M.get(i);null!==F.current||!l||r.dndKit||r.defaultPrevented||!0===e(n,t.options,{active:l})&&(r.dndKit={capturedBy:t.sensor},F.current=i,eO(n,t))},[M,eO]),eD=(0,tO.useMemo)(()=>E.reduce((e,t)=>{let{sensor:n}=t;return[...e,...n.activators.map(e=>({eventName:e.eventName,handler:ek(e.handler,t)}))]},[]),[E,ek]);(0,tO.useEffect)(()=>{if(!tY)return;let e=E.map(e=>{let{sensor:t}=e;return null==t.setup?void 0:t.setup()});return()=>{for(let t of e)null==t||t()}},E.map(e=>{let{sensor:t}=e;return t})),t5(()=>{en&&N===eM.Initializing&&R(eM.Initialized)},[en,N]),(0,tO.useEffect)(()=>{let{onDragMove:e}=$.current,{active:t,activatorEvent:n,collisions:i,over:r}=er.current;if(!t||!n)return;let l={active:t,activatorEvent:n,collisions:i,delta:{x:ex.x,y:ex.y},over:r};(0,tW.unstable_batchedUpdates)(()=>{null==e||e(l),_({type:"onDragMove",event:l})})},[ex.x,ex.y]),(0,tO.useEffect)(()=>{let{active:e,activatorEvent:t,collisions:n,droppableContainers:i,scrollAdjustedTranslate:r}=er.current;if(!e||null==F.current||!t||!r)return;let{onDragOver:l}=$.current,o=i.get(eS),s=o&&o.rect.current?{id:o.id,rect:o.rect.current,data:o.data,disabled:o.disabled}:null,a={active:e,activatorEvent:t,collisions:n,delta:{x:r.x,y:r.y},over:s};(0,tW.unstable_batchedUpdates)(()=>{eT(s),null==l||l(a),_({type:"onDragOver",event:a})})},[eS]),t5(()=>{er.current={activatorEvent:H,active:V,activeNode:Q,collisionRect:eb,collisions:eE,droppableRects:Y,draggableNodes:M,draggingNode:es,draggingNodeRect:ea,droppableContainers:j,over:ew,scrollableAncestors:ep,scrollAdjustedTranslate:ex},L.current={initial:ea,translated:eb}},[V,Q,eE,eb,M,es,ea,Y,j,ew,ep,ex]),function(e){let t,{acceleration:n,activator:i=eN.Pointer,canScroll:r,draggingRect:l,enabled:o,interval:s=5,order:a=eR.TreeOrder,pointerCoordinates:u,scrollableAncestors:d,scrollableAncestorRects:c,delta:p,threshold:h}=e,m=function(e){let{delta:t,disabled:n}=e,i=t9(t);return t6(e=>{if(n||!i||!e)return n1;let r={x:Math.sign(t.x-i.x),y:Math.sign(t.y-i.y)};return{x:{[eC.Backward]:e.x[eC.Backward]||-1===r.x,[eC.Forward]:e.x[eC.Forward]||1===r.x},y:{[eC.Backward]:e.y[eC.Backward]||-1===r.y,[eC.Forward]:e.y[eC.Forward]||1===r.y}}},[n,t,i])}({delta:p,disabled:!o}),[f,g]=(t=(0,tO.useRef)(null),[(0,tO.useCallback)((e,n)=>{t.current=setInterval(e,n)},[]),(0,tO.useCallback)(()=>{null!==t.current&&(clearInterval(t.current),t.current=null)},[])]),y=(0,tO.useRef)({x:0,y:0}),v=(0,tO.useRef)({x:0,y:0}),x=(0,tO.useMemo)(()=>{switch(i){case eN.Pointer:return u?{top:u.y,bottom:u.y,left:u.x,right:u.x}:null;case eN.DraggableRect:return l}},[i,l,u]),b=(0,tO.useRef)(null),E=(0,tO.useCallback)(()=>{let e=b.current;if(!e)return;let t=y.current.x*v.current.x,n=y.current.y*v.current.y;e.scrollBy(t,n)},[]),S=(0,tO.useMemo)(()=>a===eR.TreeOrder?[...d].reverse():d,[a,d]);(0,tO.useEffect)(()=>{if(!o||!d.length||!x)return void g();for(let e of S){if((null==r?void 0:r(e))===!1)continue;let t=c[d.indexOf(e)];if(!t)continue;let{direction:i,speed:l}=function(e,t,n,i,r){let{top:l,left:o,right:s,bottom:a}=n;void 0===i&&(i=10),void 0===r&&(r=nV);let{isTop:u,isBottom:d,isLeft:c,isRight:p}=nL(e),h={x:0,y:0},m={x:0,y:0},f={height:t.height*r.y,width:t.width*r.x};return!u&&l<=t.top+f.height?(h.y=eC.Backward,m.y=i*Math.abs((t.top+f.height-l)/f.height)):!d&&a>=t.bottom-f.height&&(h.y=eC.Forward,m.y=i*Math.abs((t.bottom-f.height-a)/f.height)),!p&&s>=t.right-f.width?(h.x=eC.Forward,m.x=i*Math.abs((t.right-f.width-s)/f.width)):!c&&o<=t.left+f.width&&(h.x=eC.Backward,m.x=i*Math.abs((t.left+f.width-o)/f.width)),{direction:h,speed:m}}(e,t,x,n,h);for(let e of["x","y"])m[e][i[e]]||(l[e]=0,i[e]=0);if(l.x>0||l.y>0){g(),b.current=e,f(E,s),y.current=l,v.current=i;return}}y.current={x:0,y:0},v.current={x:0,y:0},g()},[n,E,r,g,o,s,JSON.stringify(x),JSON.stringify(m),f,d,S,c,JSON.stringify(h)])}({...ee,delta:D,draggingRect:eb,pointerCoordinates:ef,scrollableAncestors:ep,scrollableAncestorRects:eh});let ej=(0,tO.useMemo)(()=>({active:V,activeNode:Q,activeNodeRect:en,activatorEvent:H,collisions:eE,containerNodeRect:ei,dragOverlay:eo,draggableNodes:M,droppableContainers:j,droppableRects:Y,over:ew,measureDroppableContainers:K,scrollableAncestors:ep,scrollableAncestorRects:eh,measuringConfiguration:W,measuringScheduled:X,windowRect:ec}),[V,Q,en,H,eE,ei,eo,M,j,Y,ew,K,ep,eh,W,X,ec]),eU=(0,tO.useMemo)(()=>({activatorEvent:H,activators:eD,active:V,activeNodeRect:en,ariaDescribedById:{draggable:z},dispatch:I,draggableNodes:M,over:ew,measureDroppableContainers:K}),[H,eD,V,en,I,z,M,ew,K]);return tO.default.createElement(nc.Provider,{value:O},tO.default.createElement(ia.Provider,{value:eU},tO.default.createElement(iu.Provider,{value:ej},tO.default.createElement(ih.Provider,{value:eI},b)),tO.default.createElement(ip,{disabled:(null==v?void 0:v.restoreFocus)===!1})),tO.default.createElement(nm,{...v,hiddenTextDescribedById:z}))}),ig=(0,tO.createContext)(null),iy="button",iv={timeout:25},ix={position:"fixed",touchAction:"none"},ib=e=>nr(e)?"transform 250ms ease":void 0;function iE(e,t,n){let i=e.slice();return i.splice(n<0?i.length+n:n,0,i.splice(t,1)[0]),i}function iS(e){return null!==e&&e>=0}(e,t)=>{let{as:n,activatorEvent:i,adjustScale:r,children:l,className:o,rect:s,style:a,transform:u,transition:d=ib}=e;if(!s)return null;let c=r?u:{...u,scaleX:1,scaleY:1},p={...ix,width:s.width,height:s.height,top:s.top,left:s.left,transform:no.Transform.toString(c),transformOrigin:r&&i?function(e,t){let n=nl(e);if(!n)return"0 0";let i={x:(n.x-t.left)/t.width*100,y:(n.y-t.top)/t.height*100};return i.x+"% "+i.y+"%"}(i,s):void 0,transition:"function"==typeof d?d(i):d,...a};return tO.default.createElement(n,{className:o,style:p,ref:t},l)},l={styles:{active:{opacity:"0"}}};let iw=e=>{let{rects:t,activeIndex:n,overIndex:i,index:r}=e,l=iE(t,i,n),o=t[r],s=l[r];return s&&o?{x:s.left-o.left,y:s.top-o.top,scaleX:s.width/o.width,scaleY:s.height/o.height}:null},iT="Sortable",iA=tO.default.createContext({activeIndex:-1,containerId:iT,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:iw,disabled:{draggable:!1,droppable:!1}});function iC(e){let{children:t,id:n,items:i,strategy:r=iw,disabled:l=!1}=e,{active:o,dragOverlay:s,droppableRects:a,over:u,measureDroppableContainers:d}=(0,tO.useContext)(iu),c=ne(iT,n),p=null!==s.rect,h=(0,tO.useMemo)(()=>i.map(e=>"object"==typeof e&&"id"in e?e.id:e),[i]),m=null!=o,f=o?h.indexOf(o.id):-1,g=u?h.indexOf(u.id):-1,y=(0,tO.useRef)(h),v=!function(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}(h,y.current),x=-1!==g&&-1===f||v,b="boolean"==typeof l?{draggable:l,droppable:l}:l;t5(()=>{v&&m&&d(h)},[v,h,m,d]),(0,tO.useEffect)(()=>{y.current=h},[h]);let E=(0,tO.useMemo)(()=>({activeIndex:f,containerId:c,disabled:b,disableTransforms:x,items:h,overIndex:g,useDragOverlay:p,sortedRects:h.reduce((e,t,n)=>{let i=a.get(t);return i&&(e[n]=i),e},Array(h.length)),strategy:r}),[f,c,b.draggable,b.droppable,x,h,g,a,p,r]);return tO.default.createElement(iA.Provider,{value:E},t)}let iI=e=>{let{id:t,items:n,activeIndex:i,overIndex:r}=e;return iE(n,i,r).indexOf(t)},i_=e=>{let{containerId:t,isSorting:n,wasDragging:i,index:r,items:l,newIndex:o,previousItems:s,previousContainerId:a,transition:u}=e;return!!u&&!!i&&(s===l||r!==o)&&(!!n||o!==r&&t===a)},iO={duration:200,easing:"ease"},iN="transform",iR=no.Transition.toString({property:iN,duration:0,easing:"linear"}),iP={roleDescription:"sortable"};function ik(e){if(!e)return!1;let t=e.data.current;return!!t&&"sortable"in t&&"object"==typeof t.sortable&&"containerId"in t.sortable&&"items"in t.sortable&&"index"in t.sortable}let iM=[e_.Down,e_.Right,e_.Up,e_.Left],iD=(e,t)=>{let{context:{active:n,collisionRect:i,droppableRects:r,droppableContainers:l,over:o,scrollableAncestors:s}}=t;if(iM.includes(e.code)){if(e.preventDefault(),!n||!i)return;let t=[];l.getEnabled().forEach(n=>{if(!n||null!=n&&n.disabled)return;let l=r.get(n.id);if(l)switch(e.code){case e_.Down:i.top<l.top&&t.push(n);break;case e_.Up:i.top>l.top&&t.push(n);break;case e_.Left:i.left>l.left&&t.push(n);break;case e_.Right:i.left<l.left&&t.push(n)}});let d=(e=>{let{collisionRect:t,droppableRects:n,droppableContainers:i}=e,r=nE(t),l=[];for(let e of i){let{id:t}=e,i=n.get(t);if(i){let n=nE(i),o=Number((r.reduce((e,t,i)=>e+nv(n[i],t),0)/4).toFixed(4));l.push({id:t,data:{droppableContainer:e,value:o}})}}return l.sort(nx)})({active:n,collisionRect:i,droppableRects:r,droppableContainers:t,pointerCoordinates:null}),c=nS(d,"id");if(c===(null==o?void 0:o.id)&&d.length>1&&(c=d[1].id),null!=c){let e=l.get(n.id),t=l.get(c),o=t?r.get(t.id):null,d=null==t?void 0:t.node.current;if(d&&o&&e&&t){var a,u;let n=nR(d).some((e,t)=>s[t]!==e),r=ij(e,t),l=(a=e,u=t,!!ik(a)&&!!ik(u)&&!!ij(a,u)&&a.data.current.sortable.index<u.data.current.sortable.index),c=n||!r?{x:0,y:0}:{x:l?i.width-o.width:0,y:l?i.height-o.height:0},p={x:o.left,y:o.top};return c.x&&c.y?p:ni(p,c)}}}};function ij(e,t){return!!ik(e)&&!!ik(t)&&e.data.current.sortable.containerId===t.data.current.sortable.containerId}function iU(e){return null!==e&&"object"==typeof e&&"function"==typeof e.start}e.i(47167);let iL=e=>Array.isArray(e);function iV(e,t){if(!Array.isArray(t))return!1;let n=t.length;if(n!==e.length)return!1;for(let i=0;i<n;i++)if(t[i]!==e[i])return!1;return!0}function iF(e){return"string"==typeof e||Array.isArray(e)}function iq(e){let t=[{},{}];return null==e||e.values.forEach((e,n)=>{t[0][n]=e.get(),t[1][n]=e.getVelocity()}),t}function iG(e,t,n,i){if("function"==typeof t){let[r,l]=iq(i);t=t(void 0!==n?n:e.custom,r,l)}if("string"==typeof t&&(t=e.variants&&e.variants[t]),"function"==typeof t){let[r,l]=iq(i);t=t(void 0!==n?n:e.custom,r,l)}return t}function iH(e,t,n){let i=e.getProps();return iG(i,t,void 0!==n?n:i.custom,e)}let iB=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],i$=["initial",...iB],iz=e=>e;function iJ(e){let t;return()=>(void 0===t&&(t=e()),t)}let iW=(e,t,n)=>{let i=t-e;return 0===i?1:(n-e)/i},iY=e=>1e3*e,iK=iJ(()=>void 0!==window.ScrollTimeline);class iX{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,t){for(let n=0;n<this.animations.length;n++)this.animations[n][e]=t}attachTimeline(e,t){let n=this.animations.map(n=>iK()&&n.attachTimeline?n.attachTimeline(e):"function"==typeof t?t(n):void 0);return()=>{n.forEach((e,t)=>{e&&e(),this.animations[t].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let t=0;t<this.animations.length;t++)e=Math.max(e,this.animations[t].duration);return e}runAll(e){this.animations.forEach(t=>t[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class iQ extends iX{then(e,t){return Promise.all(this.animations).then(e).catch(t)}}function iZ(e,t){return e?e[t]||e.default||e:void 0}function i0(e){let t=0,n=e.next(t);for(;!n.done&&t<2e4;)t+=50,n=e.next(t);return t>=2e4?1/0:t}function i1(e){return"function"==typeof e}function i2(e,t){e.timeline=t,e.onfinish=null}let i5=e=>Array.isArray(e)&&"number"==typeof e[0],i4,i3=(o=iJ(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch(e){return!1}return!0}),()=>{var e;return null!=(e=i4)?e:o()}),i6=(e,t,n=10)=>{let i="",r=Math.max(Math.round(t/n),2);for(let t=0;t<r;t++)i+=e(iW(0,r-1,t))+", ";return`linear(${i.substring(0,i.length-2)})`},i8=([e,t,n,i])=>`cubic-bezier(${e}, ${t}, ${n}, ${i})`,i9={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:i8([0,.65,.55,1]),circOut:i8([.55,0,1,.45]),backIn:i8([.31,.01,.66,-.59]),backOut:i8([.33,1.53,.69,.99])},i7={x:!1,y:!1};function re(e,t){let n=function(e,t,n){if(e instanceof Element)return[e];if("string"==typeof e){let t=document.querySelectorAll(e);return t?Array.from(t):[]}return Array.from(e)}(e),i=new AbortController;return[n,{passive:!0,...t,signal:i.signal},()=>i.abort()]}function rt(e){return t=>{"touch"===t.pointerType||i7.x||i7.y||e(t)}}let rn=(e,t)=>!!t&&(e===t||rn(e,t.parentElement)),ri=e=>"mouse"===e.pointerType?"number"!=typeof e.button||e.button<=0:!1!==e.isPrimary,rr=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]),rl=new WeakSet;function ro(e){return t=>{"Enter"===t.key&&e(t)}}function rs(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}function ra(e){return ri(e)&&!(i7.x||i7.y)}let ru=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],rd=new Set(ru),rc=new Set(["width","height","top","left","right","bottom",...ru]),rp=e=>iL(e)?e[e.length-1]||0:e,rh=["read","resolveKeyframes","update","preRender","render","postRender"];function rm(e,t){let n=!1,i=!0,r={delta:0,timestamp:0,isProcessing:!1},l=()=>n=!0,o=rh.reduce((e,t)=>(e[t]=function(e){let t=new Set,n=new Set,i=!1,r=!1,l=new WeakSet,o={delta:0,timestamp:0,isProcessing:!1};function s(t){l.has(t)&&(a.schedule(t),e()),t(o)}let a={schedule:(e,r=!1,o=!1)=>{let s=o&&i?t:n;return r&&l.add(e),s.has(e)||s.add(e),e},cancel:e=>{n.delete(e),l.delete(e)},process:e=>{if(o=e,i){r=!0;return}i=!0,[t,n]=[n,t],t.forEach(s),t.clear(),i=!1,r&&(r=!1,a.process(e))}};return a}(l),e),{}),{read:s,resolveKeyframes:a,update:u,preRender:d,render:c,postRender:p}=o,h=()=>{let l=performance.now();n=!1,r.delta=i?1e3/60:Math.max(Math.min(l-r.timestamp,40),1),r.timestamp=l,r.isProcessing=!0,s.process(r),a.process(r),u.process(r),d.process(r),c.process(r),p.process(r),r.isProcessing=!1,n&&t&&(i=!1,e(h))};return{schedule:rh.reduce((t,l)=>{let s=o[l];return t[l]=(t,l=!1,o=!1)=>(!n&&(n=!0,i=!0,r.isProcessing||e(h)),s.schedule(t,l,o)),t},{}),cancel:e=>{for(let t=0;t<rh.length;t++)o[rh[t]].cancel(e)},state:r,steps:o}}let{schedule:rf,cancel:rg,state:ry,steps:rv}=rm("undefined"!=typeof requestAnimationFrame?requestAnimationFrame:iz,!0);function rx(){t=void 0}let rb={now:()=>(void 0===t&&rb.set(ry.isProcessing?ry.timestamp:performance.now()),t),set:e=>{t=e,queueMicrotask(rx)}};function rE(e,t){-1===e.indexOf(t)&&e.push(t)}function rS(e,t){let n=e.indexOf(t);n>-1&&e.splice(n,1)}class rw{constructor(){this.subscriptions=[]}add(e){return rE(this.subscriptions,e),()=>rS(this.subscriptions,e)}notify(e,t,n){let i=this.subscriptions.length;if(i)if(1===i)this.subscriptions[0](e,t,n);else for(let r=0;r<i;r++){let i=this.subscriptions[r];i&&i(e,t,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}class rT{constructor(e,t={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(e,t=!0)=>{let n=rb.now();this.updatedAt!==n&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(e),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),t&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=rb.now(),null===this.canTrackVelocity&&void 0!==e&&(this.canTrackVelocity=!isNaN(parseFloat(this.current)))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new rw);let n=this.events[e].add(t);return"change"===e?()=>{n(),rf.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(let e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){t&&this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e,t)}setWithVelocity(e,t,n){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-n}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return u&&u.push(this),this.current}getPrevious(){return this.prev}getVelocity(){var e;let t=rb.now();if(!this.canTrackVelocity||void 0===this.prevFrameValue||t-this.updatedAt>30)return 0;let n=Math.min(this.updatedAt-this.prevUpdatedAt,30);return e=parseFloat(this.current)-parseFloat(this.prevFrameValue),n?1e3/n*e:0}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function rA(e,t){return new rT(e,t)}let rC=e=>!!(e&&e.getVelocity);function rI(e,t){let n=e.getValue("willChange");if(rC(n)&&n.add)return n.add(t)}let r_=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),rO="data-"+r_("framerAppearId"),rN=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e;function rR(e,t,n,i){return e===t&&n===i?iz:r=>0===r||1===r?r:rN(function(e,t,n,i,r){let l,o,s=0;do(l=rN(o=t+(n-t)/2,i,r)-e)>0?n=o:t=o;while(Math.abs(l)>1e-7&&++s<12)return o}(r,0,1,e,n),t,i)}let rP=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,rk=e=>t=>1-e(1-t),rM=rR(.33,1.53,.69,.99),rD=rk(rM),rj=rP(rD),rU=e=>(e*=2)<1?.5*rD(e):.5*(2-Math.pow(2,-10*(e-1))),rL=e=>1-Math.sin(Math.acos(e)),rV=rk(rL),rF=rP(rL),rq=(e,t,n)=>n>t?t:n<e?e:n,rG={test:e=>"number"==typeof e,parse:parseFloat,transform:e=>e},rH={...rG,transform:e=>rq(0,1,e)},rB={...rG,default:1},r$=e=>Math.round(1e5*e)/1e5,rz=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu,rJ=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,rW=(e,t)=>n=>!!("string"==typeof n&&rJ.test(n)&&n.startsWith(e)||t&&null!=n&&Object.prototype.hasOwnProperty.call(n,t)),rY=(e,t,n)=>i=>{if("string"!=typeof i)return i;let[r,l,o,s]=i.match(rz);return{[e]:parseFloat(r),[t]:parseFloat(l),[n]:parseFloat(o),alpha:void 0!==s?parseFloat(s):1}},rK={...rG,transform:e=>Math.round(rq(0,255,e))},rX={test:rW("rgb","red"),parse:rY("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:i=1})=>"rgba("+rK.transform(e)+", "+rK.transform(t)+", "+rK.transform(n)+", "+r$(rH.transform(i))+")"},rQ={test:rW("#"),parse:function(e){let t="",n="",i="",r="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),i=e.substring(5,7),r=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),i=e.substring(3,4),r=e.substring(4,5),t+=t,n+=n,i+=i,r+=r),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(i,16),alpha:r?parseInt(r,16)/255:1}},transform:rX.transform},rZ=e=>({test:t=>"string"==typeof t&&t.endsWith(e)&&1===t.split(" ").length,parse:parseFloat,transform:t=>`${t}${e}`}),r0=rZ("deg"),r1=rZ("%"),r2=rZ("px"),r5=rZ("vh"),r4=rZ("vw"),r3={...r1,parse:e=>r1.parse(e)/100,transform:e=>r1.transform(100*e)},r6={test:rW("hsl","hue"),parse:rY("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:i=1})=>"hsla("+Math.round(e)+", "+r1.transform(r$(t))+", "+r1.transform(r$(n))+", "+r$(rH.transform(i))+")"},r8={test:e=>rX.test(e)||rQ.test(e)||r6.test(e),parse:e=>rX.test(e)?rX.parse(e):r6.test(e)?r6.parse(e):rQ.parse(e),transform:e=>"string"==typeof e?e:e.hasOwnProperty("red")?rX.transform(e):r6.transform(e)},r9=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu,r7="number",le="color",lt=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function ln(e){let t=e.toString(),n=[],i={color:[],number:[],var:[]},r=[],l=0,o=t.replace(lt,e=>(r8.test(e)?(i.color.push(l),r.push(le),n.push(r8.parse(e))):e.startsWith("var(")?(i.var.push(l),r.push("var"),n.push(e)):(i.number.push(l),r.push(r7),n.push(parseFloat(e))),++l,"${}")).split("${}");return{values:n,split:o,indexes:i,types:r}}function li(e){return ln(e).values}function lr(e){let{split:t,types:n}=ln(e),i=t.length;return e=>{let r="";for(let l=0;l<i;l++)if(r+=t[l],void 0!==e[l]){let t=n[l];t===r7?r+=r$(e[l]):t===le?r+=r8.transform(e[l]):r+=e[l]}return r}}let ll=e=>"number"==typeof e?0:e,lo={test:function(e){var t,n;return isNaN(e)&&"string"==typeof e&&((null==(t=e.match(rz))?void 0:t.length)||0)+((null==(n=e.match(r9))?void 0:n.length)||0)>0},parse:li,createTransformer:lr,getAnimatableNone:function(e){let t=li(e);return lr(e)(t.map(ll))}},ls=new Set(["brightness","contrast","saturate","opacity"]);function la(e){let[t,n]=e.slice(0,-1).split("(");if("drop-shadow"===t)return e;let[i]=n.match(rz)||[];if(!i)return e;let r=n.replace(i,""),l=+!!ls.has(t);return i!==n&&(l*=100),t+"("+l+r+")"}let lu=/\b([a-z-]*)\(.*?\)/gu,ld={...lo,getAnimatableNone:e=>{let t=e.match(lu);return t?t.map(la).join(" "):e}},lc={...rG,transform:Math.round},lp={borderWidth:r2,borderTopWidth:r2,borderRightWidth:r2,borderBottomWidth:r2,borderLeftWidth:r2,borderRadius:r2,radius:r2,borderTopLeftRadius:r2,borderTopRightRadius:r2,borderBottomRightRadius:r2,borderBottomLeftRadius:r2,width:r2,maxWidth:r2,height:r2,maxHeight:r2,top:r2,right:r2,bottom:r2,left:r2,padding:r2,paddingTop:r2,paddingRight:r2,paddingBottom:r2,paddingLeft:r2,margin:r2,marginTop:r2,marginRight:r2,marginBottom:r2,marginLeft:r2,backgroundPositionX:r2,backgroundPositionY:r2,rotate:r0,rotateX:r0,rotateY:r0,rotateZ:r0,scale:rB,scaleX:rB,scaleY:rB,scaleZ:rB,skew:r0,skewX:r0,skewY:r0,distance:r2,translateX:r2,translateY:r2,translateZ:r2,x:r2,y:r2,z:r2,perspective:r2,transformPerspective:r2,opacity:rH,originX:r3,originY:r3,originZ:r2,zIndex:lc,size:r2,fillOpacity:rH,strokeOpacity:rH,numOctaves:lc},lh={...lp,color:r8,backgroundColor:r8,outlineColor:r8,fill:r8,stroke:r8,borderColor:r8,borderTopColor:r8,borderRightColor:r8,borderBottomColor:r8,borderLeftColor:r8,filter:ld,WebkitFilter:ld},lm=e=>lh[e];function lf(e,t){let n=lm(e);return n!==ld&&(n=lo),n.getAnimatableNone?n.getAnimatableNone(t):void 0}let lg=new Set(["auto","none","0"]),ly=e=>e===rG||e===r2,lv=(e,t)=>parseFloat(e.split(", ")[t]),lx=(e,t)=>(n,{transform:i})=>{if("none"===i||!i)return 0;let r=i.match(/^matrix3d\((.+)\)$/u);if(r)return lv(r[1],t);{let t=i.match(/^matrix\((.+)\)$/u);return t?lv(t[1],e):0}},lb=new Set(["x","y","z"]),lE=ru.filter(e=>!lb.has(e)),lS={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:lx(4,13),y:lx(5,14)};lS.translateX=lS.x,lS.translateY=lS.y;let lw=new Set,lT=!1,lA=!1;function lC(){if(lA){let e=Array.from(lw).filter(e=>e.needsMeasurement),t=new Set(e.map(e=>e.element)),n=new Map;t.forEach(e=>{let t,i=(t=[],lE.forEach(n=>{let i=e.getValue(n);void 0!==i&&(t.push([n,i.get()]),i.set(+!!n.startsWith("scale")))}),t);i.length&&(n.set(e,i),e.render())}),e.forEach(e=>e.measureInitialState()),t.forEach(e=>{e.render();let t=n.get(e);t&&t.forEach(([t,n])=>{var i;null==(i=e.getValue(t))||i.set(n)})}),e.forEach(e=>e.measureEndState()),e.forEach(e=>{void 0!==e.suspendedScrollY&&window.scrollTo(0,e.suspendedScrollY)})}lA=!1,lT=!1,lw.forEach(e=>e.complete()),lw.clear()}function lI(){lw.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(lA=!0)})}class l_{constructor(e,t,n,i,r,l=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=n,this.motionValue=i,this.element=r,this.isAsync=l}scheduleResolve(){this.isScheduled=!0,this.isAsync?(lw.add(this),lT||(lT=!0,rf.read(lI),rf.resolveKeyframes(lC))):(this.readKeyframes(),this.complete())}readKeyframes(){let{unresolvedKeyframes:e,name:t,element:n,motionValue:i}=this;for(let r=0;r<e.length;r++)if(null===e[r])if(0===r){let r=null==i?void 0:i.get(),l=e[e.length-1];if(void 0!==r)e[0]=r;else if(n&&t){let i=n.readValue(t,l);null!=i&&(e[0]=i)}void 0===e[0]&&(e[0]=l),i&&void 0===r&&i.set(e[0])}else e[r]=e[r-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),lw.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,lw.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}let lO=e=>t=>"string"==typeof t&&t.startsWith(e),lN=lO("--"),lR=lO("var(--"),lP=e=>!!lR(e)&&lk.test(e.split("/*")[0].trim()),lk=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,lM=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u,lD=e=>t=>t.test(e),lj=[rG,r2,r1,r0,r4,r5,{test:e=>"auto"===e,parse:e=>e}],lU=e=>lj.find(lD(e));class lL extends l_{constructor(e,t,n,i,r){super(e,t,n,i,r,!0)}readKeyframes(){let{unresolvedKeyframes:e,element:t,name:n}=this;if(!t||!t.current)return;super.readKeyframes();for(let n=0;n<e.length;n++){let i=e[n];if("string"==typeof i&&lP(i=i.trim())){let r=function e(t,n,i=1){iz(i<=4,`Max CSS variable fallback depth detected in property "${t}". This may indicate a circular fallback dependency.`);let[r,l]=function(e){let t=lM.exec(e);if(!t)return[,];let[,n,i,r]=t;return[`--${null!=n?n:i}`,r]}(t);if(!r)return;let o=window.getComputedStyle(n).getPropertyValue(r);if(o){let e=o.trim();return/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e)?parseFloat(e):e}return lP(l)?e(l,n,i+1):l}(i,t.current);void 0!==r&&(e[n]=r),n===e.length-1&&(this.finalKeyframe=i)}}if(this.resolveNoneKeyframes(),!rc.has(n)||2!==e.length)return;let[i,r]=e,l=lU(i),o=lU(r);if(l!==o)if(ly(l)&&ly(o))for(let t=0;t<e.length;t++){let n=e[t];"string"==typeof n&&(e[t]=parseFloat(n))}else this.needsMeasurement=!0}resolveNoneKeyframes(){let{unresolvedKeyframes:e,name:t}=this,n=[];for(let t=0;t<e.length;t++)(function(e){if("number"==typeof e)return 0===e;if(null===e)return!0;return"none"===e||"0"===e||/^0[^.\s]+$/u.test(e)})(e[t])&&n.push(t);n.length&&function(e,t,n){let i,r=0;for(;r<e.length&&!i;){let t=e[r];"string"==typeof t&&!lg.has(t)&&ln(t).values.length&&(i=e[r]),r++}if(i&&n)for(let r of t)e[r]=lf(n,i)}(e,n,t)}measureInitialState(){let{element:e,unresolvedKeyframes:t,name:n}=this;if(!e||!e.current)return;"height"===n&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=lS[n](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;let i=t[t.length-1];void 0!==i&&e.getValue(n,i).jump(i,!1)}measureEndState(){var e;let{element:t,name:n,unresolvedKeyframes:i}=this;if(!t||!t.current)return;let r=t.getValue(n);r&&r.jump(this.measuredOrigin,!1);let l=i.length-1,o=i[l];i[l]=lS[n](t.measureViewportBox(),window.getComputedStyle(t.current)),null!==o&&void 0===this.finalKeyframe&&(this.finalKeyframe=o),(null==(e=this.removedTransforms)?void 0:e.length)&&this.removedTransforms.forEach(([e,n])=>{t.getValue(e).set(n)}),this.resolveNoneKeyframes()}}let lV=(e,t)=>"zIndex"!==t&&!!("number"==typeof e||Array.isArray(e)||"string"==typeof e&&(lo.test(e)||"0"===e)&&!e.startsWith("url(")),lF=e=>null!==e;function lq(e,{repeat:t,repeatType:n="loop"},i){let r=e.filter(lF),l=t&&"loop"!==n&&t%2==1?0:r.length-1;return l&&void 0!==i?i:r[l]}class lG{constructor({autoplay:e=!0,delay:t=0,type:n="keyframes",repeat:i=0,repeatDelay:r=0,repeatType:l="loop",...o}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=rb.now(),this.options={autoplay:e,delay:t,type:n,repeat:i,repeatDelay:r,repeatType:l,...o},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt&&this.resolvedAt-this.createdAt>40?this.resolvedAt:this.createdAt}get resolved(){return this._resolved||this.hasAttemptedResolve||(lI(),lC()),this._resolved}onKeyframesResolved(e,t){this.resolvedAt=rb.now(),this.hasAttemptedResolve=!0;let{name:n,type:i,velocity:r,delay:l,onComplete:o,onUpdate:s,isGenerator:a}=this.options;if(!a&&!function(e,t,n,i){let r=e[0];if(null===r)return!1;if("display"===t||"visibility"===t)return!0;let l=e[e.length-1],o=lV(r,t),s=lV(l,t);return iz(o===s,`You are trying to animate ${t} from "${r}" to "${l}". ${r} is not an animatable value - to enable this animation set ${r} to a value animatable to ${l} via the \`style\` property.`),!!o&&!!s&&(function(e){let t=e[0];if(1===e.length)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}(e)||("spring"===n||i1(n))&&i)}(e,n,i,r))if(l)this.options.duration=0;else{s&&s(lq(e,this.options,t)),o&&o(),this.resolveFinishedPromise();return}let u=this.initPlayback(e,t);!1!==u&&(this._resolved={keyframes:e,finalKeyframe:t,...u},this.onPostResolved())}onPostResolved(){}then(e,t){return this.currentFinishedPromise.then(e,t)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}let lH=(e,t,n)=>e+(t-e)*n;function lB(e,t,n){return(n<0&&(n+=1),n>1&&(n-=1),n<1/6)?e+(t-e)*6*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function l$(e,t){return n=>n>0?t:e}let lz=(e,t,n)=>{let i=e*e,r=n*(t*t-i)+i;return r<0?0:Math.sqrt(r)},lJ=[rQ,rX,r6];function lW(e){let t=lJ.find(t=>t.test(e));if(iz(!!t,`'${e}' is not an animatable color. Use the equivalent color code instead.`),!t)return!1;let n=t.parse(e);return t===r6&&(n=function({hue:e,saturation:t,lightness:n,alpha:i}){e/=360,n/=100;let r=0,l=0,o=0;if(t/=100){let i=n<.5?n*(1+t):n+t-n*t,s=2*n-i;r=lB(s,i,e+1/3),l=lB(s,i,e),o=lB(s,i,e-1/3)}else r=l=o=n;return{red:Math.round(255*r),green:Math.round(255*l),blue:Math.round(255*o),alpha:i}}(n)),n}let lY=(e,t)=>{let n=lW(e),i=lW(t);if(!n||!i)return l$(e,t);let r={...n};return e=>(r.red=lz(n.red,i.red,e),r.green=lz(n.green,i.green,e),r.blue=lz(n.blue,i.blue,e),r.alpha=lH(n.alpha,i.alpha,e),rX.transform(r))},lK=(e,t)=>n=>t(e(n)),lX=(...e)=>e.reduce(lK),lQ=new Set(["none","hidden"]);function lZ(e,t){return n=>lH(e,t,n)}function l0(e){return"number"==typeof e?lZ:"string"==typeof e?lP(e)?l$:r8.test(e)?lY:l5:Array.isArray(e)?l1:"object"==typeof e?r8.test(e)?lY:l2:l$}function l1(e,t){let n=[...e],i=n.length,r=e.map((e,n)=>l0(e)(e,t[n]));return e=>{for(let t=0;t<i;t++)n[t]=r[t](e);return n}}function l2(e,t){let n={...e,...t},i={};for(let r in n)void 0!==e[r]&&void 0!==t[r]&&(i[r]=l0(e[r])(e[r],t[r]));return e=>{for(let t in i)n[t]=i[t](e);return n}}let l5=(e,t)=>{let n=lo.createTransformer(t),i=ln(e),r=ln(t);if(!(i.indexes.var.length===r.indexes.var.length&&i.indexes.color.length===r.indexes.color.length&&i.indexes.number.length>=r.indexes.number.length))return iz(!0,`Complex values '${e}' and '${t}' too different to mix. Ensure all colors are of the same type, and that each contains the same quantity of number and color values. Falling back to instant transition.`),l$(e,t);if(lQ.has(e)&&!r.values.length||lQ.has(t)&&!i.values.length)return lQ.has(e)?n=>n<=0?e:t:n=>n>=1?t:e;return lX(l1(function(e,t){var n;let i=[],r={color:0,var:0,number:0};for(let l=0;l<t.values.length;l++){let o=t.types[l],s=e.indexes[o][r[o]],a=null!=(n=e.values[s])?n:0;i[l]=a,r[o]++}return i}(i,r),r.values),n)};function l4(e,t,n){return"number"==typeof e&&"number"==typeof t&&"number"==typeof n?lH(e,t,n):l0(e)(e,t)}function l3(e,t,n){var i,r;let l=Math.max(t-5,0);return i=n-e(l),(r=t-l)?1e3/r*i:0}let l6=.01,l8=2,l9=.005,l7=.5;function oe(e,t){return e*Math.sqrt(1-t*t)}let ot=["duration","bounce"],on=["stiffness","damping","mass"];function oi(e,t){return t.some(t=>void 0!==e[t])}function or(e=.3,t=.3){let n,i="object"!=typeof e?{visualDuration:e,keyframes:[0,1],bounce:t}:e,{restSpeed:r,restDelta:l}=i,o=i.keyframes[0],s=i.keyframes[i.keyframes.length-1],a={done:!1,value:o},{stiffness:u,damping:d,mass:c,duration:p,velocity:h,isResolvedFromDuration:m}=function(e){let t={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...e};if(!oi(e,on)&&oi(e,ot))if(e.visualDuration){let n=2*Math.PI/(1.2*e.visualDuration),i=n*n,r=2*rq(.05,1,1-(e.bounce||0))*Math.sqrt(i);t={...t,mass:1,stiffness:i,damping:r}}else{let n=function({duration:e=800,bounce:t=.3,velocity:n=0,mass:i=1}){let r,l;iz(e<=iY(10),"Spring duration must be 10 seconds or less");let o=1-t;o=rq(.05,1,o),e=rq(.01,10,e/1e3),o<1?(r=t=>{let i=t*o,r=i*e;return .001-(i-n)/oe(t,o)*Math.exp(-r)},l=t=>{let i=t*o*e,l=Math.pow(o,2)*Math.pow(t,2)*e,s=Math.exp(-i),a=oe(Math.pow(t,2),o);return(i*n+n-l)*s*(-r(t)+.001>0?-1:1)/a}):(r=t=>-.001+Math.exp(-t*e)*((t-n)*e+1),l=t=>e*e*(n-t)*Math.exp(-t*e));let s=function(e,t,n){let i=n;for(let n=1;n<12;n++)i-=e(i)/t(i);return i}(r,l,5/e);if(e=iY(e),isNaN(s))return{stiffness:100,damping:10,duration:e};{let t=Math.pow(s,2)*i;return{stiffness:t,damping:2*o*Math.sqrt(i*t),duration:e}}}(e);(t={...t,...n,mass:1}).isResolvedFromDuration=!0}return t}({...i,velocity:-((i.velocity||0)/1e3)}),f=h||0,g=d/(2*Math.sqrt(u*c)),y=s-o,v=Math.sqrt(u/c)/1e3,x=5>Math.abs(y);if(r||(r=x?l6:l8),l||(l=x?l9:l7),g<1){let e=oe(v,g);n=t=>s-Math.exp(-g*v*t)*((f+g*v*y)/e*Math.sin(e*t)+y*Math.cos(e*t))}else if(1===g)n=e=>s-Math.exp(-v*e)*(y+(f+v*y)*e);else{let e=v*Math.sqrt(g*g-1);n=t=>{let n=Math.exp(-g*v*t),i=Math.min(e*t,300);return s-n*((f+g*v*y)*Math.sinh(i)+e*y*Math.cosh(i))/e}}let b={calculatedDuration:m&&p||null,next:e=>{let t=n(e);if(m)a.done=e>=p;else{let i=0;g<1&&(i=0===e?iY(f):l3(n,e,t));let o=Math.abs(s-t)<=l;a.done=Math.abs(i)<=r&&o}return a.value=a.done?s:t,a},toString:()=>{let e=Math.min(i0(b),2e4),t=i6(t=>b.next(e*t).value,e,30);return e+"ms "+t}};return b}function ol({keyframes:e,velocity:t=0,power:n=.8,timeConstant:i=325,bounceDamping:r=10,bounceStiffness:l=500,modifyTarget:o,min:s,max:a,restDelta:u=.5,restSpeed:d}){let c,p,h=e[0],m={done:!1,value:h},f=n*t,g=h+f,y=void 0===o?g:o(g);y!==g&&(f=y-h);let v=e=>-f*Math.exp(-e/i),x=e=>y+v(e),b=e=>{let t=v(e),n=x(e);m.done=Math.abs(t)<=u,m.value=m.done?y:n},E=e=>{let t;if(t=m.value,void 0!==s&&t<s||void 0!==a&&t>a){var n;c=e,p=or({keyframes:[m.value,(n=m.value,void 0===s?a:void 0===a||Math.abs(s-n)<Math.abs(a-n)?s:a)],velocity:l3(x,e,m.value),damping:r,stiffness:l,restDelta:u,restSpeed:d})}};return E(0),{calculatedDuration:null,next:e=>{let t=!1;return(p||void 0!==c||(t=!0,b(e),E(e)),void 0!==c&&e>=c)?p.next(e-c):(t||b(e),m)}}}let oo=rR(.42,0,1,1),os=rR(0,0,.58,1),oa=rR(.42,0,.58,1),ou={linear:iz,easeIn:oo,easeInOut:oa,easeOut:os,circIn:rL,circInOut:rF,circOut:rV,backIn:rD,backInOut:rj,backOut:rM,anticipate:rU},od=e=>{if(i5(e)){iz(4===e.length,"Cubic bezier arrays must contain four numerical values.");let[t,n,i,r]=e;return rR(t,n,i,r)}return"string"==typeof e?(iz(void 0!==ou[e],`Invalid easing type '${e}'`),ou[e]):e};function oc({duration:e=300,keyframes:t,times:n,ease:i="easeInOut"}){var r;let l,o=Array.isArray(i)&&"number"!=typeof i[0]?i.map(od):od(i),s={done:!1,value:t[0]},a=function(e,t,{clamp:n=!0,ease:i,mixer:r}={}){let l=e.length;if(iz(l===t.length,"Both input and output ranges must be the same length"),1===l)return()=>t[0];if(2===l&&t[0]===t[1])return()=>t[1];let o=e[0]===e[1];e[0]>e[l-1]&&(e=[...e].reverse(),t=[...t].reverse());let s=function(e,t,n){let i=[],r=n||l4,l=e.length-1;for(let n=0;n<l;n++){let l=r(e[n],e[n+1]);t&&(l=lX(Array.isArray(t)?t[n]||iz:t,l)),i.push(l)}return i}(t,i,r),a=s.length,u=n=>{if(o&&n<e[0])return t[0];let i=0;if(a>1)for(;i<e.length-2&&!(n<e[i+1]);i++);let r=iW(e[i],e[i+1],n);return s[i](r)};return n?t=>u(rq(e[0],e[l-1],t)):u}((r=n&&n.length===t.length?n:(!function(e,t){let n=e[e.length-1];for(let i=1;i<=t;i++){let r=iW(0,t,i);e.push(lH(n,1,r))}}(l=[0],t.length-1),l),r.map(t=>t*e)),t,{ease:Array.isArray(o)?o:t.map(()=>o||oa).splice(0,t.length-1)});return{calculatedDuration:e,next:t=>(s.value=a(t),s.done=t>=e,s)}}let op=e=>{let t=({timestamp:t})=>e(t);return{start:()=>rf.update(t,!0),stop:()=>rg(t),now:()=>ry.isProcessing?ry.timestamp:rb.now()}},oh={decay:ol,inertia:ol,tween:oc,keyframes:oc,spring:or},om=e=>e/100;class of extends lG{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,"idle"===this.state)return;this.teardown();let{onStop:e}=this.options;e&&e()};const{name:t,motionValue:n,element:i,keyframes:r}=this.options,l=(null==i?void 0:i.KeyframeResolver)||l_,o=(e,t)=>this.onKeyframesResolved(e,t);this.resolver=new l(r,o,t,n,i),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){let t,n,{type:i="keyframes",repeat:r=0,repeatDelay:l=0,repeatType:o,velocity:s=0}=this.options,a=i1(i)?i:oh[i]||oc;a!==oc&&"number"!=typeof e[0]&&(t=lX(om,l4(e[0],e[1])),e=[0,100]);let u=a({...this.options,keyframes:e});"mirror"===o&&(n=a({...this.options,keyframes:[...e].reverse(),velocity:-s})),null===u.calculatedDuration&&(u.calculatedDuration=i0(u));let{calculatedDuration:d}=u,c=d+l;return{generator:u,mirroredGenerator:n,mapPercentToKeyframes:t,calculatedDuration:d,resolvedDuration:c,totalDuration:c*(r+1)-l}}onPostResolved(){let{autoplay:e=!0}=this.options;this.play(),"paused"!==this.pendingPlayState&&e?this.state=this.pendingPlayState:this.pause()}tick(e,t=!1){let{resolved:n}=this;if(!n){let{keyframes:e}=this.options;return{done:!0,value:e[e.length-1]}}let{finalKeyframe:i,generator:r,mirroredGenerator:l,mapPercentToKeyframes:o,keyframes:s,calculatedDuration:a,totalDuration:u,resolvedDuration:d}=n;if(null===this.startTime)return r.next(0);let{delay:c,repeat:p,repeatType:h,repeatDelay:m,onUpdate:f}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-u/this.speed,this.startTime)),t?this.currentTime=e:null!==this.holdTime?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;let g=this.currentTime-c*(this.speed>=0?1:-1),y=this.speed>=0?g<0:g>u;this.currentTime=Math.max(g,0),"finished"===this.state&&null===this.holdTime&&(this.currentTime=u);let v=this.currentTime,x=r;if(p){let e=Math.min(this.currentTime,u)/d,t=Math.floor(e),n=e%1;!n&&e>=1&&(n=1),1===n&&t--,(t=Math.min(t,p+1))%2&&("reverse"===h?(n=1-n,m&&(n-=m/d)):"mirror"===h&&(x=l)),v=rq(0,1,n)*d}let b=y?{done:!1,value:s[0]}:x.next(v);o&&(b.value=o(b.value));let{done:E}=b;y||null===a||(E=this.speed>=0?this.currentTime>=u:this.currentTime<=0);let S=null===this.holdTime&&("finished"===this.state||"running"===this.state&&E);return S&&void 0!==i&&(b.value=lq(s,this.options,i)),f&&f(b.value),S&&this.finish(),b}get duration(){let{resolved:e}=this;return e?e.calculatedDuration/1e3:0}get time(){return this.currentTime/1e3}set time(e){e=iY(e),this.currentTime=e,null!==this.holdTime||0===this.speed?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){let t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=this.currentTime/1e3)}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;let{driver:e=op,onPlay:t,startTime:n}=this.options;this.driver||(this.driver=e(e=>this.tick(e))),t&&t();let i=this.driver.now();null!==this.holdTime?this.startTime=i-this.holdTime:this.startTime?"finished"===this.state&&(this.startTime=i):this.startTime=null!=n?n:this.calcStartTime(),"finished"===this.state&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=null!=(e=this.currentTime)?e:0}complete(){"running"!==this.state&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";let{onComplete:e}=this.options;e&&e()}cancel(){null!==this.cancelTime&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}let og=new Set(["opacity","clipPath","filter","transform"]),oy=iJ(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),ov={anticipate:rU,backInOut:rj,circInOut:rF};class ox extends lG{constructor(e){super(e);const{name:t,motionValue:n,element:i,keyframes:r}=this.options;this.resolver=new lL(r,(e,t)=>this.onKeyframesResolved(e,t),t,n,i),this.resolver.scheduleResolve()}initPlayback(e,t){var n;let{duration:i=300,times:r,ease:l,type:o,motionValue:s,name:a,startTime:u}=this.options;if(!s.owner||!s.owner.current)return!1;if("string"==typeof l&&i3()&&l in ov&&(l=ov[l]),i1((n=this.options).type)||"spring"===n.type||!function e(t){return!!("function"==typeof t&&i3()||!t||"string"==typeof t&&(t in i9||i3())||i5(t)||Array.isArray(t)&&t.every(e))}(n.ease)){let{onComplete:t,onUpdate:n,motionValue:s,element:a,...u}=this.options,d=function(e,t){let n=new of({...t,keyframes:e,repeat:0,delay:0,isGenerator:!0}),i={done:!1,value:e[0]},r=[],l=0;for(;!i.done&&l<2e4;)r.push((i=n.sample(l)).value),l+=10;return{times:void 0,keyframes:r,duration:l-10,ease:"linear"}}(e,u);1===(e=d.keyframes).length&&(e[1]=e[0]),i=d.duration,r=d.times,l=d.ease,o="keyframes"}let d=function(e,t,n,{delay:i=0,duration:r=300,repeat:l=0,repeatType:o="loop",ease:s="easeInOut",times:a}={}){let u={[t]:n};a&&(u.offset=a);let d=function e(t,n){if(t)return"function"==typeof t&&i3()?i6(t,n):i5(t)?i8(t):Array.isArray(t)?t.map(t=>e(t,n)||i9.easeOut):i9[t]}(s,r);return Array.isArray(d)&&(u.easing=d),e.animate(u,{delay:i,duration:r,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:l+1,direction:"reverse"===o?"alternate":"normal"})}(s.owner.current,a,e,{...this.options,duration:i,times:r,ease:l});return d.startTime=null!=u?u:this.calcStartTime(),this.pendingTimeline?(i2(d,this.pendingTimeline),this.pendingTimeline=void 0):d.onfinish=()=>{let{onComplete:n}=this.options;s.set(lq(e,this.options,t)),n&&n(),this.cancel(),this.resolveFinishedPromise()},{animation:d,duration:i,times:r,type:o,ease:l,keyframes:e}}get duration(){let{resolved:e}=this;if(!e)return 0;let{duration:t}=e;return t/1e3}get time(){let{resolved:e}=this;if(!e)return 0;let{animation:t}=e;return(t.currentTime||0)/1e3}set time(e){let{resolved:t}=this;if(!t)return;let{animation:n}=t;n.currentTime=iY(e)}get speed(){let{resolved:e}=this;if(!e)return 1;let{animation:t}=e;return t.playbackRate}set speed(e){let{resolved:t}=this;if(!t)return;let{animation:n}=t;n.playbackRate=e}get state(){let{resolved:e}=this;if(!e)return"idle";let{animation:t}=e;return t.playState}get startTime(){let{resolved:e}=this;if(!e)return null;let{animation:t}=e;return t.startTime}attachTimeline(e){if(this._resolved){let{resolved:t}=this;if(!t)return iz;let{animation:n}=t;i2(n,e)}else this.pendingTimeline=e;return iz}play(){if(this.isStopped)return;let{resolved:e}=this;if(!e)return;let{animation:t}=e;"finished"===t.playState&&this.updateFinishedPromise(),t.play()}pause(){let{resolved:e}=this;if(!e)return;let{animation:t}=e;t.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,"idle"===this.state)return;this.resolveFinishedPromise(),this.updateFinishedPromise();let{resolved:e}=this;if(!e)return;let{animation:t,keyframes:n,duration:i,type:r,ease:l,times:o}=e;if("idle"===t.playState||"finished"===t.playState)return;if(this.time){let{motionValue:e,onUpdate:t,onComplete:s,element:a,...u}=this.options,d=new of({...u,keyframes:n,duration:i,type:r,ease:l,times:o,isGenerator:!0}),c=iY(this.time);e.setWithVelocity(d.sample(c-10).value,d.sample(c).value,10)}let{onStop:s}=this.options;s&&s(),this.cancel()}complete(){let{resolved:e}=this;e&&e.animation.finish()}cancel(){let{resolved:e}=this;e&&e.animation.cancel()}static supports(e){let{motionValue:t,name:n,repeatDelay:i,repeatType:r,damping:l,type:o}=e;if(!t||!t.owner||!(t.owner.current instanceof HTMLElement))return!1;let{onUpdate:s,transformTemplate:a}=t.owner.getProps();return oy()&&n&&og.has(n)&&!s&&!a&&!i&&"mirror"!==r&&0!==l&&"inertia"!==o}}let ob={type:"spring",stiffness:500,damping:25,restSpeed:10},oE={type:"keyframes",duration:.8},oS={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},ow=(e,t,n,i={},r,l)=>o=>{let s=iZ(i,e)||{},a=s.delay||i.delay||0,{elapsed:u=0}=i;u-=iY(a);let d={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...s,delay:-u,onUpdate:e=>{t.set(e),s.onUpdate&&s.onUpdate(e)},onComplete:()=>{o(),s.onComplete&&s.onComplete()},name:e,motionValue:t,element:l?void 0:r};!function({when:e,delay:t,delayChildren:n,staggerChildren:i,staggerDirection:r,repeat:l,repeatType:o,repeatDelay:s,from:a,elapsed:u,...d}){return!!Object.keys(d).length}(s)&&(d={...d,...((e,{keyframes:t})=>t.length>2?oE:rd.has(e)?e.startsWith("scale")?{type:"spring",stiffness:550,damping:0===t[1]?2*Math.sqrt(550):30,restSpeed:10}:ob:oS)(e,d)}),d.duration&&(d.duration=iY(d.duration)),d.repeatDelay&&(d.repeatDelay=iY(d.repeatDelay)),void 0!==d.from&&(d.keyframes[0]=d.from);let c=!1;if(!1!==d.type&&(0!==d.duration||d.repeatDelay)||(d.duration=0,0===d.delay&&(c=!0)),c&&!l&&void 0!==t.get()){let e=lq(d.keyframes,s);if(void 0!==e)return rf.update(()=>{d.onUpdate(e),d.onComplete()}),new iQ([])}return!l&&ox.supports(d)?new ox(d):new of(d)};function oT(e,t,{delay:n=0,transitionOverride:i,type:r}={}){var l;let{transition:o=e.getDefaultTransition(),transitionEnd:s,...a}=t;i&&(o=i);let u=[],d=r&&e.animationState&&e.animationState.getState()[r];for(let t in a){let i=e.getValue(t,null!=(l=e.latestValues[t])?l:null),r=a[t];if(void 0===r||d&&function({protectedKeys:e,needsAnimating:t},n){let i=e.hasOwnProperty(n)&&!0!==t[n];return t[n]=!1,i}(d,t))continue;let s={delay:n,...iZ(o||{},t)},c=!1;if(window.MotionHandoffAnimation){let n=e.props[rO];if(n){let e=window.MotionHandoffAnimation(n,t,rf);null!==e&&(s.startTime=e,c=!0)}}rI(e,t),i.start(ow(t,i,r,e.shouldReduceMotion&&rc.has(t)?{type:!1}:s,e,c));let p=i.animation;p&&u.push(p)}return s&&Promise.all(u).then(()=>{rf.update(()=>{s&&function(e,t){let{transitionEnd:n={},transition:i={},...r}=iH(e,t)||{};for(let t in r={...r,...n}){let n=rp(r[t]);e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,rA(n))}}(e,s)})}),u}function oA(e,t,n={}){var i;let r=iH(e,t,"exit"===n.type?null==(i=e.presenceContext)?void 0:i.custom:void 0),{transition:l=e.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(l=n.transitionOverride);let o=r?()=>Promise.all(oT(e,r,n)):()=>Promise.resolve(),s=e.variantChildren&&e.variantChildren.size?(i=0)=>{let{delayChildren:r=0,staggerChildren:o,staggerDirection:s}=l;return function(e,t,n=0,i=0,r=1,l){let o=[],s=(e.variantChildren.size-1)*i,a=1===r?(e=0)=>e*i:(e=0)=>s-e*i;return Array.from(e.variantChildren).sort(oC).forEach((e,i)=>{e.notify("AnimationStart",t),o.push(oA(e,t,{...l,delay:n+a(i)}).then(()=>e.notify("AnimationComplete",t)))}),Promise.all(o)}(e,t,r+i,o,s,n)}:()=>Promise.resolve(),{when:a}=l;if(!a)return Promise.all([o(),s(n.delay)]);{let[e,t]="beforeChildren"===a?[o,s]:[s,o];return e().then(()=>t())}}function oC(e,t){return e.sortNodePosition(t)}let oI=i$.length,o_=[...iB].reverse(),oO=iB.length;function oN(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function oR(){return{animate:oN(!0),whileInView:oN(),whileHover:oN(),whileTap:oN(),whileDrag:oN(),whileFocus:oN(),exit:oN()}}class oP{constructor(e){this.isMounted=!1,this.node=e}update(){}}let ok=0;function oM(e,t,n,i={passive:!0}){return e.addEventListener(t,n,i),()=>e.removeEventListener(t,n)}function oD(e){return{point:{x:e.pageX,y:e.pageY}}}function oj(e,t,n,i){return oM(e,t,e=>ri(e)&&n(e,oD(e)),i)}let oU=(e,t)=>Math.abs(e-t);class oL{constructor(e,t,{transformPagePoint:n,contextWindow:i,dragSnapToOrigin:r=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{var e,t;if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;let n=oq(this.lastMoveEventInfo,this.history),i=null!==this.startEvent,r=(e=n.offset,t={x:0,y:0},Math.sqrt(oU(e.x,t.x)**2+oU(e.y,t.y)**2)>=3);if(!i&&!r)return;let{point:l}=n,{timestamp:o}=ry;this.history.push({...l,timestamp:o});let{onStart:s,onMove:a}=this.handlers;i||(s&&s(this.lastMoveEvent,n),this.startEvent=this.lastMoveEvent),a&&a(this.lastMoveEvent,n)},this.handlePointerMove=(e,t)=>{this.lastMoveEvent=e,this.lastMoveEventInfo=oV(t,this.transformPagePoint),rf.update(this.updatePoint,!0)},this.handlePointerUp=(e,t)=>{this.end();let{onEnd:n,onSessionEnd:i,resumeAnimation:r}=this.handlers;if(this.dragSnapToOrigin&&r&&r(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;let l=oq("pointercancel"===e.type?this.lastMoveEventInfo:oV(t,this.transformPagePoint),this.history);this.startEvent&&n&&n(e,l),i&&i(e,l)},!ri(e))return;this.dragSnapToOrigin=r,this.handlers=t,this.transformPagePoint=n,this.contextWindow=i||window;const l=oV(oD(e),this.transformPagePoint),{point:o}=l,{timestamp:s}=ry;this.history=[{...o,timestamp:s}];const{onSessionStart:a}=t;a&&a(e,oq(l,this.history)),this.removeListeners=lX(oj(this.contextWindow,"pointermove",this.handlePointerMove),oj(this.contextWindow,"pointerup",this.handlePointerUp),oj(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),rg(this.updatePoint)}}function oV(e,t){return t?{point:t(e.point)}:e}function oF(e,t){return{x:e.x-t.x,y:e.y-t.y}}function oq({point:e},t){return{point:e,delta:oF(e,oG(t)),offset:oF(e,t[0]),velocity:function(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,i=null,r=oG(e);for(;n>=0&&(i=e[n],!(r.timestamp-i.timestamp>iY(.1)));)n--;if(!i)return{x:0,y:0};let l=(r.timestamp-i.timestamp)/1e3;if(0===l)return{x:0,y:0};let o={x:(r.x-i.x)/l,y:(r.y-i.y)/l};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}(t,.1)}}function oG(e){return e[e.length-1]}function oH(e){return e&&"object"==typeof e&&Object.prototype.hasOwnProperty.call(e,"current")}function oB(e){return e.max-e.min}function o$(e,t,n,i=.5){e.origin=i,e.originPoint=lH(t.min,t.max,e.origin),e.scale=oB(n)/oB(t),e.translate=lH(n.min,n.max,e.origin)-e.originPoint,(e.scale>=.9999&&e.scale<=1.0001||isNaN(e.scale))&&(e.scale=1),(e.translate>=-.01&&e.translate<=.01||isNaN(e.translate))&&(e.translate=0)}function oz(e,t,n,i){o$(e.x,t.x,n.x,i?i.originX:void 0),o$(e.y,t.y,n.y,i?i.originY:void 0)}function oJ(e,t,n){e.min=n.min+t.min,e.max=e.min+oB(t)}function oW(e,t,n){e.min=t.min-n.min,e.max=e.min+oB(t)}function oY(e,t,n){oW(e.x,t.x,n.x),oW(e.y,t.y,n.y)}function oK(e,t,n){return{min:void 0!==t?e.min+t:void 0,max:void 0!==n?e.max+n-(e.max-e.min):void 0}}function oX(e,t){let n=t.min-e.min,i=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,i]=[i,n]),{min:n,max:i}}function oQ(e,t,n){return{min:oZ(e,t),max:oZ(e,n)}}function oZ(e,t){return"number"==typeof e?e:e[t]||0}let o0=()=>({translate:0,scale:1,origin:0,originPoint:0}),o1=()=>({x:o0(),y:o0()}),o2=()=>({min:0,max:0}),o5=()=>({x:o2(),y:o2()});function o4(e){return[e("x"),e("y")]}function o3({top:e,left:t,right:n,bottom:i}){return{x:{min:t,max:n},y:{min:e,max:i}}}function o6(e){return void 0===e||1===e}function o8({scale:e,scaleX:t,scaleY:n}){return!o6(e)||!o6(t)||!o6(n)}function o9(e){return o8(e)||o7(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function o7(e){var t,n;return(t=e.x)&&"0%"!==t||(n=e.y)&&"0%"!==n}function se(e,t,n,i,r){return void 0!==r&&(e=i+r*(e-i)),i+n*(e-i)+t}function st(e,t=0,n=1,i,r){e.min=se(e.min,t,n,i,r),e.max=se(e.max,t,n,i,r)}function sn(e,{x:t,y:n}){st(e.x,t.translate,t.scale,t.originPoint),st(e.y,n.translate,n.scale,n.originPoint)}function si(e,t){e.min=e.min+t,e.max=e.max+t}function sr(e,t,n,i,r=.5){let l=lH(e.min,e.max,r);st(e,t,n,l,i)}function sl(e,t){sr(e.x,t.x,t.scaleX,t.scale,t.originX),sr(e.y,t.y,t.scaleY,t.scale,t.originY)}function so(e,t){return o3(function(e,t){if(!t)return e;let n=t({x:e.left,y:e.top}),i=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:i.y,right:i.x}}(e.getBoundingClientRect(),t))}let ss=({current:e})=>e?e.ownerDocument.defaultView:null,sa=new WeakMap;class su{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=o5(),this.visualElement=e}start(e,{snapToCursor:t=!1}={}){let{presenceContext:n}=this.visualElement;if(n&&!1===n.isPresent)return;let i=e=>{let{dragSnapToOrigin:n}=this.getProps();n?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(oD(e).point)},r=(e,t)=>{let{drag:n,dragPropagation:i,onDragStart:r}=this.getProps();if(n&&!i&&(this.openDragLock&&this.openDragLock(),this.openDragLock=function(e){if("x"===e||"y"===e)if(i7[e])return null;else return i7[e]=!0,()=>{i7[e]=!1};return i7.x||i7.y?null:(i7.x=i7.y=!0,()=>{i7.x=i7.y=!1})}(n),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),o4(e=>{let t=this.getAxisMotionValue(e).get()||0;if(r1.test(t)){let{projection:n}=this.visualElement;if(n&&n.layout){let i=n.layout.layoutBox[e];i&&(t=oB(i)*(parseFloat(t)/100))}}this.originPoint[e]=t}),r&&rf.postRender(()=>r(e,t)),rI(this.visualElement,"transform");let{animationState:l}=this.visualElement;l&&l.setActive("whileDrag",!0)},l=(e,t)=>{let{dragPropagation:n,dragDirectionLock:i,onDirectionLock:r,onDrag:l}=this.getProps();if(!n&&!this.openDragLock)return;let{offset:o}=t;if(i&&null===this.currentDirection){this.currentDirection=function(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}(o),null!==this.currentDirection&&r&&r(this.currentDirection);return}this.updateAxis("x",t.point,o),this.updateAxis("y",t.point,o),this.visualElement.render(),l&&l(e,t)},o=(e,t)=>this.stop(e,t),s=()=>o4(e=>{var t;return"paused"===this.getAnimationState(e)&&(null==(t=this.getAxisMotionValue(e).animation)?void 0:t.play())}),{dragSnapToOrigin:a}=this.getProps();this.panSession=new oL(e,{onSessionStart:i,onStart:r,onMove:l,onSessionEnd:o,resumeAnimation:s},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:a,contextWindow:ss(this.visualElement)})}stop(e,t){let n=this.isDragging;if(this.cancel(),!n)return;let{velocity:i}=t;this.startAnimation(i);let{onDragEnd:r}=this.getProps();r&&rf.postRender(()=>r(e,t))}cancel(){this.isDragging=!1;let{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;let{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,n){let{drag:i}=this.getProps();if(!n||!sd(e,i,this.currentDirection))return;let r=this.getAxisMotionValue(e),l=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(l=function(e,{min:t,max:n},i){return void 0!==t&&e<t?e=i?lH(t,e,i.min):Math.max(e,t):void 0!==n&&e>n&&(e=i?lH(n,e,i.max):Math.min(e,n)),e}(l,this.constraints[e],this.elastic[e])),r.set(l)}resolveConstraints(){var e;let{dragConstraints:t,dragElastic:n}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):null==(e=this.visualElement.projection)?void 0:e.layout,r=this.constraints;t&&oH(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&i?this.constraints=function(e,{top:t,left:n,bottom:i,right:r}){return{x:oK(e.x,n,r),y:oK(e.y,t,i)}}(i.layoutBox,t):this.constraints=!1,this.elastic=function(e=.35){return!1===e?e=0:!0===e&&(e=.35),{x:oQ(e,"left","right"),y:oQ(e,"top","bottom")}}(n),r!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&o4(e=>{var t,n;let r;!1!==this.constraints&&this.getAxisMotionValue(e)&&(this.constraints[e]=(t=i.layoutBox[e],n=this.constraints[e],r={},void 0!==n.min&&(r.min=n.min-t.min),void 0!==n.max&&(r.max=n.max-t.min),r))})}resolveRefConstraints(){var e;let{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!oH(t))return!1;let i=t.current;iz(null!==i,"If `dragConstraints` is set as a React ref, that ref must be passed to another component's `ref` prop.");let{projection:r}=this.visualElement;if(!r||!r.layout)return!1;let l=function(e,t,n){let i=so(e,n),{scroll:r}=t;return r&&(si(i.x,r.offset.x),si(i.y,r.offset.y)),i}(i,r.root,this.visualElement.getTransformPagePoint()),o=(e=r.layout.layoutBox,{x:oX(e.x,l.x),y:oX(e.y,l.y)});if(n){let e=n(function({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}(o));this.hasMutatedConstraints=!!e,e&&(o=o3(e))}return o}startAnimation(e){let{drag:t,dragMomentum:n,dragElastic:i,dragTransition:r,dragSnapToOrigin:l,onDragTransitionEnd:o}=this.getProps(),s=this.constraints||{};return Promise.all(o4(o=>{if(!sd(o,t,this.currentDirection))return;let a=s&&s[o]||{};l&&(a={min:0,max:0});let u={type:"inertia",velocity:n?e[o]:0,bounceStiffness:i?200:1e6,bounceDamping:i?40:1e7,timeConstant:750,restDelta:1,restSpeed:10,...r,...a};return this.startAxisValueAnimation(o,u)})).then(o)}startAxisValueAnimation(e,t){let n=this.getAxisMotionValue(e);return rI(this.visualElement,e),n.start(ow(e,n,0,t,this.visualElement,!1))}stopAnimation(){o4(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){o4(e=>{var t;return null==(t=this.getAxisMotionValue(e).animation)?void 0:t.pause()})}getAnimationState(e){var t;return null==(t=this.getAxisMotionValue(e).animation)?void 0:t.state}getAxisMotionValue(e){let t=`_drag${e.toUpperCase()}`,n=this.visualElement.getProps();return n[t]||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){o4(t=>{let{drag:n}=this.getProps();if(!sd(t,n,this.currentDirection))return;let{projection:i}=this.visualElement,r=this.getAxisMotionValue(t);if(i&&i.layout){let{min:n,max:l}=i.layout.layoutBox[t];r.set(e[t]-lH(n,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;let{drag:e,dragConstraints:t}=this.getProps(),{projection:n}=this.visualElement;if(!oH(t)||!n||!this.constraints)return;this.stopAnimation();let i={x:0,y:0};o4(e=>{let t=this.getAxisMotionValue(e);if(t&&!1!==this.constraints){var n,r;let l,o,s,a=t.get();i[e]=(n={min:a,max:a},r=this.constraints[e],l=.5,o=oB(n),(s=oB(r))>o?l=iW(r.min,r.max-o,n.min):o>s&&(l=iW(n.min,n.max-s,r.min)),rq(0,1,l))}});let{transformTemplate:r}=this.visualElement.getProps();this.visualElement.current.style.transform=r?r({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),o4(t=>{if(!sd(t,e,null))return;let n=this.getAxisMotionValue(t),{min:r,max:l}=this.constraints[t];n.set(lH(r,l,i[t]))})}addListeners(){if(!this.visualElement.current)return;sa.set(this.visualElement,this);let e=oj(this.visualElement.current,"pointerdown",e=>{let{drag:t,dragListener:n=!0}=this.getProps();t&&n&&this.start(e)}),t=()=>{let{dragConstraints:e}=this.getProps();oH(e)&&e.current&&(this.constraints=this.resolveRefConstraints())},{projection:n}=this.visualElement,i=n.addEventListener("measure",t);n&&!n.layout&&(n.root&&n.root.updateScroll(),n.updateLayout()),rf.read(t);let r=oM(window,"resize",()=>this.scalePositionWithinConstraints()),l=n.addEventListener("didUpdate",({delta:e,hasLayoutChanged:t})=>{this.isDragging&&t&&(o4(t=>{let n=this.getAxisMotionValue(t);n&&(this.originPoint[t]+=e[t].translate,n.set(n.get()+e[t].translate))}),this.visualElement.render())});return()=>{r(),e(),i(),l&&l()}}getProps(){let e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:n=!1,dragPropagation:i=!1,dragConstraints:r=!1,dragElastic:l=.35,dragMomentum:o=!0}=e;return{...e,drag:t,dragDirectionLock:n,dragPropagation:i,dragConstraints:r,dragElastic:l,dragMomentum:o}}}function sd(e,t,n){return(!0===t||t===e)&&(null===n||n===e)}let sc=e=>(t,n)=>{e&&rf.postRender(()=>e(t,n))};var sp=tO;let sh=(0,tO.createContext)(null),sm=(0,tO.createContext)({}),sf=(0,tO.createContext)({}),sg={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function sy(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}let sv={correct:(e,t)=>{if(!t.target)return e;if("string"==typeof e)if(!r2.test(e))return e;else e=parseFloat(e);let n=sy(e,t.target.x),i=sy(e,t.target.y);return`${n}% ${i}%`}},sx={},{schedule:sb,cancel:sE}=rm(queueMicrotask,!1);class sS extends sp.Component{componentDidMount(){let{visualElement:e,layoutGroup:t,switchLayoutGroup:n,layoutId:i}=this.props,{projection:r}=e;Object.assign(sx,sT),r&&(t.group&&t.group.add(r),n&&n.register&&i&&n.register(r),r.root.didUpdate(),r.addEventListener("animationComplete",()=>{this.safeToRemove()}),r.setOptions({...r.options,onExitComplete:()=>this.safeToRemove()})),sg.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){let{layoutDependency:t,visualElement:n,drag:i,isPresent:r}=this.props,l=n.projection;return l&&(l.isPresent=r,i||e.layoutDependency!==t||void 0===t?l.willUpdate():this.safeToRemove(),e.isPresent!==r&&(r?l.promote():l.relegate()||rf.postRender(()=>{let e=l.getStack();e&&e.members.length||this.safeToRemove()}))),null}componentDidUpdate(){let{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),sb.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){let{visualElement:e,layoutGroup:t,switchLayoutGroup:n}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(i),n&&n.deregister&&n.deregister(i))}safeToRemove(){let{safeToRemove:e}=this.props;e&&e()}render(){return null}}function sw(e){let[t,n]=function(e=!0){let t=(0,tO.useContext)(sh);if(null===t)return[!0,null];let{isPresent:n,onExitComplete:i,register:r}=t,l=(0,tO.useId)();(0,tO.useEffect)(()=>{e&&r(l)},[e]);let o=(0,tO.useCallback)(()=>e&&i&&i(l),[l,i,e]);return!n&&i?[!1,o]:[!0]}(),i=(0,sp.useContext)(sm);return(0,t_.jsx)(sS,{...e,layoutGroup:i,switchLayoutGroup:(0,sp.useContext)(sf),isPresent:t,safeToRemove:n})}let sT={borderRadius:{...sv,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:sv,borderTopRightRadius:sv,borderBottomLeftRadius:sv,borderBottomRightRadius:sv,boxShadow:{correct:(e,{treeScale:t,projectionDelta:n})=>{let i=lo.parse(e);if(i.length>5)return e;let r=lo.createTransformer(e),l=+("number"!=typeof i[0]),o=n.x.scale*t.x,s=n.y.scale*t.y;i[0+l]/=o,i[1+l]/=s;let a=lH(o,s,.5);return"number"==typeof i[2+l]&&(i[2+l]/=a),"number"==typeof i[3+l]&&(i[3+l]/=a),r(i)}}},sA=(e,t)=>e.depth-t.depth;class sC{constructor(){this.children=[],this.isDirty=!1}add(e){rE(this.children,e),this.isDirty=!0}remove(e){rS(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(sA),this.isDirty=!1,this.children.forEach(e)}}function sI(e){let t=rC(e)?e.get():e;return t&&"object"==typeof t&&t.mix&&t.toValue?t.toValue():t}let s_=["TopLeft","TopRight","BottomLeft","BottomRight"],sO=s_.length,sN=e=>"string"==typeof e?parseFloat(e):e,sR=e=>"number"==typeof e||r2.test(e);function sP(e,t){return void 0!==e[t]?e[t]:e.borderRadius}let sk=sD(0,.5,rV),sM=sD(.5,.95,iz);function sD(e,t,n){return i=>i<e?0:i>t?1:n(iW(e,t,i))}function sj(e,t){e.min=t.min,e.max=t.max}function sU(e,t){sj(e.x,t.x),sj(e.y,t.y)}function sL(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function sV(e,t,n,i,r){return e-=t,e=i+1/n*(e-i),void 0!==r&&(e=i+1/r*(e-i)),e}function sF(e,t,[n,i,r],l,o){!function(e,t=0,n=1,i=.5,r,l=e,o=e){if(r1.test(t)&&(t=parseFloat(t),t=lH(o.min,o.max,t/100)-o.min),"number"!=typeof t)return;let s=lH(l.min,l.max,i);e===l&&(s-=t),e.min=sV(e.min,t,n,s,r),e.max=sV(e.max,t,n,s,r)}(e,t[n],t[i],t[r],t.scale,l,o)}let sq=["x","scaleX","originX"],sG=["y","scaleY","originY"];function sH(e,t,n,i){sF(e.x,t,sq,n?n.x:void 0,i?i.x:void 0),sF(e.y,t,sG,n?n.y:void 0,i?i.y:void 0)}function sB(e){return 0===e.translate&&1===e.scale}function s$(e){return sB(e.x)&&sB(e.y)}function sz(e,t){return e.min===t.min&&e.max===t.max}function sJ(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function sW(e,t){return sJ(e.x,t.x)&&sJ(e.y,t.y)}function sY(e){return oB(e.x)/oB(e.y)}function sK(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class sX{constructor(){this.members=[]}add(e){rE(this.members,e),e.scheduleRender()}remove(e){if(rS(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){let e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(e){let t,n=this.members.findIndex(t=>e===t);if(0===n)return!1;for(let e=n;e>=0;e--){let n=this.members[e];if(!1!==n.isPresent){t=n;break}}return!!t&&(this.promote(t),!0)}promote(e,t){let n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender(),e.resumeFrom=n,t&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);let{crossfade:i}=e.options;!1===i&&n.hide()}}exitAnimationComplete(){this.members.forEach(e=>{let{options:t,resumingFrom:n}=e;t.onExitComplete&&t.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}let sQ={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},sZ="undefined"!=typeof window&&void 0!==window.MotionDebug,s0=["","X","Y","Z"],s1={visibility:"hidden"},s2=0;function s5(e,t,n,i){let{latestValues:r}=t;r[e]&&(n[e]=r[e],t.setStaticValue(e,0),i&&(i[e]=0))}function s4({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:i,resetTransform:r}){return class{constructor(e={},n=null==t?void 0:t()){this.id=s2++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,sZ&&(sQ.totalNodes=sQ.resolvedTargetDeltas=sQ.recalculatedProjection=0),this.nodes.forEach(s8),this.nodes.forEach(ar),this.nodes.forEach(al),this.nodes.forEach(s9),sZ&&window.MotionDebug.record(sQ)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=e,this.root=n?n.root||n:this,this.path=n?[...n.path,n]:[],this.parent=n,this.depth=n?n.depth+1:0;for(let e=0;e<this.path.length;e++)this.path[e].shouldResetTransform=!0;this.root===this&&(this.nodes=new sC)}addEventListener(e,t){return this.eventHandlers.has(e)||this.eventHandlers.set(e,new rw),this.eventHandlers.get(e).add(t)}notifyListeners(e,...t){let n=this.eventHandlers.get(e);n&&n.notify(...t)}hasListeners(e){return this.eventHandlers.has(e)}mount(t,n=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=t instanceof SVGElement&&"svg"!==t.tagName,this.instance=t;let{layoutId:i,layout:r,visualElement:l}=this.options;if(l&&!l.current&&l.mount(t),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),n&&(r||i)&&(this.isLayoutDirty=!0),e){let n,i=()=>this.root.updateBlockedByResize=!1;e(t,()=>{let e,t;this.root.updateBlockedByResize=!0,n&&n(),e=rb.now(),t=({timestamp:n})=>{let r=n-e;r>=250&&(rg(t),i(r-250))},rf.read(t,!0),n=()=>rg(t),sg.hasAnimatedSinceResize&&(sg.hasAnimatedSinceResize=!1,this.nodes.forEach(ai))})}i&&this.root.registerSharedNode(i,this),!1!==this.options.animate&&l&&(i||r)&&this.addEventListener("didUpdate",({delta:e,hasLayoutChanged:t,hasRelativeTargetChanged:n,layout:i})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}let r=this.options.transition||l.getDefaultTransition()||ac,{onLayoutAnimationStart:o,onLayoutAnimationComplete:s}=l.getProps(),a=!this.targetLayout||!sW(this.targetLayout,i)||n,u=!t&&n;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||u||t&&(a||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(e,u);let t={...iZ(r,"layout"),onPlay:o,onComplete:s};(l.shouldReduceMotion||this.options.layoutRoot)&&(t.delay=0,t.type=!1),this.startAnimation(t)}else t||ai(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=i})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);let e=this.getStack();e&&e.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,rg(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){!this.isUpdateBlocked()&&(this.isUpdating=!0,this.nodes&&this.nodes.forEach(ao),this.animationId++)}getTransformTemplate(){let{visualElement:e}=this.options;return e&&e.getProps().transformTemplate}willUpdate(e=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&function e(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;let{visualElement:n}=t.options;if(!n)return;let i=n.props[rO];if(window.MotionHasOptimisedAnimation(i,"transform")){let{layout:e,layoutId:n}=t.options;window.MotionCancelOptimisedAnimation(i,"transform",rf,!(e||n))}let{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&e(r)}(this),this.root.isUpdating||this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let e=0;e<this.path.length;e++){let t=this.path[e];t.shouldResetTransform=!0,t.updateScroll("snapshot"),t.options.layoutRoot&&t.willUpdate(!1)}let{layoutId:t,layout:n}=this.options;if(void 0===t&&!n)return;let i=this.getTransformTemplate();this.prevTransformTemplateValue=i?i(this.latestValues,""):void 0,this.updateSnapshot(),e&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(ae);return}this.isUpdating||this.nodes.forEach(at),this.isUpdating=!1,this.nodes.forEach(an),this.nodes.forEach(s3),this.nodes.forEach(s6),this.clearAllSnapshots();let e=rb.now();ry.delta=rq(0,1e3/60,e-ry.timestamp),ry.timestamp=e,ry.isProcessing=!0,rv.update.process(ry),rv.preRender.process(ry),rv.render.process(ry),ry.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,sb.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(s7),this.sharedNodes.forEach(as)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,rf.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){rf.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){!this.snapshot&&this.instance&&(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let e=0;e<this.path.length;e++)this.path[e].updateScroll();let e=this.layout;this.layout=this.measure(!1),this.layoutCorrected=o5(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);let{visualElement:t}=this.options;t&&t.notify("LayoutMeasure",this.layout.layoutBox,e?e.layoutBox:void 0)}updateScroll(e="measure"){let t=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===e&&(t=!1),t){let t=i(this.instance);this.scroll={animationId:this.root.animationId,phase:e,isRoot:t,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:t}}}resetTransform(){if(!r)return;let e=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,t=this.projectionDelta&&!s$(this.projectionDelta),n=this.getTransformTemplate(),i=n?n(this.latestValues,""):void 0,l=i!==this.prevTransformTemplateValue;e&&(t||o9(this.latestValues)||l)&&(r(this.instance,i),this.shouldResetTransform=!1,this.scheduleRender())}measure(e=!0){var t;let n=this.measurePageBox(),i=this.removeElementScroll(n);return e&&(i=this.removeTransform(i)),am((t=i).x),am(t.y),{animationId:this.root.animationId,measuredBox:n,layoutBox:i,latestValues:{},source:this.id}}measurePageBox(){var e;let{visualElement:t}=this.options;if(!t)return o5();let n=t.measureViewportBox();if(!((null==(e=this.scroll)?void 0:e.wasRoot)||this.path.some(ag))){let{scroll:e}=this.root;e&&(si(n.x,e.offset.x),si(n.y,e.offset.y))}return n}removeElementScroll(e){var t;let n=o5();if(sU(n,e),null==(t=this.scroll)?void 0:t.wasRoot)return n;for(let t=0;t<this.path.length;t++){let i=this.path[t],{scroll:r,options:l}=i;i!==this.root&&r&&l.layoutScroll&&(r.wasRoot&&sU(n,e),si(n.x,r.offset.x),si(n.y,r.offset.y))}return n}applyTransform(e,t=!1){let n=o5();sU(n,e);for(let e=0;e<this.path.length;e++){let i=this.path[e];!t&&i.options.layoutScroll&&i.scroll&&i!==i.root&&sl(n,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o9(i.latestValues)&&sl(n,i.latestValues)}return o9(this.latestValues)&&sl(n,this.latestValues),n}removeTransform(e){let t=o5();sU(t,e);for(let e=0;e<this.path.length;e++){let n=this.path[e];if(!n.instance||!o9(n.latestValues))continue;o8(n.latestValues)&&n.updateSnapshot();let i=o5();sU(i,n.measurePageBox()),sH(t,n.latestValues,n.snapshot?n.snapshot.layoutBox:void 0,i)}return o9(this.latestValues)&&sH(t,this.latestValues),t}setTargetDelta(e){this.targetDelta=e,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(e){this.options={...this.options,...e,crossfade:void 0===e.crossfade||e.crossfade}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==ry.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(e=!1){var t,n,i,r;let l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);let o=!!this.resumingFrom||this!==l;if(!(e||o&&this.isSharedProjectionDirty||this.isProjectionDirty||(null==(t=this.parent)?void 0:t.isProjectionDirty)||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;let{layout:s,layoutId:a}=this.options;if(this.layout&&(s||a)){if(this.resolvedRelativeTargetAt=ry.timestamp,!this.targetDelta&&!this.relativeTarget){let e=this.getClosestProjectingParent();e&&e.layout&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget=o5(),this.relativeTargetOrigin=o5(),oY(this.relativeTargetOrigin,this.layout.layoutBox,e.layout.layoutBox),sU(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(this.relativeTarget||this.targetDelta){if((this.target||(this.target=o5(),this.targetWithTransforms=o5()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target)?(this.forceRelativeParentToResolveTarget(),n=this.target,i=this.relativeTarget,r=this.relativeParent.target,oJ(n.x,i.x,r.x),oJ(n.y,i.y,r.y)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):sU(this.target,this.layout.layoutBox),sn(this.target,this.targetDelta)):sU(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;let e=this.getClosestProjectingParent();e&&!!e.resumingFrom==!!this.resumingFrom&&!e.options.layoutScroll&&e.target&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget=o5(),this.relativeTargetOrigin=o5(),oY(this.relativeTargetOrigin,this.target,e.target),sU(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}sZ&&sQ.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||o8(this.parent.latestValues)||o7(this.parent.latestValues)))if(this.parent.isProjecting())return this.parent;else return this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var e;let t=this.getLead(),n=!!this.resumingFrom||this!==t,i=!0;if((this.isProjectionDirty||(null==(e=this.parent)?void 0:e.isProjectionDirty))&&(i=!1),n&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(i=!1),this.resolvedRelativeTargetAt===ry.timestamp&&(i=!1),i)return;let{layout:r,layoutId:l}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(r||l))return;sU(this.layoutCorrected,this.layout.layoutBox);let o=this.treeScale.x,s=this.treeScale.y;!function(e,t,n,i=!1){let r,l,o=n.length;if(o){t.x=t.y=1;for(let s=0;s<o;s++){l=(r=n[s]).projectionDelta;let{visualElement:o}=r.options;(!o||!o.props.style||"contents"!==o.props.style.display)&&(i&&r.options.layoutScroll&&r.scroll&&r!==r.root&&sl(e,{x:-r.scroll.offset.x,y:-r.scroll.offset.y}),l&&(t.x*=l.x.scale,t.y*=l.y.scale,sn(e,l)),i&&o9(r.latestValues)&&sl(e,r.latestValues))}t.x<1.0000000000001&&t.x>.999999999999&&(t.x=1),t.y<1.0000000000001&&t.y>.999999999999&&(t.y=1)}}(this.layoutCorrected,this.treeScale,this.path,n),t.layout&&!t.target&&(1!==this.treeScale.x||1!==this.treeScale.y)&&(t.target=t.layout.layoutBox,t.targetWithTransforms=o5());let{target:a}=t;if(!a){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}this.projectionDelta&&this.prevProjectionDelta?(sL(this.prevProjectionDelta.x,this.projectionDelta.x),sL(this.prevProjectionDelta.y,this.projectionDelta.y)):this.createProjectionDeltas(),oz(this.projectionDelta,this.layoutCorrected,a,this.latestValues),this.treeScale.x===o&&this.treeScale.y===s&&sK(this.projectionDelta.x,this.prevProjectionDelta.x)&&sK(this.projectionDelta.y,this.prevProjectionDelta.y)||(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",a)),sZ&&sQ.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(e=!0){var t;if(null==(t=this.options.visualElement)||t.scheduleRender(),e){let e=this.getStack();e&&e.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=o1(),this.projectionDelta=o1(),this.projectionDeltaWithTransform=o1()}setAnimationOrigin(e,t=!1){let n,i=this.snapshot,r=i?i.latestValues:{},l={...this.latestValues},o=o1();this.relativeParent&&this.relativeParent.options.layoutRoot||(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!t;let s=o5(),a=(i?i.source:void 0)!==(this.layout?this.layout.source:void 0),u=this.getStack(),d=!u||u.members.length<=1,c=!!(a&&!d&&!0===this.options.crossfade&&!this.path.some(ad));this.animationProgress=0,this.mixTargetDelta=t=>{let i=t/1e3;if(aa(o.x,e.x,i),aa(o.y,e.y,i),this.setTargetDelta(o),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout){var u,p,h,m,f,g;oY(s,this.layout.layoutBox,this.relativeParent.layout.layoutBox),h=this.relativeTarget,m=this.relativeTargetOrigin,f=s,g=i,au(h.x,m.x,f.x,g),au(h.y,m.y,f.y,g),n&&(u=this.relativeTarget,p=n,sz(u.x,p.x)&&sz(u.y,p.y))&&(this.isProjectionDirty=!1),n||(n=o5()),sU(n,this.relativeTarget)}a&&(this.animationValues=l,function(e,t,n,i,r,l){r?(e.opacity=lH(0,void 0!==n.opacity?n.opacity:1,sk(i)),e.opacityExit=lH(void 0!==t.opacity?t.opacity:1,0,sM(i))):l&&(e.opacity=lH(void 0!==t.opacity?t.opacity:1,void 0!==n.opacity?n.opacity:1,i));for(let r=0;r<sO;r++){let l=`border${s_[r]}Radius`,o=sP(t,l),s=sP(n,l);(void 0!==o||void 0!==s)&&(o||(o=0),s||(s=0),0===o||0===s||sR(o)===sR(s)?(e[l]=Math.max(lH(sN(o),sN(s),i),0),(r1.test(s)||r1.test(o))&&(e[l]+="%")):e[l]=s)}(t.rotate||n.rotate)&&(e.rotate=lH(t.rotate||0,n.rotate||0,i))}(l,r,this.latestValues,i,c,d)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=i},this.mixTargetDelta(1e3*!!this.options.layoutRoot)}startAnimation(e){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(rg(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=rf.update(()=>{var t;let n;sg.hasAnimatedSinceResize=!0,this.currentAnimation=(t={...e,onUpdate:t=>{this.mixTargetDelta(t),e.onUpdate&&e.onUpdate(t)},onComplete:()=>{e.onComplete&&e.onComplete(),this.completeAnimation()}},(n=rC(0)?0:rA(0)).start(ow("",n,1e3,t)),n.animation),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);let e=this.getStack();e&&e.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(1e3),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){let e=this.getLead(),{targetWithTransforms:t,target:n,layout:i,latestValues:r}=e;if(t&&n&&i){if(this!==e&&this.layout&&i&&af(this.options.animationType,this.layout.layoutBox,i.layoutBox)){n=this.target||o5();let t=oB(this.layout.layoutBox.x);n.x.min=e.target.x.min,n.x.max=n.x.min+t;let i=oB(this.layout.layoutBox.y);n.y.min=e.target.y.min,n.y.max=n.y.min+i}sU(t,n),sl(t,r),oz(this.projectionDeltaWithTransform,this.layoutCorrected,t,r)}}registerSharedNode(e,t){this.sharedNodes.has(e)||this.sharedNodes.set(e,new sX),this.sharedNodes.get(e).add(t);let n=t.options.initialPromotionConfig;t.promote({transition:n?n.transition:void 0,preserveFollowOpacity:n&&n.shouldPreserveFollowOpacity?n.shouldPreserveFollowOpacity(t):void 0})}isLead(){let e=this.getStack();return!e||e.lead===this}getLead(){var e;let{layoutId:t}=this.options;return t&&(null==(e=this.getStack())?void 0:e.lead)||this}getPrevLead(){var e;let{layoutId:t}=this.options;return t?null==(e=this.getStack())?void 0:e.prevLead:void 0}getStack(){let{layoutId:e}=this.options;if(e)return this.root.sharedNodes.get(e)}promote({needsReset:e,transition:t,preserveFollowOpacity:n}={}){let i=this.getStack();i&&i.promote(this,n),e&&(this.projectionDelta=void 0,this.needsReset=!0),t&&this.setOptions({transition:t})}relegate(){let e=this.getStack();return!!e&&e.relegate(this)}resetSkewAndRotation(){let{visualElement:e}=this.options;if(!e)return;let t=!1,{latestValues:n}=e;if((n.z||n.rotate||n.rotateX||n.rotateY||n.rotateZ||n.skewX||n.skewY)&&(t=!0),!t)return;let i={};n.z&&s5("z",e,i,this.animationValues);for(let t=0;t<s0.length;t++)s5(`rotate${s0[t]}`,e,i,this.animationValues),s5(`skew${s0[t]}`,e,i,this.animationValues);for(let t in e.render(),i)e.setStaticValue(t,i[t]),this.animationValues&&(this.animationValues[t]=i[t]);e.scheduleRender()}getProjectionStyles(e){var t,n;if(!this.instance||this.isSVG)return;if(!this.isVisible)return s1;let i={visibility:""},r=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,i.opacity="",i.pointerEvents=sI(null==e?void 0:e.pointerEvents)||"",i.transform=r?r(this.latestValues,""):"none",i;let l=this.getLead();if(!this.projectionDelta||!this.layout||!l.target){let t={};return this.options.layoutId&&(t.opacity=void 0!==this.latestValues.opacity?this.latestValues.opacity:1,t.pointerEvents=sI(null==e?void 0:e.pointerEvents)||""),this.hasProjected&&!o9(this.latestValues)&&(t.transform=r?r({},""):"none",this.hasProjected=!1),t}let o=l.animationValues||l.latestValues;this.applyTransformsToTarget(),i.transform=function(e,t,n){let i="",r=e.x.translate/t.x,l=e.y.translate/t.y,o=(null==n?void 0:n.z)||0;if((r||l||o)&&(i=`translate3d(${r}px, ${l}px, ${o}px) `),(1!==t.x||1!==t.y)&&(i+=`scale(${1/t.x}, ${1/t.y}) `),n){let{transformPerspective:e,rotate:t,rotateX:r,rotateY:l,skewX:o,skewY:s}=n;e&&(i=`perspective(${e}px) ${i}`),t&&(i+=`rotate(${t}deg) `),r&&(i+=`rotateX(${r}deg) `),l&&(i+=`rotateY(${l}deg) `),o&&(i+=`skewX(${o}deg) `),s&&(i+=`skewY(${s}deg) `)}let s=e.x.scale*t.x,a=e.y.scale*t.y;return(1!==s||1!==a)&&(i+=`scale(${s}, ${a})`),i||"none"}(this.projectionDeltaWithTransform,this.treeScale,o),r&&(i.transform=r(o,i.transform));let{x:s,y:a}=this.projectionDelta;for(let e in i.transformOrigin=`${100*s.origin}% ${100*a.origin}% 0`,l.animationValues?i.opacity=l===this?null!=(n=null!=(t=o.opacity)?t:this.latestValues.opacity)?n:1:this.preserveOpacity?this.latestValues.opacity:o.opacityExit:i.opacity=l===this?void 0!==o.opacity?o.opacity:"":void 0!==o.opacityExit?o.opacityExit:0,sx){if(void 0===o[e])continue;let{correct:t,applyTo:n}=sx[e],r="none"===i.transform?o[e]:t(o[e],l);if(n){let e=n.length;for(let t=0;t<e;t++)i[n[t]]=r}else i[e]=r}return this.options.layoutId&&(i.pointerEvents=l===this?sI(null==e?void 0:e.pointerEvents)||"":"none"),i}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(e=>{var t;return null==(t=e.currentAnimation)?void 0:t.stop()}),this.root.nodes.forEach(ae),this.root.sharedNodes.clear()}}}function s3(e){e.updateLayout()}function s6(e){var t;let n=(null==(t=e.resumeFrom)?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){let{layoutBox:t,measuredBox:i}=e.layout,{animationType:r}=e.options,l=n.source!==e.layout.source;"size"===r?o4(e=>{let i=l?n.measuredBox[e]:n.layoutBox[e],r=oB(i);i.min=t[e].min,i.max=i.min+r}):af(r,n.layoutBox,t)&&o4(i=>{let r=l?n.measuredBox[i]:n.layoutBox[i],o=oB(t[i]);r.max=r.min+o,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[i].max=e.relativeTarget[i].min+o)});let o=o1();oz(o,t,n.layoutBox);let s=o1();l?oz(s,e.applyTransform(i,!0),n.measuredBox):oz(s,t,n.layoutBox);let a=!s$(o),u=!1;if(!e.resumeFrom){let i=e.getClosestProjectingParent();if(i&&!i.resumeFrom){let{snapshot:r,layout:l}=i;if(r&&l){let o=o5();oY(o,n.layoutBox,r.layoutBox);let s=o5();oY(s,t,l.layoutBox),sW(o,s)||(u=!0),i.options.layoutRoot&&(e.relativeTarget=s,e.relativeTargetOrigin=o,e.relativeParent=i)}}}e.notifyListeners("didUpdate",{layout:t,snapshot:n,delta:s,layoutDelta:o,hasLayoutChanged:a,hasRelativeTargetChanged:u})}else if(e.isLead()){let{onExitComplete:t}=e.options;t&&t()}e.options.transition=void 0}function s8(e){sZ&&sQ.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function s9(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function s7(e){e.clearSnapshot()}function ae(e){e.clearMeasurements()}function at(e){e.isLayoutDirty=!1}function an(e){let{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function ai(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function ar(e){e.resolveTargetDelta()}function al(e){e.calcProjection()}function ao(e){e.resetSkewAndRotation()}function as(e){e.removeLeadSnapshot()}function aa(e,t,n){e.translate=lH(t.translate,0,n),e.scale=lH(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function au(e,t,n,i){e.min=lH(t.min,n.min,i),e.max=lH(t.max,n.max,i)}function ad(e){return e.animationValues&&void 0!==e.animationValues.opacityExit}let ac={duration:.45,ease:[.4,0,.1,1]},ap=e=>"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),ah=ap("applewebkit/")&&!ap("chrome/")?Math.round:iz;function am(e){e.min=ah(e.min),e.max=ah(e.max)}function af(e,t,n){return"position"===e||"preserve-aspect"===e&&!(.2>=Math.abs(sY(t)-sY(n)))}function ag(e){var t;return e!==e.root&&(null==(t=e.scroll)?void 0:t.wasRoot)}let ay=s4({attachResizeListener:(e,t)=>oM(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),av={current:void 0},ax=s4({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!av.current){let e=new ay({});e.mount(window),e.setOptions({layoutScroll:!0}),av.current=e}return av.current},resetTransform:(e,t)=>{e.style.transform=void 0!==t?t:"none"},checkIsScrollRoot:e=>"fixed"===window.getComputedStyle(e).position});function ab(e,t,n){let{props:i}=e;e.animationState&&i.whileHover&&e.animationState.setActive("whileHover","Start"===n);let r=i["onHover"+n];r&&rf.postRender(()=>r(t,oD(t)))}function aE(e,t,n){let{props:i}=e;e.animationState&&i.whileTap&&e.animationState.setActive("whileTap","Start"===n);let r=i["onTap"+("End"===n?"":n)];r&&rf.postRender(()=>r(t,oD(t)))}let aS=new WeakMap,aw=new WeakMap,aT=e=>{let t=aS.get(e.target);t&&t(e)},aA=e=>{e.forEach(aT)},aC={some:0,all:1},aI=(0,tO.createContext)({strict:!1}),a_=(0,tO.createContext)({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),aO=(0,tO.createContext)({});function aN(e){return iU(e.animate)||i$.some(t=>iF(e[t]))}function aR(e){return!!(aN(e)||e.variants)}function aP(e){return Array.isArray(e)?e.join(" "):e}let ak="undefined"!=typeof window,aM={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},aD={};for(let e in aM)aD[e]={isEnabled:t=>aM[e].some(e=>!!t[e])};let aj=Symbol.for("motionComponentSymbol"),aU=ak?tO.useLayoutEffect:tO.useEffect,aL=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function aV(e){if("string"!=typeof e||e.includes("-"));else if(aL.indexOf(e)>-1||/[A-Z]/u.test(e))return!0;return!1}let aF=e=>(t,n)=>{let i,r=(0,tO.useContext)(aO),l=(0,tO.useContext)(sh),o=()=>(function({scrapeMotionValuesFromProps:e,createRenderState:t,onUpdate:n},i,r,l){let o={latestValues:function(e,t,n,i){let r={},l=i(e,{});for(let e in l)r[e]=sI(l[e]);let{initial:o,animate:s}=e,a=aN(e),u=aR(e);t&&u&&!a&&!1!==e.inherit&&(void 0===o&&(o=t.initial),void 0===s&&(s=t.animate));let d=!!n&&!1===n.initial,c=(d=d||!1===o)?s:o;if(c&&"boolean"!=typeof c&&!iU(c)){let t=Array.isArray(c)?c:[c];for(let n=0;n<t.length;n++){let i=iG(e,t[n]);if(i){let{transitionEnd:e,transition:t,...n}=i;for(let e in n){let t=n[e];if(Array.isArray(t)){let e=d?t.length-1:0;t=t[e]}null!==t&&(r[e]=t)}for(let t in e)r[t]=e[t]}}}return r}(i,r,l,e),renderState:t()};return n&&(o.onMount=e=>n({props:i,current:e,...o}),o.onUpdate=e=>n(e)),o})(e,t,r,l);return n?o():(null===(i=(0,tO.useRef)(null)).current&&(i.current=o()),i.current)},aq=(e,t)=>t&&"number"==typeof e?t.transform(e):e,aG={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},aH=ru.length;function aB(e,t,n){let{style:i,vars:r,transformOrigin:l}=e,o=!1,s=!1;for(let e in t){let n=t[e];if(rd.has(e)){o=!0;continue}if(lN(e)){r[e]=n;continue}{let t=aq(n,lp[e]);e.startsWith("origin")?(s=!0,l[e]=t):i[e]=t}}if(!t.transform&&(o||n?i.transform=function(e,t,n){let i="",r=!0;for(let l=0;l<aH;l++){let o=ru[l],s=e[o];if(void 0===s)continue;let a=!0;if(!(a="number"==typeof s?s===+!!o.startsWith("scale"):0===parseFloat(s))||n){let e=aq(s,lp[o]);if(!a){r=!1;let t=aG[o]||o;i+=`${t}(${e}) `}n&&(t[o]=e)}}return i=i.trim(),n?i=n(t,r?"":i):r&&(i="none"),i}(t,e.transform,n):i.transform&&(i.transform="none")),s){let{originX:e="50%",originY:t="50%",originZ:n=0}=l;i.transformOrigin=`${e} ${t} ${n}`}}let a$={offset:"stroke-dashoffset",array:"stroke-dasharray"},az={offset:"strokeDashoffset",array:"strokeDasharray"};function aJ(e,t,n){return"string"==typeof e?e:r2.transform(t+n*e)}function aW(e,{attrX:t,attrY:n,attrScale:i,originX:r,originY:l,pathLength:o,pathSpacing:s=1,pathOffset:a=0,...u},d,c){let p,h;if(aB(e,u,c),d){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};let{attrs:m,style:f,dimensions:g}=e;m.transform&&(g&&(f.transform=m.transform),delete m.transform),g&&(void 0!==r||void 0!==l||f.transform)&&(p=aJ(void 0!==r?r:.5,g.x,g.width),h=aJ(void 0!==l?l:.5,g.y,g.height),f.transformOrigin=`${p} ${h}`),void 0!==t&&(m.x=t),void 0!==n&&(m.y=n),void 0!==i&&(m.scale=i),void 0!==o&&function(e,t,n=1,i=0,r=!0){e.pathLength=1;let l=r?a$:az;e[l.offset]=r2.transform(-i);let o=r2.transform(t),s=r2.transform(n);e[l.array]=`${o} ${s}`}(m,o,s,a,!1)}let aY=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),aK=()=>({...aY(),attrs:{}}),aX=e=>"string"==typeof e&&"svg"===e.toLowerCase();function aQ(e,{style:t,vars:n},i,r){for(let l in Object.assign(e.style,t,r&&r.getProjectionStyles(i)),n)e.style.setProperty(l,n[l])}let aZ=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function a0(e,t,n,i){for(let n in aQ(e,t,void 0,i),t.attrs)e.setAttribute(aZ.has(n)?n:r_(n),t.attrs[n])}function a1(e,{layout:t,layoutId:n}){return rd.has(e)||e.startsWith("origin")||(t||void 0!==n)&&(!!sx[e]||"opacity"===e)}function a2(e,t,n){var i;let{style:r}=e,l={};for(let o in r)(rC(r[o])||t.style&&rC(t.style[o])||a1(o,e)||(null==(i=null==n?void 0:n.getValue(o))?void 0:i.liveStyle)!==void 0)&&(l[o]=r[o]);return l}function a5(e,t,n){let i=a2(e,t,n);for(let n in e)(rC(e[n])||rC(t[n]))&&(i[-1!==ru.indexOf(n)?"attr"+n.charAt(0).toUpperCase()+n.substring(1):n]=e[n]);return i}let a4=["x","y","width","height","cx","cy","r"],a3={useVisualState:aF({scrapeMotionValuesFromProps:a5,createRenderState:aK,onUpdate:({props:e,prevProps:t,current:n,renderState:i,latestValues:r})=>{if(!n)return;let l=!!e.drag;if(!l){for(let e in r)if(rd.has(e)){l=!0;break}}if(!l)return;let o=!t;if(t)for(let n=0;n<a4.length;n++){let i=a4[n];e[i]!==t[i]&&(o=!0)}o&&rf.read(()=>{try{i.dimensions="function"==typeof n.getBBox?n.getBBox():n.getBoundingClientRect()}catch(e){i.dimensions={x:0,y:0,width:0,height:0}}rf.render(()=>{aW(i,r,aX(n.tagName),e.transformTemplate),a0(n,i)})})}})},a6={useVisualState:aF({scrapeMotionValuesFromProps:a2,createRenderState:aY})};function a8(e,t,n){for(let i in t)rC(t[i])||a1(i,n)||(e[i]=t[i])}let a9=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function a7(e){return e.startsWith("while")||e.startsWith("drag")&&"draggable"!==e||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||a9.has(e)}let ue=e=>!a7(e);try{(x=(()=>{let e=Error("Cannot find module '@emotion/is-prop-valid'");throw e.code="MODULE_NOT_FOUND",e})().default)&&(ue=e=>e.startsWith("on")?!a7(e):x(e))}catch(e){}let ut={current:null},un={current:!1},ui=[...lj,r8,lo],ur=new WeakMap,ul=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class uo{scrapeMotionValuesFromProps(e,t,n){return{}}constructor({parent:e,props:t,presenceContext:n,reducedMotionConfig:i,blockInitialAnimation:r,visualState:l},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=l_,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{let e=rb.now();this.renderScheduledAt<e&&(this.renderScheduledAt=e,rf.render(this.render,!1,!0))};const{latestValues:s,renderState:a,onUpdate:u}=l;this.onUpdate=u,this.latestValues=s,this.baseTarget={...s},this.initialValues=t.initial?{...s}:{},this.renderState=a,this.parent=e,this.props=t,this.presenceContext=n,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=o,this.blockInitialAnimation=!!r,this.isControllingVariants=aN(t),this.isVariantNode=aR(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:d,...c}=this.scrapeMotionValuesFromProps(t,{},this);for(const e in c){const t=c[e];void 0!==s[e]&&rC(t)&&t.set(s[e],!1)}}mount(e){this.current=e,ur.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((e,t)=>this.bindToMotionValue(t,e)),un.current||function(){if(un.current=!0,ak)if(window.matchMedia){let e=window.matchMedia("(prefers-reduced-motion)"),t=()=>ut.current=e.matches;e.addListener(t),t()}else ut.current=!1}(),this.shouldReduceMotion="never"!==this.reducedMotionConfig&&("always"===this.reducedMotionConfig||ut.current),this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){for(let e in ur.delete(this.current),this.projection&&this.projection.unmount(),rg(this.notifyUpdate),rg(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this),this.events)this.events[e].clear();for(let e in this.features){let t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}bindToMotionValue(e,t){let n;this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();let i=rd.has(e),r=t.on("change",t=>{this.latestValues[e]=t,this.props.onUpdate&&rf.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0)}),l=t.on("renderRequest",this.scheduleRender);window.MotionCheckAppearSync&&(n=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{r(),l(),n&&n(),t.owner&&t.stop()})}sortNodePosition(e){return this.current&&this.sortInstanceNodePosition&&this.type===e.type?this.sortInstanceNodePosition(this.current,e.current):0}updateFeatures(){let e="animation";for(e in aD){let t=aD[e];if(!t)continue;let{isEnabled:n,Feature:i}=t;if(!this.features[e]&&i&&n(this.props)&&(this.features[e]=new i(this)),this.features[e]){let t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):o5()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let t=0;t<ul.length;t++){let n=ul[t];this.propEventSubscriptions[n]&&(this.propEventSubscriptions[n](),delete this.propEventSubscriptions[n]);let i=e["on"+n];i&&(this.propEventSubscriptions[n]=this.on(n,i))}this.prevMotionValues=function(e,t,n){for(let i in t){let r=t[i],l=n[i];if(rC(r))e.addValue(i,r);else if(rC(l))e.addValue(i,rA(r,{owner:e}));else if(l!==r)if(e.hasValue(i)){let t=e.getValue(i);!0===t.liveStyle?t.jump(r):t.hasAnimated||t.set(r)}else{let t=e.getStaticValue(i);e.addValue(i,rA(void 0!==t?t:r,{owner:e}))}}for(let i in n)void 0===t[i]&&e.removeValue(i);return t}(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){let t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){let n=this.values.get(e);t!==n&&(n&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);let t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return void 0===n&&void 0!==t&&(n=rA(null===t?void 0:t,{owner:this}),this.addValue(e,n)),n}readValue(e,t){var n;let i=void 0===this.latestValues[e]&&this.current?null!=(n=this.getBaseTargetFromProps(this.props,e))?n:this.readValueFromInstance(this.current,e,this.options):this.latestValues[e];if(null!=i){let n,r;if("string"==typeof i&&(n=i,/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n)||(r=i,/^0[^.\s]+$/u.test(r))))i=parseFloat(i);else{let n;n=i,!ui.find(lD(n))&&lo.test(t)&&(i=lf(e,t))}this.setBaseTarget(e,rC(i)?i.get():i)}return rC(i)?i.get():i}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;let n,{initial:i}=this.props;if("string"==typeof i||"object"==typeof i){let r=iG(this.props,i,null==(t=this.presenceContext)?void 0:t.custom);r&&(n=r[e])}if(i&&void 0!==n)return n;let r=this.getBaseTargetFromProps(this.props,e);return void 0===r||rC(r)?void 0!==this.initialValues[e]&&void 0===n?void 0:this.baseTarget[e]:r}on(e,t){return this.events[e]||(this.events[e]=new rw),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class us extends uo{constructor(){super(...arguments),this.KeyframeResolver=lL}sortInstanceNodePosition(e,t){return 2&e.compareDocumentPosition(t)?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:n}){delete t[e],delete n[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);let{children:e}=this.props;rC(e)&&(this.childSubscription=e.on("change",e=>{this.current&&(this.current.textContent=`${e}`)}))}}class ua extends us{constructor(){super(...arguments),this.type="html",this.renderInstance=aQ}readValueFromInstance(e,t){if(rd.has(t)){let e=lm(t);return e&&e.default||0}{let n=window.getComputedStyle(e),i=(lN(t)?n.getPropertyValue(t):n[t])||0;return"string"==typeof i?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:t}){return so(e,t)}build(e,t,n){aB(e,t,n.transformTemplate)}scrapeMotionValuesFromProps(e,t,n){return a2(e,t,n)}}class uu extends us{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=o5}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(rd.has(t)){let e=lm(t);return e&&e.default||0}return t=aZ.has(t)?t:r_(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,n){return a5(e,t,n)}build(e,t,n){aW(e,t,this.isSVGTag,n.transformTemplate)}renderInstance(e,t,n,i){a0(e,t,n,i)}mount(e){this.isSVGTag=aX(e.tagName),super.mount(e)}}let ud=function(e){if("undefined"==typeof Proxy)return e;let t=new Map;return new Proxy((...t)=>e(...t),{get:(n,i)=>"create"===i?e:(t.has(i)||t.set(i,e(i)),t.get(i))})}((b={animation:{Feature:class extends oP{constructor(e){super(e),e.animationState||(e.animationState=function(e){let t=t=>Promise.all(t.map(({animation:t,options:n})=>(function(e,t,n={}){let i;if(e.notify("AnimationStart",t),Array.isArray(t))i=Promise.all(t.map(t=>oA(e,t,n)));else if("string"==typeof t)i=oA(e,t,n);else{let r="function"==typeof t?iH(e,t,n.custom):t;i=Promise.all(oT(e,r,n))}return i.then(()=>{e.notify("AnimationComplete",t)})})(e,t,n))),n=oR(),i=!0,r=t=>(n,i)=>{var r;let l=iH(e,i,"exit"===t?null==(r=e.presenceContext)?void 0:r.custom:void 0);if(l){let{transition:e,transitionEnd:t,...i}=l;n={...n,...i,...t}}return n};function l(l){let{props:o}=e,s=function e(t){if(!t)return;if(!t.isControllingVariants){let n=t.parent&&e(t.parent)||{};return void 0!==t.props.initial&&(n.initial=t.props.initial),n}let n={};for(let e=0;e<oI;e++){let i=i$[e],r=t.props[i];(iF(r)||!1===r)&&(n[i]=r)}return n}(e.parent)||{},a=[],u=new Set,d={},c=1/0;for(let t=0;t<oO;t++){var p,h;let m=o_[t],f=n[m],g=void 0!==o[m]?o[m]:s[m],y=iF(g),v=m===l?f.isActive:null;!1===v&&(c=t);let x=g===s[m]&&g!==o[m]&&y;if(x&&i&&e.manuallyAnimateOnMount&&(x=!1),f.protectedKeys={...d},!f.isActive&&null===v||!g&&!f.prevProp||iU(g)||"boolean"==typeof g)continue;let b=(p=f.prevProp,"string"==typeof(h=g)?h!==p:!!Array.isArray(h)&&!iV(h,p)),E=b||m===l&&f.isActive&&!x&&y||t>c&&y,S=!1,w=Array.isArray(g)?g:[g],T=w.reduce(r(m),{});!1===v&&(T={});let{prevResolvedValues:A={}}=f,C={...A,...T},I=t=>{E=!0,u.has(t)&&(S=!0,u.delete(t)),f.needsAnimating[t]=!0;let n=e.getValue(t);n&&(n.liveStyle=!1)};for(let e in C){let t=T[e],n=A[e];if(!d.hasOwnProperty(e))(iL(t)&&iL(n)?iV(t,n):t===n)?void 0!==t&&u.has(e)?I(e):f.protectedKeys[e]=!0:null!=t?I(e):u.add(e)}f.prevProp=g,f.prevResolvedValues=T,f.isActive&&(d={...d,...T}),i&&e.blockInitialAnimation&&(E=!1);let _=!(x&&b)||S;E&&_&&a.push(...w.map(e=>({animation:e,options:{type:m}})))}if(u.size){let t={};u.forEach(n=>{let i=e.getBaseTarget(n),r=e.getValue(n);r&&(r.liveStyle=!0),t[n]=null!=i?i:null}),a.push({animation:t})}let m=!!a.length;return i&&(!1===o.initial||o.initial===o.animate)&&!e.manuallyAnimateOnMount&&(m=!1),i=!1,m?t(a):Promise.resolve()}return{animateChanges:l,setActive:function(t,i){var r;if(n[t].isActive===i)return Promise.resolve();null==(r=e.variantChildren)||r.forEach(e=>{var n;return null==(n=e.animationState)?void 0:n.setActive(t,i)}),n[t].isActive=i;let o=l(t);for(let e in n)n[e].protectedKeys={};return o},setAnimateFunction:function(n){t=n(e)},getState:()=>n,reset:()=>{n=oR(),i=!0}}}(e))}updateAnimationControlsSubscription(){let{animate:e}=this.node.getProps();iU(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){let{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),null==(e=this.unmountControls)||e.call(this)}}},exit:{Feature:class extends oP{constructor(){super(...arguments),this.id=ok++}update(){if(!this.node.presenceContext)return;let{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===n)return;let i=this.node.animationState.setActive("exit",!e);t&&!e&&i.then(()=>t(this.id))}mount(){let{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}},inView:{Feature:class extends oP{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){var e;let t;this.unmount();let{viewport:n={}}=this.node.getProps(),{root:i,margin:r,amount:l="some",once:o}=n,s={root:i?i.current:void 0,rootMargin:r,threshold:"number"==typeof l?l:aC[l]},a=e=>{let{isIntersecting:t}=e;if(this.isInView===t||(this.isInView=t,o&&!t&&this.hasEnteredView))return;t&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",t);let{onViewportEnter:n,onViewportLeave:i}=this.node.getProps(),r=t?n:i;r&&r(e)};return e=this.node.current,t=function({root:e,...t}){let n=e||document;aw.has(n)||aw.set(n,{});let i=aw.get(n),r=JSON.stringify(t);return i[r]||(i[r]=new IntersectionObserver(aA,{root:e,...t})),i[r]}(s),aS.set(e,a),t.observe(e),()=>{aS.delete(e),t.unobserve(e)}}mount(){this.startObserver()}update(){if("undefined"==typeof IntersectionObserver)return;let{props:e,prevProps:t}=this.node;["amount","margin","root"].some(function({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}(e,t))&&this.startObserver()}unmount(){}}},tap:{Feature:class extends oP{mount(){let{current:e}=this.node;e&&(this.unmount=function(e,t,n={}){let[i,r,l]=re(e,n),o=e=>{let i=e.currentTarget;if(!ra(e)||rl.has(i))return;rl.add(i);let l=t(e),o=(e,t)=>{window.removeEventListener("pointerup",s),window.removeEventListener("pointercancel",a),ra(e)&&rl.has(i)&&(rl.delete(i),"function"==typeof l&&l(e,{success:t}))},s=e=>{o(e,n.useGlobalTarget||rn(i,e.target))},a=e=>{o(e,!1)};window.addEventListener("pointerup",s,r),window.addEventListener("pointercancel",a,r)};return i.forEach(e=>{rr.has(e.tagName)||-1!==e.tabIndex||null!==e.getAttribute("tabindex")||(e.tabIndex=0),(n.useGlobalTarget?window:e).addEventListener("pointerdown",o,r),e.addEventListener("focus",e=>((e,t)=>{let n=e.currentTarget;if(!n)return;let i=ro(()=>{if(rl.has(n))return;rs(n,"down");let e=ro(()=>{rs(n,"up")});n.addEventListener("keyup",e,t),n.addEventListener("blur",()=>rs(n,"cancel"),t)});n.addEventListener("keydown",i,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",i),t)})(e,r),r)}),l}(e,e=>(aE(this.node,e,"Start"),(e,{success:t})=>aE(this.node,e,t?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}},focus:{Feature:class extends oP{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch(t){e=!0}e&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){this.isActive&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=lX(oM(this.node.current,"focus",()=>this.onFocus()),oM(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}},hover:{Feature:class extends oP{mount(){let{current:e}=this.node;e&&(this.unmount=function(e,t,n={}){let[i,r,l]=re(e,n),o=rt(e=>{let{target:n}=e,i=t(e);if("function"!=typeof i||!n)return;let l=rt(e=>{i(e),n.removeEventListener("pointerleave",l)});n.addEventListener("pointerleave",l,r)});return i.forEach(e=>{e.addEventListener("pointerenter",o,r)}),l}(e,e=>(ab(this.node,e,"Start"),e=>ab(this.node,e,"End"))))}unmount(){}}},pan:{Feature:class extends oP{constructor(){super(...arguments),this.removePointerDownListener=iz}onPointerDown(e){this.session=new oL(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:ss(this.node)})}createPanHandlers(){let{onPanSessionStart:e,onPanStart:t,onPan:n,onPanEnd:i}=this.node.getProps();return{onSessionStart:sc(e),onStart:sc(t),onMove:n,onEnd:(e,t)=>{delete this.session,i&&rf.postRender(()=>i(e,t))}}}mount(){this.removePointerDownListener=oj(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}},drag:{Feature:class extends oP{constructor(e){super(e),this.removeGroupControls=iz,this.removeListeners=iz,this.controls=new su(e)}mount(){let{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||iz}unmount(){this.removeGroupControls(),this.removeListeners()}},ProjectionNode:ax,MeasureLayout:sw},layout:{ProjectionNode:ax,MeasureLayout:sw}},E=(e,t)=>aV(e)?new uu(t):new ua(t,{allowProjection:e!==tO.Fragment}),function(e,{forwardMotionProps:t}={forwardMotionProps:!1}){return function({preloadedFeatures:e,createVisualElement:t,useRender:n,useVisualState:i,Component:r}){var l,o;function s(e,l){var o;let s,a={...(0,tO.useContext)(a_),...e,layoutId:function({layoutId:e}){let t=(0,tO.useContext)(sm).id;return t&&void 0!==e?t+"-"+e:e}(e)},{isStatic:u}=a,d=function(e){let{initial:t,animate:n}=function(e,t){if(aN(e)){let{initial:t,animate:n}=e;return{initial:!1===t||iF(t)?t:void 0,animate:iF(n)?n:void 0}}return!1!==e.inherit?t:{}}(e,(0,tO.useContext)(aO));return(0,tO.useMemo)(()=>({initial:t,animate:n}),[aP(t),aP(n)])}(e),c=i(e,u);if(!u&&ak){(0,tO.useContext)(aI).strict;let e=function(e){let{drag:t,layout:n}=aD;if(!t&&!n)return{};let i={...t,...n};return{MeasureLayout:(null==t?void 0:t.isEnabled(e))||(null==n?void 0:n.isEnabled(e))?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}(a);s=e.MeasureLayout,d.visualElement=function(e,t,n,i,r){var l,o;let{visualElement:s}=(0,tO.useContext)(aO),a=(0,tO.useContext)(aI),u=(0,tO.useContext)(sh),d=(0,tO.useContext)(a_).reducedMotion,c=(0,tO.useRef)(null);i=i||a.renderer,!c.current&&i&&(c.current=i(e,{visualState:t,parent:s,props:n,presenceContext:u,blockInitialAnimation:!!u&&!1===u.initial,reducedMotionConfig:d}));let p=c.current,h=(0,tO.useContext)(sf);p&&!p.projection&&r&&("html"===p.type||"svg"===p.type)&&function(e,t,n,i){let{layoutId:r,layout:l,drag:o,dragConstraints:s,layoutScroll:a,layoutRoot:u}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:function e(t){if(t)return!1!==t.options.allowProjection?t.projection:e(t.parent)}(e.parent)),e.projection.setOptions({layoutId:r,layout:l,alwaysMeasureLayout:!!o||s&&oH(s),visualElement:e,animationType:"string"==typeof l?l:"both",initialPromotionConfig:i,layoutScroll:a,layoutRoot:u})}(c.current,n,r,h);let m=(0,tO.useRef)(!1);(0,tO.useInsertionEffect)(()=>{p&&m.current&&p.update(n,u)});let f=n[rO],g=(0,tO.useRef)(!!f&&!(null==(l=window.MotionHandoffIsComplete)?void 0:l.call(window,f))&&(null==(o=window.MotionHasOptimisedAnimation)?void 0:o.call(window,f)));return aU(()=>{p&&(m.current=!0,window.MotionIsMounted=!0,p.updateFeatures(),sb.render(p.render),g.current&&p.animationState&&p.animationState.animateChanges())}),(0,tO.useEffect)(()=>{p&&(!g.current&&p.animationState&&p.animationState.animateChanges(),g.current&&(queueMicrotask(()=>{var e;null==(e=window.MotionHandoffMarkAsComplete)||e.call(window,f)}),g.current=!1))}),p}(r,c,a,t,e.ProjectionNode)}return(0,t_.jsxs)(aO.Provider,{value:d,children:[s&&d.visualElement?(0,t_.jsx)(s,{visualElement:d.visualElement,...a}):null,n(r,e,(o=d.visualElement,(0,tO.useCallback)(e=>{e&&c.onMount&&c.onMount(e),o&&(e?o.mount(e):o.unmount()),l&&("function"==typeof l?l(e):oH(l)&&(l.current=e))},[o])),c,u,d.visualElement)]})}e&&function(e){for(let t in e)aD[t]={...aD[t],...e[t]}}(e),s.displayName=`motion.${"string"==typeof r?r:`create(${null!=(o=null!=(l=r.displayName)?l:r.name)?o:""})`}`;let a=(0,tO.forwardRef)(s);return a[aj]=r,a}({...aV(e)?a3:a6,preloadedFeatures:b,useRender:function(e=!1){return(t,n,i,{latestValues:r},l)=>{let o=(aV(t)?function(e,t,n,i){let r=(0,tO.useMemo)(()=>{let n=aK();return aW(n,t,aX(i),e.transformTemplate),{...n.attrs,style:{...n.style}}},[t]);if(e.style){let t={};a8(t,e.style,e),r.style={...t,...r.style}}return r}:function(e,t){let n,i,r={},l=(n=e.style||{},a8(i={},n,e),Object.assign(i,function({transformTemplate:e},t){return(0,tO.useMemo)(()=>{let n=aY();return aB(n,t,e),Object.assign({},n.vars,n.style)},[t])}(e,t)),i);return e.drag&&!1!==e.dragListener&&(r.draggable=!1,l.userSelect=l.WebkitUserSelect=l.WebkitTouchCallout="none",l.touchAction=!0===e.drag?"none":`pan-${"x"===e.drag?"y":"x"}`),void 0===e.tabIndex&&(e.onTap||e.onTapStart||e.whileTap)&&(r.tabIndex=0),r.style=l,r})(n,r,l,t),s=function(e,t,n){let i={};for(let r in e)("values"!==r||"object"!=typeof e.values)&&(ue(r)||!0===n&&a7(r)||!t&&!a7(r)||e.draggable&&r.startsWith("onDrag"))&&(i[r]=e[r]);return i}(n,"string"==typeof t,e),a=t!==tO.Fragment?{...s,...o,ref:i}:{},{children:u}=n,d=(0,tO.useMemo)(()=>rC(u)?u.get():u,[u]);return(0,tO.createElement)(t,{...a,children:d})}}(t),createVisualElement:E,Component:e})})),uc=({children:e,className:t="",title:n,icon:i,glowColor:r="rgba(115, 42, 223, 0.5)",colSpan:l="col-span-1",rowSpan:o="row-span-1",...s})=>(0,t_.jsxs)(ud.div,{className:`
        relative group overflow-hidden rounded-3xl 
        bg-nexus-glass border border-nexus-glassBorder 
        backdrop-blur-xl transition-all duration-300 ease-out
        hover:scale-[1.01] hover:shadow-2xl hover:border-nexus-purple/30
        flex flex-col
        ${l} ${o} ${t}
      `,style:{boxShadow:"0 0 0 1px inset rgba(255,255,255,0.05)"},...s,children:[(0,t_.jsx)("div",{className:"absolute -top-20 -right-20 w-64 h-64 rounded-full blur-[80px] opacity-20 group-hover:opacity-40 transition-opacity duration-500 pointer-events-none",style:{background:r}}),(n||i)&&(0,t_.jsxs)("div",{className:"flex items-center gap-3 p-5 pb-2 z-10",children:[i&&(0,t_.jsx)("div",{className:"text-nexus-teal",children:i}),n&&(0,t_.jsx)("h3",{className:"text-lg font-semibold tracking-wide text-white/90 font-sans",children:n})]}),(0,t_.jsx)("div",{className:"flex-1 p-5 z-10 overflow-hidden relative",children:e}),(0,t_.jsx)("div",{className:"absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-700 pointer-events-none bg-gradient-to-tr from-transparent via-white/5 to-transparent"})]}),up=tM("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),uh=tM("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),um=tM("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),uf=tM("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]),ug=({searchQuery:e=""})=>{let[t,n]=(0,tO.useState)(new Date),[i,r]=(0,tO.useState)(new Date),[l,o]=(0,tO.useState)([{id:"1",title:"Web Dev Lecture",startTime:new Date,endTime:new Date(new Date().setHours(new Date().getHours()+2)),type:"lecture"},{id:"2",title:"Team Meeting",startTime:new Date(new Date().setDate(new Date().getDate()+1)),endTime:new Date(new Date().setDate(new Date().getDate()+1)),type:"meeting"},{id:"3",title:"Project Deadline",startTime:new Date(new Date().getFullYear(),11,25),endTime:new Date(new Date().getFullYear(),11,25),type:"personal"}]),[s,a]=(0,tO.useState)(!1),[u,d]=(0,tO.useState)(""),[c,p]=(0,tO.useState)("personal"),h=e=>{n(new Date(t.getFullYear(),t.getMonth()+e,1))},m=e=>{n(new Date(t.getFullYear()+e,t.getMonth(),1))},f=(e,t)=>e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate(),g=()=>{if(!u.trim())return;let e=new Date(i);e.setHours(9,0,0);let t=new Date(i);t.setHours(10,0,0),o([...l,{id:Date.now().toString(),title:u,startTime:e,endTime:t,type:c}]),d(""),a(!1)},y=l.filter(t=>f(new Date(t.startTime),i)&&(!e||t.title.toLowerCase().includes(e.toLowerCase()))),v=new Date(t.getFullYear(),t.getMonth()+1,0).getDate(),x=[...Array(new Date(t.getFullYear(),t.getMonth(),1).getDay()).fill(null),...Array.from({length:v},(e,t)=>t+1)];return(0,t_.jsxs)("div",{className:"flex flex-col h-full overflow-hidden",children:[(0,t_.jsxs)("div",{className:"flex flex-col gap-2 mb-4 shrink-0",children:[(0,t_.jsxs)("div",{className:"flex items-center justify-between bg-white/5 rounded-xl p-2 border border-white/5",children:[(0,t_.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t_.jsx)("button",{onClick:()=>h(-1),className:"p-1 hover:bg-white/10 rounded-lg text-gray-400 hover:text-white transition-colors",children:(0,t_.jsx)(up,{size:16})}),(0,t_.jsx)("span",{className:"text-sm font-bold w-24 text-center text-white select-none",children:["January","February","March","April","May","June","July","August","September","October","November","December"][t.getMonth()]}),(0,t_.jsx)("button",{onClick:()=>h(1),className:"p-1 hover:bg-white/10 rounded-lg text-gray-400 hover:text-white transition-colors",children:(0,t_.jsx)(uh,{size:16})})]}),(0,t_.jsx)("div",{className:"h-4 w-px bg-white/10"}),(0,t_.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t_.jsx)("button",{onClick:()=>m(-1),className:"p-1 hover:bg-white/10 rounded-lg text-gray-400 hover:text-white transition-colors",children:(0,t_.jsx)(up,{size:16})}),(0,t_.jsx)("span",{className:"text-sm font-mono font-bold text-nexus-teal w-12 text-center select-none",children:t.getFullYear()}),(0,t_.jsx)("button",{onClick:()=>m(1),className:"p-1 hover:bg-white/10 rounded-lg text-gray-400 hover:text-white transition-colors",children:(0,t_.jsx)(uh,{size:16})})]})]}),(0,t_.jsx)("div",{className:"grid grid-cols-7 gap-1 text-center mt-2",children:["Su","Mo","Tu","We","Th","Fr","Sa"].map(e=>(0,t_.jsx)("div",{className:"text-[10px] text-gray-500 font-bold uppercase tracking-wider",children:e},e))})]}),(0,t_.jsx)("div",{className:"grid grid-cols-7 gap-1 mb-6 shrink-0",children:x.map((e,n)=>{if(!e)return(0,t_.jsx)("div",{className:"h-8"},`blank-${n}`);let o=new Date(t.getFullYear(),t.getMonth(),e),s=f(o,new Date),u=f(o,i),d=l.some(e=>f(new Date(e.startTime),o));return(0,t_.jsxs)("div",{onClick:()=>{r(new Date(t.getFullYear(),t.getMonth(),e)),a(!1)},className:`
                        h-8 flex flex-col items-center justify-center rounded-lg cursor-pointer transition-all relative group
                        ${u?"bg-nexus-purple text-white shadow-[0_0_10px_rgba(115,42,223,0.4)] scale-105 z-10 font-bold":s?"bg-nexus-teal/20 text-nexus-teal border border-nexus-teal/50":"text-gray-400 hover:bg-white/10 hover:text-white"}
                    `,children:[(0,t_.jsx)("span",{className:"text-xs",children:e}),d&&!u&&(0,t_.jsx)("div",{className:"absolute bottom-1 w-1 h-1 rounded-full bg-nexus-teal"})]},e)})}),(0,t_.jsx)("div",{className:"h-px w-full bg-white/10 mb-4 shrink-0"}),(0,t_.jsxs)("div",{className:"flex items-center justify-between mb-3 shrink-0",children:[(0,t_.jsxs)("h4",{className:"text-xs uppercase tracking-widest text-gray-500 font-bold flex items-center gap-2",children:[(0,t_.jsx)(tD,{size:12}),i.toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})]}),!s&&(0,t_.jsxs)("button",{onClick:()=>a(!0),className:"text-[10px] bg-nexus-teal/10 text-nexus-teal hover:bg-nexus-teal hover:text-black px-2 py-1 rounded-md transition-all font-bold flex items-center gap-1",children:[(0,t_.jsx)(tz,{size:10})," Add"]})]}),(0,t_.jsxs)("div",{className:"flex-1 overflow-y-auto pr-1 custom-scrollbar",children:[s&&(0,t_.jsxs)("div",{className:"bg-white/5 rounded-xl p-3 mb-3 border border-nexus-teal/30 animate-fade-in",children:[(0,t_.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,t_.jsx)("span",{className:"text-[10px] text-nexus-teal font-bold uppercase",children:"New Entry"}),(0,t_.jsx)("button",{onClick:()=>a(!1),className:"text-gray-500 hover:text-white",children:(0,t_.jsx)(tG,{size:12})})]}),(0,t_.jsx)("input",{type:"text",value:u,onChange:e=>d(e.target.value),placeholder:"Event title...",className:"w-full bg-black/20 border border-white/10 rounded-lg px-2 py-1.5 text-sm text-white focus:border-nexus-teal outline-none mb-2",autoFocus:!0,onKeyDown:e=>"Enter"===e.key&&g()}),(0,t_.jsx)("div",{className:"flex gap-2 mb-2",children:["lecture","meeting","personal"].map(e=>(0,t_.jsx)("button",{onClick:()=>p(e),className:`px-2 py-1 rounded text-[9px] uppercase font-bold border ${c===e?"bg-nexus-purple text-white border-nexus-purple":"bg-transparent text-gray-500 border-white/10"}`,children:e},e))}),(0,t_.jsx)("button",{onClick:g,className:"w-full bg-nexus-teal text-nexus-deep text-xs font-bold py-1.5 rounded-lg hover:bg-white transition-colors",children:"Confirm Schedule"})]}),y.length>0?(0,t_.jsx)("div",{className:"space-y-2",children:y.map(e=>(0,t_.jsxs)("div",{className:"relative pl-4 border-l-2 border-nexus-teal/30 hover:border-nexus-teal transition-all group bg-white/5 hover:bg-white/10 rounded-r-lg p-2",children:[(0,t_.jsx)("div",{className:"absolute -left-[5px] top-2 w-2 h-2 rounded-full bg-nexus-teal shadow-[0_0_8px_#65BBBD] group-hover:scale-125 transition-transform"}),(0,t_.jsxs)("div",{className:"flex justify-between items-start",children:[(0,t_.jsxs)("div",{children:[(0,t_.jsx)("h5",{className:"text-sm font-semibold text-gray-200 group-hover:text-white transition-colors",children:e.title}),(0,t_.jsxs)("div",{className:"flex items-center gap-3 mt-1",children:[(0,t_.jsxs)("span",{className:"text-[10px] text-nexus-purple font-mono flex items-center gap-1",children:[(0,t_.jsx)(um,{size:10}),e.startTime.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}),(0,t_.jsx)("span",{className:"text-[9px] uppercase font-bold tracking-wider text-gray-500 border border-white/10 px-1.5 rounded",children:e.type})]})]}),(0,t_.jsx)("button",{onClick:t=>{var n;return n=e.id,void(t.stopPropagation(),o(l.filter(e=>e.id!==n)))},className:"opacity-0 group-hover:opacity-100 p-1.5 text-gray-500 hover:text-red-400 hover:bg-red-500/10 rounded transition-all",children:(0,t_.jsx)(uf,{size:12})})]})]},e.id))}):!s&&(0,t_.jsxs)("div",{className:"h-32 flex flex-col items-center justify-center text-gray-600 border border-dashed border-white/10 rounded-xl",children:[(0,t_.jsx)(tD,{size:24,className:"mb-2 opacity-50"}),(0,t_.jsx)("span",{className:"text-xs italic",children:"No timeline entries."}),(0,t_.jsx)("button",{onClick:()=>a(!0),className:"mt-2 text-[10px] text-nexus-teal hover:underline",children:"Create Event"})]})]})]})},uy=tM("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),uv=tM("circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),ux=tM("bell-ring",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M22 8c0-2.3-.8-4.3-2-6",key:"5bb3ad"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}],["path",{d:"M4 2C2.8 3.7 2 5.7 2 8",key:"tap9e0"}]]),ub=tM("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),uE=tM("calendar-clock",[["path",{d:"M16 14v2.2l1.6 1",key:"fo4ql5"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5",key:"1osxxc"}],["path",{d:"M3 10h5",key:"r794hk"}],["path",{d:"M8 2v4",key:"1cmpym"}],["circle",{cx:"16",cy:"16",r:"6",key:"qoo3c4"}]]),uS=tM("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),uw=tM("flame",[["path",{d:"M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4",key:"1slcih"}]]),uT=tM("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]),uA=tM("arrow-down",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]),uC=tM("minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]),uI=tM("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]),u_=tM("arrow-up-narrow-wide",[["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}],["path",{d:"M11 12h4",key:"q8tih4"}],["path",{d:"M11 16h7",key:"uosisv"}],["path",{d:"M11 20h10",key:"jvxblo"}]]),uO=tM("arrow-down-narrow-wide",[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"M11 4h4",key:"6d7r33"}],["path",{d:"M11 8h7",key:"djye34"}],["path",{d:"M11 12h10",key:"1438ji"}]]),uN=tM("tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]),uR=tM("bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]),uP=tM("alarm-clock",[["circle",{cx:"12",cy:"13",r:"8",key:"3y4lt7"}],["path",{d:"M12 9v4l2 2",key:"1c63tq"}],["path",{d:"M5 3 2 6",key:"18tl5t"}],["path",{d:"m22 6-3-3",key:"1opdir"}],["path",{d:"M6.38 18.7 4 21",key:"17xu3x"}],["path",{d:"M17.64 18.67 20 21",key:"kv2oe2"}]]),uk=tM("text-align-start",[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 19H3",key:"z6ezky"}]]),uM=({searchQuery:e="",widgetSize:t})=>{let[n,i]=(0,tO.useState)([{id:"1",title:"Complete Project Report",description:"Finalize the executive summary, check formatted tables, and export to PDF for submission.",deadline:new Date(Date.now()+864e5),completed:!1,priority:"high",tags:["uni"]},{id:"2",title:"Review Calculus III",description:"Focus on partial derivatives and multiple integrals. Chapter 4 & 5 practice problems.",deadline:new Date(Date.now()-864e5),completed:!1,priority:"medium",tags:["study"]},{id:"3",title:"Buy Groceries",description:"Milk, Eggs, Bread, Coffee beans.",deadline:new Date(Date.now()+1728e5),completed:!0,priority:"low",tags:["personal"]},{id:"4",title:"System Backup",description:"Run full incremental backup to NAS.",deadline:new Date(Date.now()+432e6),completed:!1,priority:"low",tags:["tech"]}]),[r,l]=(0,tO.useState)(""),[o,s]=(0,tO.useState)(""),[a,u]=(0,tO.useState)("medium"),[d,c]=(0,tO.useState)(""),[p,h]=(0,tO.useState)(""),[m,f]=(0,tO.useState)(!1),[g,y]=(0,tO.useState)("active"),[v,x]=(0,tO.useState)("all"),[b,E]=(0,tO.useState)("none"),[S,w]=(0,tO.useState)("asc"),[T,A]=(0,tO.useState)(!1),[C,I]=(0,tO.useState)(null),_=t&&1===t.rows,O=t&&1===t.cols;(0,tO.useEffect)(()=>{"Notification"in window&&"default"===Notification.permission&&Notification.requestPermission()},[]),(0,tO.useEffect)(()=>{let e=setInterval(()=>{let e=new Date;i(t=>{let n=!1,i=t.map(t=>t.reminderTime&&!t.reminderSent&&new Date(t.reminderTime)<=e?("Notification"in window&&"granted"===Notification.permission?new Notification(` Nexus Reminder: ${t.title}`,{body:`Priority: ${t.priority.toUpperCase()} | Due: ${t.deadline.toLocaleDateString()}`,icon:"/favicon.ico",requireInteraction:!0}):console.log("Reminder triggered:",t.title),n=!0,{...t,reminderSent:!0}):t);return n?i:t})},5e3);return()=>clearInterval(e)},[]),(0,tO.useEffect)(()=>{C&&!n.find(e=>e.id===C)&&I(null)},[n,C]);let N=e=>{i(n.map(t=>t.id===e?{...t,completed:!t.completed}:t))},R=()=>{let e;if(!r.trim())return;if(o){let[t,n,i]=o.split("-").map(Number);e=new Date(t,n-1,i,23,59,59)}else(e=new Date).setDate(e.getDate()+1),e.setHours(23,59,59);let t=r,m=[],g=r.match(/#(\w+)/g);g&&(g.forEach(e=>m.push(e.substring(1))),t=r.replace(/#(\w+)/g,"").trim()),d.trim()&&m.push(d.trim()),i([{id:Date.now().toString(),title:t,description:"",deadline:e,completed:!1,priority:a,tags:m,reminderTime:p?new Date(p):void 0,reminderSent:!1},...n]),l(""),s(""),u("medium"),c(""),h(""),f(!1)},P=(0,tO.useMemo)(()=>n.find(e=>e.id===C),[n,C]),k=(0,tO.useMemo)(()=>{let e=new Set;return n.forEach(t=>t.tags.forEach(t=>e.add(t))),Array.from(e)},[n]),M=(0,tO.useMemo)(()=>{let t=[...n];if(e){let n=e.toLowerCase();t=t.filter(e=>e.title.toLowerCase().includes(n)||e.description&&e.description.toLowerCase().includes(n)||e.tags.some(e=>e.toLowerCase().includes(n)))}return"active"===g?t=t.filter(e=>!e.completed):"completed"===g&&(t=t.filter(e=>e.completed)),"all"!==v&&(t=t.filter(e=>e.tags.includes(v))),"none"!==b&&t.sort((e,t)=>{let n=0;if("deadline"===b)n=e.deadline.getTime()-t.deadline.getTime();else if("priority"===b){let i={high:3,medium:2,low:1};n=i[e.priority]-i[t.priority]}return"asc"===S?n:-n}),t},[n,e,g,v,b,S]),D=e=>{b===e?"asc"===S?w("desc"):E("none"):(E(e),w("asc"))},j=e=>{switch(e){case"high":return(0,t_.jsx)(uw,{size:10});case"medium":default:return(0,t_.jsx)(uC,{size:10});case"low":return(0,t_.jsx)(uA,{size:10})}},U=e=>{switch(e){case"high":return"text-amber-400 bg-amber-400/10 border-amber-400/20";case"medium":return"text-nexus-teal bg-nexus-teal/10 border-nexus-teal/20";case"low":return"text-green-400 bg-green-400/10 border-green-400/20";default:return"text-gray-400"}},L=e=>{let t=!e.completed&&new Date>e.deadline,n="high"===e.priority,i=!!e.reminderTime,r="hover:bg-white/5 border-l-2 border-transparent hover:border-nexus-purple/50 transition-all duration-300 ease-out",l="text-white transition-all duration-300",o=(0,t_.jsx)(uv,{size:18,className:"text-gray-500 group-hover:text-nexus-purple transition-colors duration-300"}),s="scale-100 transition-transform duration-300";return e.completed?(l="text-green-400 decoration-slate-500 line-through opacity-60",o=(0,t_.jsx)(uy,{size:18,className:"text-nexus-teal"}),r="bg-green-500/5 border-l-2 border-green-500/30 opacity-70 hover:opacity-100 transition-all duration-300",s="scale-110"):t?(r="bg-gradient-to-r from-red-900/20 to-transparent border-l-2 border-red-500 transition-all duration-300",l="text-red-200",o=(0,t_.jsx)(uS,{size:18,className:"text-red-500 animate-pulse"})):n&&(r="bg-gradient-to-r from-amber-500/10 to-transparent border-l-2 border-amber-500 transition-all duration-300",l="text-amber-100",o=(0,t_.jsx)(uT,{size:18,className:"text-amber-400 fill-amber-400/20"})),(0,t_.jsxs)("div",{className:`group flex items-center gap-3 rounded-r-lg cursor-pointer ${r} ${_?"p-1.5":"p-3"}`,onClick:()=>I(e.id),children:[(0,t_.jsx)("div",{className:`${s} hover:opacity-80`,onClick:t=>{t.stopPropagation(),N(e.id)},children:o}),(0,t_.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t_.jsxs)("div",{className:"flex justify-between items-center gap-2",children:[(0,t_.jsx)("p",{className:`text-sm font-medium truncate ${l}`,children:e.title}),(0,t_.jsxs)("div",{className:"flex gap-1 shrink-0 items-center",children:[!O&&e.tags.map(e=>(0,t_.jsxs)("span",{className:"hidden sm:inline-block px-1 py-0.5 rounded bg-white/5 text-[8px] text-gray-400 border border-white/5",children:["#",e]},e)),t&&(0,t_.jsxs)(t_.Fragment,{children:[(0,t_.jsx)("button",{onClick:t=>{t.stopPropagation(),alert(`Manual Reminder: "${e.title}" is currently due!`)},className:"p-1 hover:bg-red-500/20 text-red-400 rounded-full transition-colors hidden group-hover:block",title:"Trigger Notification",children:(0,t_.jsx)(ux,{size:12,className:"animate-pulse"})}),(0,t_.jsxs)("span",{className:"flex items-center gap-1 text-[9px] text-red-200 bg-red-900/60 px-2 py-0.5 rounded-full border border-red-500/30 uppercase tracking-wider font-bold shadow-[0_0_10px_rgba(220,38,38,0.2)]",children:[(0,t_.jsx)(ub,{size:10})," Late"]})]}),i&&!e.completed&&(0,t_.jsxs)("span",{className:`flex items-center gap-1 text-[9px] px-1.5 py-0.5 rounded border border-nexus-teal/30 uppercase tracking-wider font-bold ${e.reminderSent?"text-gray-500 bg-gray-800/50":"text-nexus-teal bg-nexus-teal/10"}`,title:`Reminder set for: ${e.reminderTime?.toLocaleString()}`,children:[(0,t_.jsx)(uP,{size:10}),!O&&(e.reminderSent?"Sent":"Set")]})]})]}),(0,t_.jsxs)("p",{className:"text-[10px] text-gray-500 font-mono flex items-center gap-2 mt-0.5",children:[(0,t_.jsxs)("span",{className:`flex items-center gap-1 ${t?"text-red-300":""}`,children:[(0,t_.jsx)(uE,{size:10}),e.deadline.toLocaleDateString()]}),(0,t_.jsx)("span",{className:"text-gray-600",children:""}),(0,t_.jsxs)("span",{className:`flex items-center gap-1 px-1.5 py-0.5 rounded border text-[9px] font-bold uppercase tracking-wider ${U(e.priority)}`,children:[j(e.priority)," ",e.priority]})]})]})]},e.id)};return(0,t_.jsxs)("div",{className:"flex flex-col h-full relative",children:[P&&(0,t_.jsxs)("div",{className:"absolute inset-0 bg-[#0C0C11]/95 backdrop-blur-xl z-20 flex flex-col p-4 animate-fade-in rounded-3xl border border-white/10 shadow-2xl",children:[(0,t_.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,t_.jsx)("h3",{className:"text-lg font-bold text-white leading-tight pr-4",children:P.title}),(0,t_.jsx)("button",{onClick:()=>I(null),className:"p-1 hover:bg-white/10 rounded-full text-gray-400 hover:text-white transition-colors",children:(0,t_.jsx)(tG,{size:20})})]}),(0,t_.jsxs)("div",{className:"space-y-4 flex-1 overflow-y-auto pr-1 custom-scrollbar",children:[(0,t_.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t_.jsxs)("span",{className:`flex items-center gap-1 px-2 py-1 rounded border text-xs font-bold uppercase tracking-wider ${U(P.priority)}`,children:[j(P.priority)," ",P.priority," Priority"]}),P.completed?(0,t_.jsxs)("span",{className:"flex items-center gap-1 px-2 py-1 rounded border text-xs font-bold uppercase tracking-wider text-green-400 bg-green-400/10 border-green-400/20",children:[(0,t_.jsx)(uy,{size:12})," Completed"]}):(0,t_.jsxs)("span",{className:"flex items-center gap-1 px-2 py-1 rounded border text-xs font-bold uppercase tracking-wider text-gray-400 bg-gray-400/10 border-gray-400/20",children:[(0,t_.jsx)(uv,{size:12})," Pending"]})]}),(0,t_.jsxs)("div",{className:"bg-white/5 rounded-xl p-3 border border-white/5",children:[(0,t_.jsxs)("h4",{className:"text-[10px] uppercase text-gray-500 font-bold mb-2 flex items-center gap-2",children:[(0,t_.jsx)(uk,{size:12})," Description"]}),(0,t_.jsx)("p",{className:"text-sm text-gray-300 leading-relaxed whitespace-pre-wrap",children:P.description||"No additional details provided for this mission."})]}),(0,t_.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,t_.jsxs)("div",{className:"bg-white/5 rounded-xl p-3 border border-white/5",children:[(0,t_.jsxs)("h4",{className:"text-[10px] uppercase text-gray-500 font-bold mb-1 flex items-center gap-2",children:[(0,t_.jsx)(uE,{size:12})," Deadline"]}),(0,t_.jsx)("p",{className:"text-sm text-white font-mono",children:P.deadline.toLocaleString()})]}),(0,t_.jsxs)("div",{className:"bg-white/5 rounded-xl p-3 border border-white/5",children:[(0,t_.jsxs)("h4",{className:"text-[10px] uppercase text-gray-500 font-bold mb-1 flex items-center gap-2",children:[(0,t_.jsx)(uN,{size:12})," Tags"]}),(0,t_.jsx)("div",{className:"flex flex-wrap gap-1",children:P.tags.length>0?P.tags.map(e=>(0,t_.jsxs)("span",{className:"text-xs bg-nexus-purple/20 text-nexus-purple px-1.5 py-0.5 rounded border border-nexus-purple/30",children:["#",e]},e)):(0,t_.jsx)("span",{className:"text-xs text-gray-500 italic",children:"None"})})]})]}),P.reminderTime&&(0,t_.jsxs)("div",{className:"bg-white/5 rounded-xl p-3 border border-white/5 flex items-center gap-3",children:[(0,t_.jsx)(ux,{size:16,className:P.reminderSent?"text-gray-500":"text-nexus-teal"}),(0,t_.jsxs)("div",{children:[(0,t_.jsx)("h4",{className:"text-[10px] uppercase text-gray-500 font-bold",children:"Reminder"}),(0,t_.jsxs)("p",{className:"text-xs text-white font-mono",children:[P.reminderTime.toLocaleString(),(0,t_.jsxs)("span",{className:"ml-2 opacity-50",children:["(",P.reminderSent?"Sent":"Pending",")"]})]})]})]})]}),(0,t_.jsxs)("div",{className:"pt-4 mt-2 border-t border-white/5 flex gap-2",children:[(0,t_.jsxs)("button",{onClick:()=>N(P.id),className:`flex-1 py-2 rounded-xl text-xs font-bold flex items-center justify-center gap-2 transition-all ${P.completed?"bg-white/5 text-gray-400 hover:bg-white/10":"bg-green-500/20 text-green-400 hover:bg-green-500/30"}`,children:[P.completed?(0,t_.jsx)(tG,{size:14}):(0,t_.jsx)(uy,{size:14}),P.completed?"Mark Incomplete":"Complete Mission"]}),(0,t_.jsx)("button",{onClick:()=>{i(e=>e.filter(e=>e.id!==P.id)),I(null)},className:"p-2 bg-red-500/10 text-red-400 rounded-xl hover:bg-red-500/20 transition-colors",title:"Delete Task",children:(0,t_.jsx)(uf,{size:16})})]})]}),(0,t_.jsxs)("div",{className:`flex flex-col gap-2 mb-2 bg-black/20 rounded-xl border border-white/5 ${_?"p-2":"p-3"}`,children:[(0,t_.jsxs)("div",{className:"flex gap-2",children:[(0,t_.jsx)("input",{type:"text",value:r,onChange:e=>l(e.target.value),onKeyDown:e=>"Enter"===e.key&&R(),placeholder:_?"Add Task...":"New Mission... (use #tag)",className:"flex-1 bg-transparent text-sm text-white focus:outline-none font-mono placeholder:text-gray-600"}),_?(0,t_.jsx)("button",{onClick:R,className:"p-1 rounded-lg text-nexus-teal hover:bg-nexus-teal hover:text-black transition-colors",children:(0,t_.jsx)(tz,{size:16})}):(0,t_.jsxs)("button",{onClick:()=>{u({low:"medium",medium:"high",high:"low"}[a])},className:`
                        px-2 py-1 rounded-lg text-[10px] font-bold uppercase tracking-wider border transition-all flex items-center gap-1
                        ${U(a)}
                    `,title:"Click to cycle priority",children:[j(a),a]})]}),!_&&(0,t_.jsxs)("div",{className:"flex items-center justify-between border-t border-white/5 pt-2 mt-1",children:[(0,t_.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t_.jsx)("input",{type:"date",value:o,onChange:e=>s(e.target.value),className:"bg-transparent text-xs text-gray-400 focus:outline-none focus:text-nexus-teal transition-colors font-mono max-w-[100px]",style:{colorScheme:"dark"},title:"Deadline"}),(0,t_.jsx)("button",{onClick:()=>f(!m),className:`p-1.5 rounded-md transition-all ${m||p?"bg-nexus-purple text-white shadow-sm":"text-gray-500 hover:text-nexus-purple hover:bg-white/5"}`,title:"Set Reminder Notification",children:p?(0,t_.jsx)(ux,{size:14}):(0,t_.jsx)(uR,{size:14})}),m&&(0,t_.jsx)("input",{type:"datetime-local",value:p,onChange:e=>h(e.target.value),className:"bg-white/5 border border-white/10 rounded px-2 py-0.5 text-[10px] text-nexus-teal focus:outline-none focus:border-nexus-teal font-mono animate-fade-in",style:{colorScheme:"dark"}})]}),(0,t_.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t_.jsx)("button",{onClick:()=>A(!T),className:`p-1.5 rounded-md transition-colors ${T||"none"!==b||"all"!==g?"text-nexus-teal bg-nexus-teal/10":"text-gray-500 hover:text-white"}`,title:"Filters & Sort",children:(0,t_.jsx)(uI,{size:14})}),(0,t_.jsxs)("button",{onClick:R,className:"flex items-center gap-1 text-[10px] font-bold bg-nexus-teal text-nexus-deep px-3 py-1 rounded-md hover:bg-white transition-colors",children:[(0,t_.jsx)(tz,{size:14})," ADD"]})]})]})]}),T&&!_&&(0,t_.jsxs)("div",{className:"mb-4 animate-fade-in space-y-2 bg-white/5 p-2 rounded-lg border border-white/5",children:[(0,t_.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t_.jsx)("div",{className:"flex bg-black/30 rounded-lg p-0.5 border border-white/5",children:["all","active","completed"].map(e=>(0,t_.jsx)("button",{onClick:()=>y(e),className:`px-3 py-1 rounded-md text-[10px] uppercase font-bold tracking-wider transition-all ${g===e?"bg-nexus-purple text-white shadow-sm":"text-gray-500 hover:text-gray-300"}`,children:e},e))}),(0,t_.jsxs)("div",{className:"flex gap-1",children:[(0,t_.jsxs)("button",{onClick:()=>D("deadline"),className:`flex items-center gap-1 px-2 py-1 rounded border text-[10px] uppercase font-bold tracking-wider transition-all ${"deadline"===b?"bg-nexus-teal text-nexus-deep border-nexus-teal":"bg-transparent text-gray-400 border-white/10 hover:border-white/30"}`,children:[(0,t_.jsx)(um,{size:12})," Date","deadline"===b&&("asc"===S?(0,t_.jsx)(u_,{size:12}):(0,t_.jsx)(uO,{size:12}))]}),(0,t_.jsxs)("button",{onClick:()=>D("priority"),className:`flex items-center gap-1 px-2 py-1 rounded border text-[10px] uppercase font-bold tracking-wider transition-all ${"priority"===b?"bg-nexus-teal text-nexus-deep border-nexus-teal":"bg-transparent text-gray-400 border-white/10 hover:border-white/30"}`,children:[(0,t_.jsx)(uw,{size:12})," Prio","priority"===b&&("asc"===S?(0,t_.jsx)(u_,{size:12}):(0,t_.jsx)(uO,{size:12}))]})]})]}),(0,t_.jsxs)("div",{className:"flex gap-1 overflow-x-auto pb-1 custom-scrollbar",children:[(0,t_.jsxs)("button",{onClick:()=>x("all"),className:`flex items-center gap-1 px-2 py-1 rounded-full text-[10px] whitespace-nowrap border transition-all ${"all"===v?"bg-white/20 text-white border-white/30":"bg-transparent text-gray-500 border-dashed border-white/10"}`,children:[(0,t_.jsx)(uN,{size:10})," All"]}),k.map(e=>(0,t_.jsxs)("button",{onClick:()=>x(e===v?"all":e),className:`px-2 py-1 rounded-full text-[10px] whitespace-nowrap border transition-all ${v===e?"bg-nexus-purple/20 text-nexus-purple border-nexus-purple":"bg-transparent text-gray-500 border-white/10 hover:border-nexus-purple/30"}`,children:["#",e]},e))]})]}),(0,t_.jsx)("div",{className:"flex-1 overflow-y-auto pr-1",children:"none"===b?(0,t_.jsxs)(t_.Fragment,{children:[M.some(e=>!e.completed&&"high"===e.priority)&&(0,t_.jsxs)("div",{className:"mb-6",children:[(0,t_.jsxs)("h4",{className:"text-[10px] font-bold text-amber-500 uppercase tracking-widest mb-2 flex items-center gap-2 pl-1 opacity-80",children:[(0,t_.jsx)(uw,{size:12,className:"fill-current"})," Critical Focus"]}),(0,t_.jsx)("div",{className:"space-y-2",children:M.filter(e=>!e.completed&&"high"===e.priority).map(L)}),(0,t_.jsx)("div",{className:"h-px w-full bg-white/5 mt-4"})]}),(0,t_.jsxs)("div",{className:"space-y-2",children:[M.some(e=>!e.completed&&"high"===e.priority)&&(0,t_.jsx)("h4",{className:"text-[10px] font-bold text-gray-500 uppercase tracking-widest mb-2 pl-1",children:"Backlog"}),M.filter(e=>e.completed||"high"!==e.priority).map(L),0===M.length&&(0,t_.jsx)("div",{className:"text-center py-8 text-gray-600 text-xs italic",children:e||"all"!==g?"No missions match criteria.":"No active missions."})]})]}):(0,t_.jsxs)("div",{className:"space-y-2",children:[M.map(L),0===M.length&&(0,t_.jsx)("div",{className:"text-center py-8 text-gray-600 text-xs italic",children:"No missions match your filters."})]})}),!_&&(0,t_.jsxs)("button",{onClick:()=>{alert("Sending WhatsApp notification to registered number: \n\n"+n.filter(e=>!e.completed).map(e=>`- ${e.title} [${e.priority.toUpperCase()}]`).join("\n"))},className:"mt-4 flex items-center justify-center gap-2 w-full py-2 bg-green-600/20 hover:bg-green-600/40 text-green-400 text-xs rounded-lg border border-green-500/30 transition-all",children:[(0,t_.jsx)(ux,{size:14}),"Sync to WhatsApp"]})]})},uD=tM("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]),uj=tM("bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]),uU=tM("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),uL=tM("sparkles",[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]]);class uV{}function uF(e,t){return e.replace(/\{([^}]+)\}/g,(e,n)=>{if(Object.prototype.hasOwnProperty.call(t,n)){let e=t[n];return null!=e?String(e):""}throw Error(`Key '${n}' not found in valueMap.`)})}function uq(e,t,n){for(let i=0;i<t.length-1;i++){let r=t[i];if(r.endsWith("[]")){let l=r.slice(0,-2);if(!(l in e))if(Array.isArray(n))e[l]=Array.from({length:n.length},()=>({}));else throw Error(`Value must be a list given an array path ${r}`);if(Array.isArray(e[l])){let r=e[l];if(Array.isArray(n))for(let e=0;e<r.length;e++)uq(r[e],t.slice(i+1),n[e]);else for(let e of r)uq(e,t.slice(i+1),n)}return}if(r.endsWith("[0]")){let l=r.slice(0,-3);l in e||(e[l]=[{}]),uq(e[l][0],t.slice(i+1),n);return}e[r]&&"object"==typeof e[r]||(e[r]={}),e=e[r]}let i=t[t.length-1],r=e[i];if(void 0!==r){if(!n||"object"==typeof n&&0===Object.keys(n).length||n===r)return;if("object"==typeof r&&"object"==typeof n&&null!==r&&null!==n)Object.assign(r,n);else throw Error(`Cannot set value for an existing key. Key: ${i}`)}else"_self"!==i||"object"!=typeof n||null===n||Array.isArray(n)?e[i]=n:Object.assign(e,n)}function uG(e,t,n){try{if(1===t.length&&"_self"===t[0])return e;for(let i=0;i<t.length;i++){if("object"!=typeof e||null===e)return n;let r=t[i];if(r.endsWith("[]")){let l=r.slice(0,-2);if(!(l in e))return n;{let r=e[l];if(!Array.isArray(r))return n;return r.map(e=>uG(e,t.slice(i+1),n))}}e=e[r]}return e}catch(e){if(e instanceof TypeError)return n;throw e}}function uH(e){if("string"!=typeof e)throw Error("fromImageBytes must be a string");return e}function uB(e){var t;let n,i,r,l,o={},s=uG(e,["name"]);null!=s&&uq(o,["name"],s);let a=uG(e,["metadata"]);null!=a&&uq(o,["metadata"],a);let u=uG(e,["done"]);null!=u&&uq(o,["done"],u);let d=uG(e,["error"]);null!=d&&uq(o,["error"],d);let c=uG(e,["response"]);return null!=c&&uq(o,["response"],(n={},null!=(i=uG(t=c,["sdkHttpResponse"]))&&uq(n,["sdkHttpResponse"],i),null!=(r=uG(t,["parent"]))&&uq(n,["parent"],r),null!=(l=uG(t,["documentName"]))&&uq(n,["documentName"],l),n)),o}(S=eD||(eD={})).OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",S.OUTCOME_OK="OUTCOME_OK",S.OUTCOME_FAILED="OUTCOME_FAILED",S.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED",(w=ej||(ej={})).LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",w.PYTHON="PYTHON",(T=eU||(eU={})).SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",T.SILENT="SILENT",T.WHEN_IDLE="WHEN_IDLE",T.INTERRUPT="INTERRUPT",(A=eL||(eL={})).TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",A.STRING="STRING",A.NUMBER="NUMBER",A.INTEGER="INTEGER",A.BOOLEAN="BOOLEAN",A.ARRAY="ARRAY",A.OBJECT="OBJECT",A.NULL="NULL",(C=eV||(eV={})).MODE_UNSPECIFIED="MODE_UNSPECIFIED",C.MODE_DYNAMIC="MODE_DYNAMIC",(I=eF||(eF={})).API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",I.SIMPLE_SEARCH="SIMPLE_SEARCH",I.ELASTIC_SEARCH="ELASTIC_SEARCH",(_=eq||(eq={})).AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",_.NO_AUTH="NO_AUTH",_.API_KEY_AUTH="API_KEY_AUTH",_.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",_.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",_.OAUTH="OAUTH",_.OIDC_AUTH="OIDC_AUTH",(O=eG||(eG={})).HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",O.HTTP_IN_QUERY="HTTP_IN_QUERY",O.HTTP_IN_HEADER="HTTP_IN_HEADER",O.HTTP_IN_PATH="HTTP_IN_PATH",O.HTTP_IN_BODY="HTTP_IN_BODY",O.HTTP_IN_COOKIE="HTTP_IN_COOKIE",(N=eH||(eH={})).PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",N.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",N.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",N.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",N.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",N.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",N.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH",(R=eB||(eB={})).THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",R.LOW="LOW",R.MEDIUM="MEDIUM",R.HIGH="HIGH",R.MINIMAL="MINIMAL",(P=e$||(e$={})).HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",P.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",P.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",P.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",P.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",P.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",P.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",P.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",P.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",P.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",P.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK",(k=ez||(ez={})).HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",k.SEVERITY="SEVERITY",k.PROBABILITY="PROBABILITY",(M=eJ||(eJ={})).HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",M.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",M.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",M.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",M.BLOCK_NONE="BLOCK_NONE",M.OFF="OFF",(D=eW||(eW={})).FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",D.STOP="STOP",D.MAX_TOKENS="MAX_TOKENS",D.SAFETY="SAFETY",D.RECITATION="RECITATION",D.LANGUAGE="LANGUAGE",D.OTHER="OTHER",D.BLOCKLIST="BLOCKLIST",D.PROHIBITED_CONTENT="PROHIBITED_CONTENT",D.SPII="SPII",D.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",D.IMAGE_SAFETY="IMAGE_SAFETY",D.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",D.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",D.NO_IMAGE="NO_IMAGE",D.IMAGE_RECITATION="IMAGE_RECITATION",D.IMAGE_OTHER="IMAGE_OTHER",(j=eY||(eY={})).HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",j.NEGLIGIBLE="NEGLIGIBLE",j.LOW="LOW",j.MEDIUM="MEDIUM",j.HIGH="HIGH",(U=eK||(eK={})).HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",U.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",U.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",U.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",U.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH",(L=eX||(eX={})).URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",L.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",L.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",L.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",L.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE",(V=eQ||(eQ={})).BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",V.SAFETY="SAFETY",V.OTHER="OTHER",V.BLOCKLIST="BLOCKLIST",V.PROHIBITED_CONTENT="PROHIBITED_CONTENT",V.IMAGE_SAFETY="IMAGE_SAFETY",V.MODEL_ARMOR="MODEL_ARMOR",V.JAILBREAK="JAILBREAK",(F=eZ||(eZ={})).TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",F.ON_DEMAND="ON_DEMAND",F.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT",(q=e0||(e0={})).MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",q.TEXT="TEXT",q.IMAGE="IMAGE",q.AUDIO="AUDIO",(G=e1||(e1={})).MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",G.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",G.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",G.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",(H=e2||(e2={})).TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",H.TUNING_MODE_FULL="TUNING_MODE_FULL",H.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER",(B=e5||(e5={})).ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",B.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",B.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",B.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",B.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",B.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",B.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO",($=e4||(e4={})).JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",$.JOB_STATE_QUEUED="JOB_STATE_QUEUED",$.JOB_STATE_PENDING="JOB_STATE_PENDING",$.JOB_STATE_RUNNING="JOB_STATE_RUNNING",$.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",$.JOB_STATE_FAILED="JOB_STATE_FAILED",$.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",$.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",$.JOB_STATE_PAUSED="JOB_STATE_PAUSED",$.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",$.JOB_STATE_UPDATING="JOB_STATE_UPDATING",$.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED",(z=e3||(e3={})).TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",z.TUNING_TASK_I2V="TUNING_TASK_I2V",z.TUNING_TASK_T2V="TUNING_TASK_T2V",z.TUNING_TASK_R2V="TUNING_TASK_R2V",(J=e6||(e6={})).MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",J.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",J.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",J.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",J.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH",(W=e8||(e8={})).FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",W.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",W.BALANCED="BALANCED",W.PRIORITIZE_COST="PRIORITIZE_COST",(Y=e9||(e9={})).UNSPECIFIED="UNSPECIFIED",Y.BLOCKING="BLOCKING",Y.NON_BLOCKING="NON_BLOCKING",(K=e7||(e7={})).MODE_UNSPECIFIED="MODE_UNSPECIFIED",K.MODE_DYNAMIC="MODE_DYNAMIC",(X=te||(te={})).ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",X.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER",(Q=tt||(tt={})).MODE_UNSPECIFIED="MODE_UNSPECIFIED",Q.AUTO="AUTO",Q.ANY="ANY",Q.NONE="NONE",Q.VALIDATED="VALIDATED",(Z=tn||(tn={})).BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",Z.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",Z.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",Z.BLOCK_NONE="BLOCK_NONE",(ee=ti||(ti={})).DONT_ALLOW="DONT_ALLOW",ee.ALLOW_ADULT="ALLOW_ADULT",ee.ALLOW_ALL="ALLOW_ALL",(et=tr||(tr={})).auto="auto",et.en="en",et.ja="ja",et.ko="ko",et.hi="hi",et.zh="zh",et.pt="pt",et.es="es",(en=tl||(tl={})).MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",en.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",en.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",en.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",en.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC",(ei=to||(to={})).CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",ei.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",ei.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",ei.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH",(er=ts||(ts={})).SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",er.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",er.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",er.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT",(el=ta||(ta={})).EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",el.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",el.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",el.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",el.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",el.EDIT_MODE_STYLE="EDIT_MODE_STYLE",el.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",el.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE",(eo=tu||(tu={})).FOREGROUND="FOREGROUND",eo.BACKGROUND="BACKGROUND",eo.PROMPT="PROMPT",eo.SEMANTIC="SEMANTIC",eo.INTERACTIVE="INTERACTIVE",(es=td||(td={})).ASSET="ASSET",es.STYLE="STYLE",(ea=tc||(tc={})).INSERT="INSERT",ea.REMOVE="REMOVE",ea.REMOVE_STATIC="REMOVE_STATIC",ea.OUTPAINT="OUTPAINT",(eu=tp||(tp={})).OPTIMIZED="OPTIMIZED",eu.LOSSLESS="LOSSLESS",(ed=th||(th={})).SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",ed.PREFERENCE_TUNING="PREFERENCE_TUNING",(ec=tm||(tm={})).STATE_UNSPECIFIED="STATE_UNSPECIFIED",ec.STATE_PENDING="STATE_PENDING",ec.STATE_ACTIVE="STATE_ACTIVE",ec.STATE_FAILED="STATE_FAILED",(ep=tf||(tf={})).STATE_UNSPECIFIED="STATE_UNSPECIFIED",ep.PROCESSING="PROCESSING",ep.ACTIVE="ACTIVE",ep.FAILED="FAILED",(eh=tg||(tg={})).SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",eh.UPLOADED="UPLOADED",eh.GENERATED="GENERATED",(em=ty||(ty={})).TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",em.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",em.RESPONSE_REJECTED="RESPONSE_REJECTED",em.NEED_MORE_INPUT="NEED_MORE_INPUT",(ef=tv||(tv={})).MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",ef.TEXT="TEXT",ef.IMAGE="IMAGE",ef.VIDEO="VIDEO",ef.AUDIO="AUDIO",ef.DOCUMENT="DOCUMENT",(eg=tx||(tx={})).VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",eg.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",eg.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS",(ey=tb||(tb={})).START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",ey.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",ey.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW",(ev=tE||(tE={})).END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",ev.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",ev.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW",(ex=tS||(tS={})).ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",ex.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",ex.NO_INTERRUPTION="NO_INTERRUPTION",(eb=tw||(tw={})).TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",eb.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",eb.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT",(eE=tT||(tT={})).SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",eE.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",eE.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",eE.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",eE.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",eE.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",eE.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",eE.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",eE.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",eE.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",eE.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",eE.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",eE.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR",(eS=tA||(tA={})).MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",eS.QUALITY="QUALITY",eS.DIVERSITY="DIVERSITY",eS.VOCALIZATION="VOCALIZATION",(ew=tC||(tC={})).PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",ew.PLAY="PLAY",ew.PAUSE="PAUSE",ew.STOP="STOP",ew.RESET_CONTEXT="RESET_CONTEXT";class u${constructor(e){const t={};for(const n of e.headers.entries())t[n[0]]=n[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class uz{get text(){var e,t,n,i,r,l,o,s;if((null==(i=null==(n=null==(t=null==(e=this.candidates)?void 0:e[0])?void 0:t.content)?void 0:n.parts)?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let a="",u=!1,d=[];for(let e of null!=(s=null==(o=null==(l=null==(r=this.candidates)?void 0:r[0])?void 0:l.content)?void 0:o.parts)?s:[]){for(let[t,n]of Object.entries(e))"text"!==t&&"thought"!==t&&"thoughtSignature"!==t&&(null!==n||void 0!==n)&&d.push(t);if("string"==typeof e.text){if("boolean"==typeof e.thought&&e.thought)continue;u=!0,a+=e.text}}return d.length>0&&console.warn(`there are non-text parts ${d} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),u?a:void 0}get data(){var e,t,n,i,r,l,o,s;if((null==(i=null==(n=null==(t=null==(e=this.candidates)?void 0:e[0])?void 0:t.content)?void 0:n.parts)?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let a="",u=[];for(let e of null!=(s=null==(o=null==(l=null==(r=this.candidates)?void 0:r[0])?void 0:l.content)?void 0:o.parts)?s:[]){for(let[t,n]of Object.entries(e))"inlineData"!==t&&(null!==n||void 0!==n)&&u.push(t);e.inlineData&&"string"==typeof e.inlineData.data&&(a+=atob(e.inlineData.data))}return u.length>0&&console.warn(`there are non-data parts ${u} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),a.length>0?btoa(a):void 0}get functionCalls(){var e,t,n,i,r,l,o,s;if((null==(i=null==(n=null==(t=null==(e=this.candidates)?void 0:e[0])?void 0:t.content)?void 0:n.parts)?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");let a=null==(s=null==(o=null==(l=null==(r=this.candidates)?void 0:r[0])?void 0:l.content)?void 0:o.parts)?void 0:s.filter(e=>e.functionCall).map(e=>e.functionCall).filter(e=>void 0!==e);if((null==a?void 0:a.length)!==0)return a}get executableCode(){var e,t,n,i,r,l,o,s,a;if((null==(i=null==(n=null==(t=null==(e=this.candidates)?void 0:e[0])?void 0:t.content)?void 0:n.parts)?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");let u=null==(s=null==(o=null==(l=null==(r=this.candidates)?void 0:r[0])?void 0:l.content)?void 0:o.parts)?void 0:s.filter(e=>e.executableCode).map(e=>e.executableCode).filter(e=>void 0!==e);if((null==u?void 0:u.length)!==0)return null==(a=null==u?void 0:u[0])?void 0:a.code}get codeExecutionResult(){var e,t,n,i,r,l,o,s,a;if((null==(i=null==(n=null==(t=null==(e=this.candidates)?void 0:e[0])?void 0:t.content)?void 0:n.parts)?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");let u=null==(s=null==(o=null==(l=null==(r=this.candidates)?void 0:r[0])?void 0:l.content)?void 0:o.parts)?void 0:s.filter(e=>e.codeExecutionResult).map(e=>e.codeExecutionResult).filter(e=>void 0!==e);if((null==u?void 0:u.length)!==0)return null==(a=null==u?void 0:u[0])?void 0:a.output}}class uJ{}class uW{}class uY{}class uK{}class uX{}class uQ{}class uZ{}class u0{}class u1{}class u2{}class u5{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){let n,i=new u5;if(t){let t,i,r,l,o,s;t={},null!=(i=uG(e,["name"]))&&uq(t,["name"],i),null!=(r=uG(e,["metadata"]))&&uq(t,["metadata"],r),null!=(l=uG(e,["done"]))&&uq(t,["done"],l),null!=(o=uG(e,["error"]))&&uq(t,["error"],o),null!=(s=uG(e,["response"]))&&uq(t,["response"],function(e){let t={},n=uG(e,["videos"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>{var t;let n,i,r,l,o,s;return n={},null!=(i=uG(e,["_self"]))&&uq(n,["video"],(r={},null!=(l=uG(t=i,["gcsUri"]))&&uq(r,["uri"],l),null!=(o=uG(t,["bytesBase64Encoded"]))&&uq(r,["videoBytes"],uH(o)),null!=(s=uG(t,["mimeType"]))&&uq(r,["mimeType"],s),r)),n})),uq(t,["generatedVideos"],e)}let i=uG(e,["raiMediaFilteredCount"]);null!=i&&uq(t,["raiMediaFilteredCount"],i);let r=uG(e,["raiMediaFilteredReasons"]);return null!=r&&uq(t,["raiMediaFilteredReasons"],r),t}(s)),n=t}else{let t,i,r,l,o,s;t={},null!=(i=uG(e,["name"]))&&uq(t,["name"],i),null!=(r=uG(e,["metadata"]))&&uq(t,["metadata"],r),null!=(l=uG(e,["done"]))&&uq(t,["done"],l),null!=(o=uG(e,["error"]))&&uq(t,["error"],o),null!=(s=uG(e,["response","generateVideoResponse"]))&&uq(t,["response"],function(e){let t={},n=uG(e,["generatedSamples"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>{var t;let n,i,r,l,o,s;return n={},null!=(i=uG(e,["video"]))&&uq(n,["video"],(r={},null!=(l=uG(t=i,["uri"]))&&uq(r,["uri"],l),null!=(o=uG(t,["encodedVideo"]))&&uq(r,["videoBytes"],uH(o)),null!=(s=uG(t,["encoding"]))&&uq(r,["mimeType"],s),r)),n})),uq(t,["generatedVideos"],e)}let i=uG(e,["raiMediaFilteredCount"]);null!=i&&uq(t,["raiMediaFilteredCount"],i);let r=uG(e,["raiMediaFilteredReasons"]);return null!=r&&uq(t,["raiMediaFilteredReasons"],r),t}(s)),n=t}return Object.assign(i,n),i}}class u4{}class u3{}class u6{}class u8{}class u9{}class u7{}class de{}class dt{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){var n;let i,r,l,o,s,a,u,d,c,p,h=new dt;return Object.assign(h,(s={},null!=(a=uG(e,["name"]))&&uq(s,["name"],a),null!=(u=uG(e,["metadata"]))&&uq(s,["metadata"],u),null!=(d=uG(e,["done"]))&&uq(s,["done"],d),null!=(c=uG(e,["error"]))&&uq(s,["error"],c),null!=(p=uG(e,["response"]))&&uq(s,["response"],(i={},null!=(r=uG(n=p,["sdkHttpResponse"]))&&uq(i,["sdkHttpResponse"],r),null!=(l=uG(n,["parent"]))&&uq(i,["parent"],l),null!=(o=uG(n,["documentName"]))&&uq(i,["documentName"],o),i)),s)),h}}class dn{}class di{}class dr{}class dl{}class ds{get text(){var e,t,n;let i="",r=!1,l=[];for(let o of null!=(n=null==(t=null==(e=this.serverContent)?void 0:e.modelTurn)?void 0:t.parts)?n:[]){for(let[e,t]of Object.entries(o))"text"!==e&&"thought"!==e&&null!==t&&l.push(e);if("string"==typeof o.text){if("boolean"==typeof o.thought&&o.thought)continue;r=!0,i+=o.text}}return l.length>0&&console.warn(`there are non-text parts ${l} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),r?i:void 0}get data(){var e,t,n;let i="",r=[];for(let l of null!=(n=null==(t=null==(e=this.serverContent)?void 0:e.modelTurn)?void 0:t.parts)?n:[]){for(let[e,t]of Object.entries(l))"inlineData"!==e&&null!==t&&r.push(e);l.inlineData&&"string"==typeof l.inlineData.data&&(i+=atob(l.inlineData.data))}return r.length>0&&console.warn(`there are non-data parts ${r} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),i.length>0?btoa(i):void 0}}class da{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class du{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){let n=new du;return Object.assign(n,uB(e)),n}}function dd(e,t){if(!t||"string"!=typeof t)throw Error("model is required and must be a string");if(t.includes("..")||t.includes("?")||t.includes("&"))throw Error("invalid model parameter");if(e.isVertexAI())if(t.startsWith("publishers/")||t.startsWith("projects/")||t.startsWith("models/"))return t;else{if(!(t.indexOf("/")>=0))return`publishers/google/models/${t}`;let e=t.split("/",2);return`publishers/${e[0]}/models/${e[1]}`}return t.startsWith("models/")||t.startsWith("tunedModels/")?t:`models/${t}`}function dc(e,t){let n=dd(e,t);return n?n.startsWith("publishers/")&&e.isVertexAI()?`projects/${e.getProject()}/locations/${e.getLocation()}/${n}`:n.startsWith("models/")&&e.isVertexAI()?`projects/${e.getProject()}/locations/${e.getLocation()}/publishers/google/${n}`:n:""}function dp(e){return Array.isArray(e)?e.map(e=>dh(e)):[dh(e)]}function dh(e){if("object"==typeof e&&null!==e)return e;throw Error(`Could not parse input as Blob. Unsupported blob type: ${typeof e}`)}function dm(e){let t=dh(e);if(t.mimeType&&t.mimeType.startsWith("image/"))return t;throw Error(`Unsupported mime type: ${t.mimeType}`)}function df(e){let t=dh(e);if(t.mimeType&&t.mimeType.startsWith("audio/"))return t;throw Error(`Unsupported mime type: ${t.mimeType}`)}function dg(e){if(null==e)throw Error("PartUnion is required");if("object"==typeof e)return e;if("string"==typeof e)return{text:e};throw Error(`Unsupported part type: ${typeof e}`)}function dy(e){if(null==e||Array.isArray(e)&&0===e.length)throw Error("PartListUnion is required");return Array.isArray(e)?e.map(e=>dg(e)):[dg(e)]}function dv(e){return null!=e&&"object"==typeof e&&"parts"in e&&Array.isArray(e.parts)}function dx(e){return null!=e&&"object"==typeof e&&"functionCall"in e}function db(e){return null!=e&&"object"==typeof e&&"functionResponse"in e}function dE(e){if(null==e)throw Error("ContentUnion is required");return dv(e)?e:{role:"user",parts:dy(e)}}function dS(e,t){if(!t)return[];if(e.isVertexAI()&&Array.isArray(t))return t.flatMap(e=>{let t=dE(e);return t.parts&&t.parts.length>0&&void 0!==t.parts[0].text?[t.parts[0].text]:[]});if(e.isVertexAI()){let e=dE(t);return e.parts&&e.parts.length>0&&void 0!==e.parts[0].text?[e.parts[0].text]:[]}return Array.isArray(t)?t.map(e=>dE(e)):[dE(t)]}function dw(e){if(null==e||Array.isArray(e)&&0===e.length)throw Error("contents are required");if(!Array.isArray(e)){if(dx(e)||db(e))throw Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[dE(e)]}let t=[],n=[],i=dv(e[0]);for(let r of e){let e=dv(r);if(e!=i)throw Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(e)t.push(r);else if(dx(r)||db(r))throw Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");else n.push(r)}return i||t.push({role:"user",parts:dy(n)}),t}function dT(e){let t={},n=["items"],i=["anyOf"],r=["properties"];if(e.type&&e.anyOf)throw Error("type and anyOf cannot be both populated.");let l=e.anyOf;for(let[o,s]of(null!=l&&2==l.length&&("null"===l[0].type?(t.nullable=!0,e=l[1]):"null"===l[1].type&&(t.nullable=!0,e=l[0])),e.type instanceof Array&&function(e,t){e.includes("null")&&(t.nullable=!0);let n=e.filter(e=>"null"!==e);if(1===n.length)t.type=Object.values(eL).includes(n[0].toUpperCase())?n[0].toUpperCase():eL.TYPE_UNSPECIFIED;else for(let e of(t.anyOf=[],n))t.anyOf.push({type:Object.values(eL).includes(e.toUpperCase())?e.toUpperCase():eL.TYPE_UNSPECIFIED})}(e.type,t),Object.entries(e)))if(null!=s)if("type"==o){if("null"===s)throw Error("type: null can not be the only possible type for the field.");if(s instanceof Array)continue;t.type=Object.values(eL).includes(s.toUpperCase())?s.toUpperCase():eL.TYPE_UNSPECIFIED}else if(n.includes(o))t[o]=dT(s);else if(i.includes(o)){let e=[];for(let n of s){if("null"==n.type){t.nullable=!0;continue}e.push(dT(n))}t[o]=e}else if(r.includes(o)){let e={};for(let[t,n]of Object.entries(s))e[t]=dT(n);t[o]=e}else{if("additionalProperties"===o)continue;t[o]=s}return t}function dA(e){if("object"==typeof e)return e;if("string"==typeof e)return{voiceConfig:{prebuiltVoiceConfig:{voiceName:e}}};throw Error(`Unsupported speechConfig type: ${typeof e}`)}function dC(e){if("multiSpeakerVoiceConfig"in e)throw Error("multiSpeakerVoiceConfig is not supported in the live API.");return e}function dI(e){if(e.functionDeclarations)for(let t of e.functionDeclarations)t.parameters&&(Object.keys(t.parameters).includes("$schema")?t.parametersJsonSchema||(t.parametersJsonSchema=t.parameters,delete t.parameters):t.parameters=dT(t.parameters)),t.response&&(Object.keys(t.response).includes("$schema")?t.responseJsonSchema||(t.responseJsonSchema=t.response,delete t.response):t.response=dT(t.response));return e}function d_(e){if(null==e)throw Error("tools is required");if(!Array.isArray(e))throw Error("tools is required and must be an array of Tools");let t=[];for(let n of e)t.push(n);return t}function dO(e,t){if("string"!=typeof t)throw Error("name must be a string");return function(e,t,n,i=1){let r=!t.startsWith(`${n}/`)&&t.split("/").length===i;if(e.isVertexAI())if(t.startsWith("projects/"))return t;else if(t.startsWith("locations/"))return`projects/${e.getProject()}/${t}`;else if(t.startsWith(`${n}/`))return`projects/${e.getProject()}/locations/${e.getLocation()}/${t}`;else if(r)return`projects/${e.getProject()}/locations/${e.getLocation()}/${n}/${t}`;else return t;return r?`${n}/${t}`:t}(e,t,"cachedContents")}function dN(e){switch(e){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return e}}function dR(e){var t;let n;if(null!=e&&"object"==typeof e&&"name"in e&&(n=e.name),null==e||"object"!=typeof e||!("uri"in e)||void 0!==(n=e.uri)){if(null==e||"object"!=typeof e||!("video"in e)||void 0!==(n=null==(t=e.video)?void 0:t.uri)){if("string"==typeof e&&(n=e),void 0===n)throw Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){let e=n.split("files/")[1].match(/[a-z0-9]+/);if(null===e)throw Error(`Could not extract file name from URI ${n}`);n=e[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}}function dP(e,t){return e.isVertexAI()?t?"publishers/google/models":"models":t?"models":"tunedModels"}function dk(e){for(let i of["models","tunedModels","publisherModels"]){var t,n;if(t=e,n=i,null!==t&&"object"==typeof t&&n in t)return e[i]}return[]}function dM(e,t){let n;if("string"==typeof t)if(e.isVertexAI())if(t.startsWith("gs://"))n={format:"jsonl",gcsUri:[t]};else if(t.startsWith("bq://"))n={format:"bigquery",bigqueryUri:t};else throw Error(`Unsupported string source for Vertex AI: ${t}`);else if(t.startsWith("files/"))n={fileName:t};else throw Error(`Unsupported string source for Gemini API: ${t}`);else if(Array.isArray(t)){if(e.isVertexAI())throw Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:t}}else n=t;let i=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,r=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(e.isVertexAI()){if(r>0||1!==i)throw Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||1!==r)throw Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function dD(e){if("object"!=typeof e||null===e)return{};let t=e.inlinedResponses;if("object"!=typeof t||null===t)return e;let n=t.inlinedResponses;if(!Array.isArray(n)||0===n.length)return e;let i=!1;for(let e of n){if("object"!=typeof e||null===e)continue;let t=e.response;if("object"==typeof t&&null!==t&&void 0!==t.embedding){i=!0;break}}return i&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),e}function dj(e,t){if(!e.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw Error(`Invalid batch job name: ${t}.`)}function dU(e){if("BATCH_STATE_UNSPECIFIED"===e)return"JOB_STATE_UNSPECIFIED";if("BATCH_STATE_PENDING"===e)return"JOB_STATE_PENDING";if("BATCH_STATE_RUNNING"===e)return"JOB_STATE_RUNNING";if("BATCH_STATE_SUCCEEDED"===e)return"JOB_STATE_SUCCEEDED";if("BATCH_STATE_FAILED"===e)return"JOB_STATE_FAILED";else if("BATCH_STATE_CANCELLED"===e)return"JOB_STATE_CANCELLED";else if("BATCH_STATE_EXPIRED"===e)return"JOB_STATE_EXPIRED";else return e}function dL(e){let t={},n=uG(e,["name"]);null!=n&&uq(t,["name"],n);let i=uG(e,["metadata","displayName"]);null!=i&&uq(t,["displayName"],i);let r=uG(e,["metadata","state"]);null!=r&&uq(t,["state"],dU(r));let l=uG(e,["metadata","createTime"]);null!=l&&uq(t,["createTime"],l);let o=uG(e,["metadata","endTime"]);null!=o&&uq(t,["endTime"],o);let s=uG(e,["metadata","updateTime"]);null!=s&&uq(t,["updateTime"],s);let a=uG(e,["metadata","model"]);null!=a&&uq(t,["model"],a);let u=uG(e,["metadata","output"]);return null!=u&&uq(t,["dest"],function(e){let t={},n=uG(e,["responsesFile"]);null!=n&&uq(t,["fileName"],n);let i=uG(e,["inlinedResponses","inlinedResponses"]);if(null!=i){let e=i;Array.isArray(e)&&(e=e.map(e=>{var t;let n,i,r;return n={},null!=(i=uG(t=e,["response"]))&&uq(n,["response"],function(e){let t={},n=uG(e,["sdkHttpResponse"]);null!=n&&uq(t,["sdkHttpResponse"],n);let i=uG(e,["candidates"]);if(null!=i){let e=i;Array.isArray(e)&&(e=e.map(e=>(function(e){let t={},n=uG(e,["content"]);null!=n&&uq(t,["content"],n);let i=uG(e,["citationMetadata"]);null!=i&&uq(t,["citationMetadata"],function(e){let t={},n=uG(e,["citationSources"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>e)),uq(t,["citations"],e)}return t}(i));let r=uG(e,["tokenCount"]);null!=r&&uq(t,["tokenCount"],r);let l=uG(e,["finishReason"]);null!=l&&uq(t,["finishReason"],l);let o=uG(e,["avgLogprobs"]);null!=o&&uq(t,["avgLogprobs"],o);let s=uG(e,["groundingMetadata"]);null!=s&&uq(t,["groundingMetadata"],s);let a=uG(e,["index"]);null!=a&&uq(t,["index"],a);let u=uG(e,["logprobsResult"]);null!=u&&uq(t,["logprobsResult"],u);let d=uG(e,["safetyRatings"]);if(null!=d){let e=d;Array.isArray(e)&&(e=e.map(e=>e)),uq(t,["safetyRatings"],e)}let c=uG(e,["urlContextMetadata"]);return null!=c&&uq(t,["urlContextMetadata"],c),t})(e))),uq(t,["candidates"],e)}let r=uG(e,["modelVersion"]);null!=r&&uq(t,["modelVersion"],r);let l=uG(e,["promptFeedback"]);null!=l&&uq(t,["promptFeedback"],l);let o=uG(e,["responseId"]);null!=o&&uq(t,["responseId"],o);let s=uG(e,["usageMetadata"]);return null!=s&&uq(t,["usageMetadata"],s),t}(i)),null!=(r=uG(t,["error"]))&&uq(n,["error"],r),n})),uq(t,["inlinedResponses"],e)}let r=uG(e,["inlinedEmbedContentResponses","inlinedResponses"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>e)),uq(t,["inlinedEmbedContentResponses"],e)}return t}(dD(u))),t}function dV(e){var t,n;let i,r,l,o,s,a,u,d,c={},p=uG(e,["name"]);null!=p&&uq(c,["name"],p);let h=uG(e,["displayName"]);null!=h&&uq(c,["displayName"],h);let m=uG(e,["state"]);null!=m&&uq(c,["state"],dU(m));let f=uG(e,["error"]);null!=f&&uq(c,["error"],f);let g=uG(e,["createTime"]);null!=g&&uq(c,["createTime"],g);let y=uG(e,["startTime"]);null!=y&&uq(c,["startTime"],y);let v=uG(e,["endTime"]);null!=v&&uq(c,["endTime"],v);let x=uG(e,["updateTime"]);null!=x&&uq(c,["updateTime"],x);let b=uG(e,["model"]);null!=b&&uq(c,["model"],b);let E=uG(e,["inputConfig"]);null!=E&&uq(c,["src"],(i={},null!=(r=uG(n=E,["instancesFormat"]))&&uq(i,["format"],r),null!=(l=uG(n,["gcsSource","uris"]))&&uq(i,["gcsUri"],l),null!=(o=uG(n,["bigquerySource","inputUri"]))&&uq(i,["bigqueryUri"],o),i));let S=uG(e,["outputConfig"]);null!=S&&uq(c,["dest"],(t=dD(S),s={},null!=(a=uG(t,["predictionsFormat"]))&&uq(s,["format"],a),null!=(u=uG(t,["gcsDestination","outputUriPrefix"]))&&uq(s,["gcsUri"],u),null!=(d=uG(t,["bigqueryDestination","outputUri"]))&&uq(s,["bigqueryUri"],d),s));let w=uG(e,["completionStats"]);return null!=w&&uq(c,["completionStats"],w),c}function dF(e){let t={},n=uG(e,["parts"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>{var t;let n,i,r,l,o,s,a,u,d,c,p,h;return n={},null!=(i=uG(t=e,["mediaResolution"]))&&uq(n,["mediaResolution"],i),null!=(r=uG(t,["codeExecutionResult"]))&&uq(n,["codeExecutionResult"],r),null!=(l=uG(t,["executableCode"]))&&uq(n,["executableCode"],l),null!=(o=uG(t,["fileData"]))&&uq(n,["fileData"],function(e){let t={};if(void 0!==uG(e,["displayName"]))throw Error("displayName parameter is not supported in Gemini API.");let n=uG(e,["fileUri"]);null!=n&&uq(t,["fileUri"],n);let i=uG(e,["mimeType"]);return null!=i&&uq(t,["mimeType"],i),t}(o)),null!=(s=uG(t,["functionCall"]))&&uq(n,["functionCall"],function(e){let t={},n=uG(e,["id"]);null!=n&&uq(t,["id"],n);let i=uG(e,["args"]);null!=i&&uq(t,["args"],i);let r=uG(e,["name"]);if(null!=r&&uq(t,["name"],r),void 0!==uG(e,["partialArgs"]))throw Error("partialArgs parameter is not supported in Gemini API.");if(void 0!==uG(e,["willContinue"]))throw Error("willContinue parameter is not supported in Gemini API.");return t}(s)),null!=(a=uG(t,["functionResponse"]))&&uq(n,["functionResponse"],a),null!=(u=uG(t,["inlineData"]))&&uq(n,["inlineData"],function(e){let t={},n=uG(e,["data"]);if(null!=n&&uq(t,["data"],n),void 0!==uG(e,["displayName"]))throw Error("displayName parameter is not supported in Gemini API.");let i=uG(e,["mimeType"]);return null!=i&&uq(t,["mimeType"],i),t}(u)),null!=(d=uG(t,["text"]))&&uq(n,["text"],d),null!=(c=uG(t,["thought"]))&&uq(n,["thought"],c),null!=(p=uG(t,["thoughtSignature"]))&&uq(n,["thoughtSignature"],p),null!=(h=uG(t,["videoMetadata"]))&&uq(n,["videoMetadata"],h),n})),uq(t,["parts"],e)}let i=uG(e,["role"]);return null!=i&&uq(t,["role"],i),t}function dq(e,t){let n={},i=uG(t,["model"]);null!=i&&uq(n,["_url","model"],dd(e,i));let r=uG(t,["src"]);null!=r&&uq(n,["batch","inputConfig"],function(e,t){let n={};if(void 0!==uG(t,["format"]))throw Error("format parameter is not supported in Gemini API.");if(void 0!==uG(t,["gcsUri"]))throw Error("gcsUri parameter is not supported in Gemini API.");if(void 0!==uG(t,["bigqueryUri"]))throw Error("bigqueryUri parameter is not supported in Gemini API.");let i=uG(t,["fileName"]);null!=i&&uq(n,["fileName"],i);let r=uG(t,["inlinedRequests"]);if(null!=r){let t=r;Array.isArray(t)&&(t=t.map(t=>(function(e,t){let n={},i=uG(t,["model"]);null!=i&&uq(n,["request","model"],dd(e,i));let r=uG(t,["contents"]);if(null!=r){let e=dw(r);Array.isArray(e)&&(e=e.map(e=>dF(e))),uq(n,["request","contents"],e)}let l=uG(t,["metadata"]);null!=l&&uq(n,["metadata"],l);let o=uG(t,["config"]);return null!=o&&uq(n,["request","generationConfig"],function(e,t,n){var i;let r,l,o,s={},a=uG(t,["systemInstruction"]);void 0!==n&&null!=a&&uq(n,["systemInstruction"],dF(dE(a)));let u=uG(t,["temperature"]);null!=u&&uq(s,["temperature"],u);let d=uG(t,["topP"]);null!=d&&uq(s,["topP"],d);let c=uG(t,["topK"]);null!=c&&uq(s,["topK"],c);let p=uG(t,["candidateCount"]);null!=p&&uq(s,["candidateCount"],p);let h=uG(t,["maxOutputTokens"]);null!=h&&uq(s,["maxOutputTokens"],h);let m=uG(t,["stopSequences"]);null!=m&&uq(s,["stopSequences"],m);let f=uG(t,["responseLogprobs"]);null!=f&&uq(s,["responseLogprobs"],f);let g=uG(t,["logprobs"]);null!=g&&uq(s,["logprobs"],g);let y=uG(t,["presencePenalty"]);null!=y&&uq(s,["presencePenalty"],y);let v=uG(t,["frequencyPenalty"]);null!=v&&uq(s,["frequencyPenalty"],v);let x=uG(t,["seed"]);null!=x&&uq(s,["seed"],x);let b=uG(t,["responseMimeType"]);null!=b&&uq(s,["responseMimeType"],b);let E=uG(t,["responseSchema"]);null!=E&&uq(s,["responseSchema"],dT(E));let S=uG(t,["responseJsonSchema"]);if(null!=S&&uq(s,["responseJsonSchema"],S),void 0!==uG(t,["routingConfig"]))throw Error("routingConfig parameter is not supported in Gemini API.");if(void 0!==uG(t,["modelSelectionConfig"]))throw Error("modelSelectionConfig parameter is not supported in Gemini API.");let w=uG(t,["safetySettings"]);if(void 0!==n&&null!=w){let e=w;Array.isArray(e)&&(e=e.map(e=>(function(e){let t={},n=uG(e,["category"]);if(null!=n&&uq(t,["category"],n),void 0!==uG(e,["method"]))throw Error("method parameter is not supported in Gemini API.");let i=uG(e,["threshold"]);return null!=i&&uq(t,["threshold"],i),t})(e))),uq(n,["safetySettings"],e)}let T=uG(t,["tools"]);if(void 0!==n&&null!=T){let e=d_(T);Array.isArray(e)&&(e=e.map(e=>(function(e){let t={},n=uG(e,["functionDeclarations"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>e)),uq(t,["functionDeclarations"],e)}if(void 0!==uG(e,["retrieval"]))throw Error("retrieval parameter is not supported in Gemini API.");let i=uG(e,["googleSearchRetrieval"]);null!=i&&uq(t,["googleSearchRetrieval"],i);let r=uG(e,["computerUse"]);null!=r&&uq(t,["computerUse"],r);let l=uG(e,["fileSearch"]);null!=l&&uq(t,["fileSearch"],l);let o=uG(e,["codeExecution"]);if(null!=o&&uq(t,["codeExecution"],o),void 0!==uG(e,["enterpriseWebSearch"]))throw Error("enterpriseWebSearch parameter is not supported in Gemini API.");let s=uG(e,["googleMaps"]);null!=s&&uq(t,["googleMaps"],function(e){let t={};if(void 0!==uG(e,["authConfig"]))throw Error("authConfig parameter is not supported in Gemini API.");let n=uG(e,["enableWidget"]);return null!=n&&uq(t,["enableWidget"],n),t}(s));let a=uG(e,["googleSearch"]);null!=a&&uq(t,["googleSearch"],function(e){let t={};if(void 0!==uG(e,["excludeDomains"]))throw Error("excludeDomains parameter is not supported in Gemini API.");if(void 0!==uG(e,["blockingConfidence"]))throw Error("blockingConfidence parameter is not supported in Gemini API.");let n=uG(e,["timeRangeFilter"]);return null!=n&&uq(t,["timeRangeFilter"],n),t}(a));let u=uG(e,["urlContext"]);return null!=u&&uq(t,["urlContext"],u),t})(dI(e)))),uq(n,["tools"],e)}let A=uG(t,["toolConfig"]);if(void 0!==n&&null!=A&&uq(n,["toolConfig"],(r={},null!=(l=uG(i=A,["functionCallingConfig"]))&&uq(r,["functionCallingConfig"],function(e){let t={},n=uG(e,["mode"]);null!=n&&uq(t,["mode"],n);let i=uG(e,["allowedFunctionNames"]);if(null!=i&&uq(t,["allowedFunctionNames"],i),void 0!==uG(e,["streamFunctionCallArguments"]))throw Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}(l)),null!=(o=uG(i,["retrievalConfig"]))&&uq(r,["retrievalConfig"],o),r)),void 0!==uG(t,["labels"]))throw Error("labels parameter is not supported in Gemini API.");let C=uG(t,["cachedContent"]);void 0!==n&&null!=C&&uq(n,["cachedContent"],dO(e,C));let I=uG(t,["responseModalities"]);null!=I&&uq(s,["responseModalities"],I);let _=uG(t,["mediaResolution"]);null!=_&&uq(s,["mediaResolution"],_);let O=uG(t,["speechConfig"]);if(null!=O&&uq(s,["speechConfig"],dA(O)),void 0!==uG(t,["audioTimestamp"]))throw Error("audioTimestamp parameter is not supported in Gemini API.");let N=uG(t,["thinkingConfig"]);null!=N&&uq(s,["thinkingConfig"],N);let R=uG(t,["imageConfig"]);null!=R&&uq(s,["imageConfig"],function(e){let t={},n=uG(e,["aspectRatio"]);null!=n&&uq(t,["aspectRatio"],n);let i=uG(e,["imageSize"]);if(null!=i&&uq(t,["imageSize"],i),void 0!==uG(e,["outputMimeType"]))throw Error("outputMimeType parameter is not supported in Gemini API.");if(void 0!==uG(e,["outputCompressionQuality"]))throw Error("outputCompressionQuality parameter is not supported in Gemini API.");return t}(R));let P=uG(t,["enableEnhancedCivicAnswers"]);return null!=P&&uq(s,["enableEnhancedCivicAnswers"],P),s}(e,o,uG(n,["request"],{}))),n})(e,t))),uq(n,["requests","requests"],t)}return n}(e,dM(e,r)));let l=uG(t,["config"]);return null!=l&&function(e,t){let n=uG(e,["displayName"]);if(void 0!==t&&null!=n&&uq(t,["batch","displayName"],n),void 0!==uG(e,["dest"]))throw Error("dest parameter is not supported in Gemini API.")}(l,n),n}(eT=tI||(tI={})).PAGED_ITEM_BATCH_JOBS="batchJobs",eT.PAGED_ITEM_MODELS="models",eT.PAGED_ITEM_TUNING_JOBS="tuningJobs",eT.PAGED_ITEM_FILES="files",eT.PAGED_ITEM_CACHED_CONTENTS="cachedContents",eT.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",eT.PAGED_ITEM_DOCUMENTS="documents";class dG{constructor(e,t,n,i){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,n,i)}init(e,t,n){var i,r;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=null==t?void 0:t.sdkHttpResponse,this.idxInternal=0;let l={config:{}};(l=n&&0!==Object.keys(n).length?"object"==typeof n?Object.assign({},n):n:{config:{}}).config&&(l.config.pageToken=t.nextPageToken),this.paramsInternal=l,this.pageInternalSize=null!=(r=null==(i=l.config)?void 0:i.pageSize)?r:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(!this.hasNextPage())return{value:void 0,done:!0};else await this.nextPage();let e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw Error("No more pages to fetch.");let e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return(null==(e=this.params.config)?void 0:e.pageToken)!==void 0}}class dH extends uV{constructor(e){super(),this.apiClient=e,this.list=async(e={})=>new dG(tI.PAGED_ITEM_BATCH_JOBS,e=>this.listInternal(e),await this.listInternal(e),e),this.create=async e=>(this.apiClient.isVertexAI()&&(e.config=this.formatDestination(e.src,e.config)),this.createInternal(e)),this.createEmbeddings=async e=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(e)}}createInlinedGenerateContentRequest(e){let t=dq(this.apiClient,e),n=uF("{model}:batchGenerateContent",t._url),i=t.batch.inputConfig.requests,r=i.requests,l=[];for(let e of r){let t=Object.assign({},e);if(t.systemInstruction){let e=t.systemInstruction;delete t.systemInstruction;let n=t.request;n.systemInstruction=e,t.request=n}l.push(t)}return i.requests=l,delete t.config,delete t._url,delete t._query,{path:n,body:t}}getGcsUri(e){return"string"==typeof e?e.startsWith("gs://")?e:void 0:!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0?e.gcsUri[0]:void 0}getBigqueryUri(e){return"string"==typeof e?e.startsWith("bq://")?e:void 0:Array.isArray(e)?void 0:e.bigqueryUri}formatDestination(e,t){let n=t?Object.assign({},t):{},i=Date.now().toString();if(n.displayName||(n.displayName=`genaiBatchJob_${i}`),void 0===n.dest){let t=this.getGcsUri(e),r=this.getBigqueryUri(e);if(t)t.endsWith(".jsonl")?n.dest=`${t.slice(0,-6)}/dest`:n.dest=`${t}_dest_${i}`;else if(r)n.dest=`${r}_dest_${i}`;else throw Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return n}async createInternal(e){var t,n,i,r,l;let o="",s={};if(this.apiClient.isVertexAI()){let i,r,a,u,d,c,p=(l=this.apiClient,i={},null!=(r=uG(e,["model"]))&&uq(i,["model"],dd(l,r)),null!=(a=uG(e,["src"]))&&uq(i,["inputConfig"],function(e){let t={},n=uG(e,["format"]);null!=n&&uq(t,["instancesFormat"],n);let i=uG(e,["gcsUri"]);null!=i&&uq(t,["gcsSource","uris"],i);let r=uG(e,["bigqueryUri"]);if(null!=r&&uq(t,["bigquerySource","inputUri"],r),void 0!==uG(e,["fileName"]))throw Error("fileName parameter is not supported in Vertex AI.");if(void 0!==uG(e,["inlinedRequests"]))throw Error("inlinedRequests parameter is not supported in Vertex AI.");return t}(dM(l,a))),null!=(u=uG(e,["config"]))&&(d=uG(u,["displayName"]),void 0!==i&&null!=d&&uq(i,["displayName"],d),c=uG(u,["dest"]),void 0!==i&&null!=c&&uq(i,["outputConfig"],function(e){let t={},n=uG(e,["format"]);null!=n&&uq(t,["predictionsFormat"],n);let i=uG(e,["gcsUri"]);null!=i&&uq(t,["gcsDestination","outputUriPrefix"],i);let r=uG(e,["bigqueryUri"]);if(null!=r&&uq(t,["bigqueryDestination","outputUri"],r),void 0!==uG(e,["fileName"]))throw Error("fileName parameter is not supported in Vertex AI.");if(void 0!==uG(e,["inlinedResponses"]))throw Error("inlinedResponses parameter is not supported in Vertex AI.");if(void 0!==uG(e,["inlinedEmbedContentResponses"]))throw Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return t}(function(e){if("string"!=typeof e)return e;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw Error(`Unsupported destination: ${e}`)}(c)))),i);return o=uF("batchPredictionJobs",p._url),s=p._query,delete p._url,delete p._query,this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(p),httpMethod:"POST",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(n=e.config)?void 0:n.abortSignal}).then(e=>e.json()).then(e=>dV(e))}{let t=dq(this.apiClient,e);return o=uF("{model}:batchGenerateContent",t._url),s=t._query,delete t._url,delete t._query,this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(t),httpMethod:"POST",httpOptions:null==(i=e.config)?void 0:i.httpOptions,abortSignal:null==(r=e.config)?void 0:r.abortSignal}).then(e=>e.json()).then(e=>dL(e))}}async createEmbeddingsInternal(e){var t,n,i,r,l;let o="",s={};if(this.apiClient.isVertexAI())throw Error("This method is only supported by the Gemini Developer API.");{let a,u,d,c,p,h,m,f,g=(i=this.apiClient,c={},null!=(p=uG(e,["model"]))&&uq(c,["_url","model"],dd(i,p)),null!=(h=uG(e,["src"]))&&uq(c,["batch","inputConfig"],(r=i,a={},null!=(u=uG(l=h,["fileName"]))&&uq(a,["file_name"],u),null!=(d=uG(l,["inlinedRequests"]))&&uq(a,["requests"],function(e,t){let n={},i=uG(t,["contents"]);if(null!=i){let t=dS(e,i);Array.isArray(t)&&(t=t.map(e=>e)),uq(n,["requests[]","request","content"],t)}let r=uG(t,["config"]);return null!=r&&(uq(n,["_self"],function(e,t){let n=uG(e,["taskType"]);void 0!==t&&null!=n&&uq(t,["requests[]","taskType"],n);let i=uG(e,["title"]);void 0!==t&&null!=i&&uq(t,["requests[]","title"],i);let r=uG(e,["outputDimensionality"]);if(void 0!==t&&null!=r&&uq(t,["requests[]","outputDimensionality"],r),void 0!==uG(e,["mimeType"]))throw Error("mimeType parameter is not supported in Gemini API.");if(void 0!==uG(e,["autoTruncate"]))throw Error("autoTruncate parameter is not supported in Gemini API.");return{}}(r,n)),!function(e,t){for(let[n,i]of Object.entries(t)){let t=n.split("."),r=i.split("."),l=new Set,o=-1;for(let e=0;e<t.length;e++)if("*"===t[e]){o=e;break}if(-1!==o&&r.length>o)for(let e=o;e<r.length;e++){let t=r[e];"*"===t||t.endsWith("[]")||t.endsWith("[0]")||l.add(t)}!function e(t,n,i,r,l){if(r>=n.length||"object"!=typeof t||null===t)return;let o=n[r];if(o.endsWith("[]")){let s=o.slice(0,-2);if(s in t&&Array.isArray(t[s]))for(let o of t[s])e(o,n,i,r+1,l)}else if("*"===o){if("object"==typeof t&&null!==t&&!Array.isArray(t)){let e=Object.keys(t).filter(e=>!e.startsWith("_")&&!l.has(e)),n={};for(let i of e)n[i]=t[i];for(let[e,l]of Object.entries(n)){let n=[];for(let t of i.slice(r))"*"===t?n.push(e):n.push(t);uq(t,n,l)}for(let n of e)delete t[n]}}else o in t&&e(t[o],n,i,r+1,l)}(e,t,r,0,l)}}(n,{"requests[].*":"requests[].request.*"})),n}(r,d)),a)),null!=(m=uG(e,["config"]))&&(f=uG(m,["displayName"]),void 0!==c&&null!=f&&uq(c,["batch","displayName"],f)),c);return o=uF("{model}:asyncBatchEmbedContent",g._url),s=g._query,delete g._url,delete g._query,this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(g),httpMethod:"POST",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(n=e.config)?void 0:n.abortSignal}).then(e=>e.json()).then(e=>dL(e))}}async get(e){var t,n,i,r,l,o;let s="",a={};if(this.apiClient.isVertexAI()){let i,r,o=(l=this.apiClient,i={},null!=(r=uG(e,["name"]))&&uq(i,["_url","name"],dj(l,r)),i);return s=uF("batchPredictionJobs/{name}",o._url),a=o._query,delete o._url,delete o._query,this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(o),httpMethod:"GET",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(n=e.config)?void 0:n.abortSignal}).then(e=>e.json()).then(e=>dV(e))}{let t,n,l=(o=this.apiClient,t={},null!=(n=uG(e,["name"]))&&uq(t,["_url","name"],dj(o,n)),t);return s=uF("batches/{name}",l._url),a=l._query,delete l._url,delete l._query,this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"GET",httpOptions:null==(i=e.config)?void 0:i.httpOptions,abortSignal:null==(r=e.config)?void 0:r.abortSignal}).then(e=>e.json()).then(e=>dL(e))}}async cancel(e){var t,n,i,r,l,o;let s="",a={};if(this.apiClient.isVertexAI()){let i,r,o=(l=this.apiClient,i={},null!=(r=uG(e,["name"]))&&uq(i,["_url","name"],dj(l,r)),i);s=uF("batchPredictionJobs/{name}:cancel",o._url),a=o._query,delete o._url,delete o._query,await this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(o),httpMethod:"POST",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(n=e.config)?void 0:n.abortSignal})}else{let t,n,l=(o=this.apiClient,t={},null!=(n=uG(e,["name"]))&&uq(t,["_url","name"],dj(o,n)),t);s=uF("batches/{name}:cancel",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:null==(i=e.config)?void 0:i.httpOptions,abortSignal:null==(r=e.config)?void 0:r.abortSignal})}}async listInternal(e){var t,n,i,r;let l="",o={};if(this.apiClient.isVertexAI()){let i,r,s,a,u,d=(i={},null!=(r=uG(e,["config"]))&&(s=uG(r,["pageSize"]),void 0!==i&&null!=s&&uq(i,["_query","pageSize"],s),a=uG(r,["pageToken"]),void 0!==i&&null!=a&&uq(i,["_query","pageToken"],a),u=uG(r,["filter"]),void 0!==i&&null!=u&&uq(i,["_query","filter"],u)),i);return l=uF("batchPredictionJobs",d._url),o=d._query,delete d._url,delete d._query,this.apiClient.request({path:l,queryParams:o,body:JSON.stringify(d),httpMethod:"GET",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(n=e.config)?void 0:n.abortSignal}).then(e=>e.json().then(t=>(t.sdkHttpResponse={headers:e.headers},t))).then(e=>{let t=function(e){let t={},n=uG(e,["sdkHttpResponse"]);null!=n&&uq(t,["sdkHttpResponse"],n);let i=uG(e,["nextPageToken"]);null!=i&&uq(t,["nextPageToken"],i);let r=uG(e,["batchPredictionJobs"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>dV(e))),uq(t,["batchJobs"],e)}return t}(e),n=new dl;return Object.assign(n,t),n})}{let t,n,s=(t={},null!=(n=uG(e,["config"]))&&function(e,t){let n=uG(e,["pageSize"]);void 0!==t&&null!=n&&uq(t,["_query","pageSize"],n);let i=uG(e,["pageToken"]);if(void 0!==t&&null!=i&&uq(t,["_query","pageToken"],i),void 0!==uG(e,["filter"]))throw Error("filter parameter is not supported in Gemini API.")}(n,t),t);return l=uF("batches",s._url),o=s._query,delete s._url,delete s._query,this.apiClient.request({path:l,queryParams:o,body:JSON.stringify(s),httpMethod:"GET",httpOptions:null==(i=e.config)?void 0:i.httpOptions,abortSignal:null==(r=e.config)?void 0:r.abortSignal}).then(e=>e.json().then(t=>(t.sdkHttpResponse={headers:e.headers},t))).then(e=>{let t=function(e){let t={},n=uG(e,["sdkHttpResponse"]);null!=n&&uq(t,["sdkHttpResponse"],n);let i=uG(e,["nextPageToken"]);null!=i&&uq(t,["nextPageToken"],i);let r=uG(e,["operations"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>dL(e))),uq(t,["batchJobs"],e)}return t}(e),n=new dl;return Object.assign(n,t),n})}}async delete(e){var t,n,i,r,l,o;let s="",a={};if(this.apiClient.isVertexAI()){let i,r,o=(l=this.apiClient,i={},null!=(r=uG(e,["name"]))&&uq(i,["_url","name"],dj(l,r)),i);return s=uF("batchPredictionJobs/{name}",o._url),a=o._query,delete o._url,delete o._query,this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(o),httpMethod:"DELETE",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(n=e.config)?void 0:n.abortSignal}).then(e=>e.json().then(t=>(t.sdkHttpResponse={headers:e.headers},t))).then(e=>{let t,n,i,r,l;return t={},null!=(n=uG(e,["sdkHttpResponse"]))&&uq(t,["sdkHttpResponse"],n),null!=(i=uG(e,["name"]))&&uq(t,["name"],i),null!=(r=uG(e,["done"]))&&uq(t,["done"],r),null!=(l=uG(e,["error"]))&&uq(t,["error"],l),t})}{let t,n,l=(o=this.apiClient,t={},null!=(n=uG(e,["name"]))&&uq(t,["_url","name"],dj(o,n)),t);return s=uF("batches/{name}",l._url),a=l._query,delete l._url,delete l._query,this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:null==(i=e.config)?void 0:i.httpOptions,abortSignal:null==(r=e.config)?void 0:r.abortSignal}).then(e=>e.json().then(t=>(t.sdkHttpResponse={headers:e.headers},t))).then(e=>{let t,n,i,r,l;return t={},null!=(n=uG(e,["sdkHttpResponse"]))&&uq(t,["sdkHttpResponse"],n),null!=(i=uG(e,["name"]))&&uq(t,["name"],i),null!=(r=uG(e,["done"]))&&uq(t,["done"],r),null!=(l=uG(e,["error"]))&&uq(t,["error"],l),t})}}}function dB(e){let t={},n=uG(e,["parts"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>{var t;let n,i,r,l,o,s,a,u,d,c,p,h;return n={},null!=(i=uG(t=e,["mediaResolution"]))&&uq(n,["mediaResolution"],i),null!=(r=uG(t,["codeExecutionResult"]))&&uq(n,["codeExecutionResult"],r),null!=(l=uG(t,["executableCode"]))&&uq(n,["executableCode"],l),null!=(o=uG(t,["fileData"]))&&uq(n,["fileData"],function(e){let t={};if(void 0!==uG(e,["displayName"]))throw Error("displayName parameter is not supported in Gemini API.");let n=uG(e,["fileUri"]);null!=n&&uq(t,["fileUri"],n);let i=uG(e,["mimeType"]);return null!=i&&uq(t,["mimeType"],i),t}(o)),null!=(s=uG(t,["functionCall"]))&&uq(n,["functionCall"],function(e){let t={},n=uG(e,["id"]);null!=n&&uq(t,["id"],n);let i=uG(e,["args"]);null!=i&&uq(t,["args"],i);let r=uG(e,["name"]);if(null!=r&&uq(t,["name"],r),void 0!==uG(e,["partialArgs"]))throw Error("partialArgs parameter is not supported in Gemini API.");if(void 0!==uG(e,["willContinue"]))throw Error("willContinue parameter is not supported in Gemini API.");return t}(s)),null!=(a=uG(t,["functionResponse"]))&&uq(n,["functionResponse"],a),null!=(u=uG(t,["inlineData"]))&&uq(n,["inlineData"],function(e){let t={},n=uG(e,["data"]);if(null!=n&&uq(t,["data"],n),void 0!==uG(e,["displayName"]))throw Error("displayName parameter is not supported in Gemini API.");let i=uG(e,["mimeType"]);return null!=i&&uq(t,["mimeType"],i),t}(u)),null!=(d=uG(t,["text"]))&&uq(n,["text"],d),null!=(c=uG(t,["thought"]))&&uq(n,["thought"],c),null!=(p=uG(t,["thoughtSignature"]))&&uq(n,["thoughtSignature"],p),null!=(h=uG(t,["videoMetadata"]))&&uq(n,["videoMetadata"],h),n})),uq(t,["parts"],e)}let i=uG(e,["role"]);return null!=i&&uq(t,["role"],i),t}class d$ extends uV{constructor(e){super(),this.apiClient=e,this.list=async(e={})=>new dG(tI.PAGED_ITEM_CACHED_CONTENTS,e=>this.listInternal(e),await this.listInternal(e),e)}async create(e){var t,n,i,r,l,o;let s="",a={};if(this.apiClient.isVertexAI()){let i,r,o,u=(l=this.apiClient,i={},null!=(r=uG(e,["model"]))&&uq(i,["model"],dc(l,r)),null!=(o=uG(e,["config"]))&&function(e,t){let n=uG(e,["ttl"]);void 0!==t&&null!=n&&uq(t,["ttl"],n);let i=uG(e,["expireTime"]);void 0!==t&&null!=i&&uq(t,["expireTime"],i);let r=uG(e,["displayName"]);void 0!==t&&null!=r&&uq(t,["displayName"],r);let l=uG(e,["contents"]);if(void 0!==t&&null!=l){let e=dw(l);Array.isArray(e)&&(e=e.map(e=>e)),uq(t,["contents"],e)}let o=uG(e,["systemInstruction"]);void 0!==t&&null!=o&&uq(t,["systemInstruction"],dE(o));let s=uG(e,["tools"]);if(void 0!==t&&null!=s){let e=s;Array.isArray(e)&&(e=e.map(e=>(function(e){let t={},n=uG(e,["functionDeclarations"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>(function(e){let t={};if(void 0!==uG(e,["behavior"]))throw Error("behavior parameter is not supported in Vertex AI.");let n=uG(e,["description"]);null!=n&&uq(t,["description"],n);let i=uG(e,["name"]);null!=i&&uq(t,["name"],i);let r=uG(e,["parameters"]);null!=r&&uq(t,["parameters"],r);let l=uG(e,["parametersJsonSchema"]);null!=l&&uq(t,["parametersJsonSchema"],l);let o=uG(e,["response"]);null!=o&&uq(t,["response"],o);let s=uG(e,["responseJsonSchema"]);return null!=s&&uq(t,["responseJsonSchema"],s),t})(e))),uq(t,["functionDeclarations"],e)}let i=uG(e,["retrieval"]);null!=i&&uq(t,["retrieval"],i);let r=uG(e,["googleSearchRetrieval"]);null!=r&&uq(t,["googleSearchRetrieval"],r);let l=uG(e,["computerUse"]);if(null!=l&&uq(t,["computerUse"],l),void 0!==uG(e,["fileSearch"]))throw Error("fileSearch parameter is not supported in Vertex AI.");let o=uG(e,["codeExecution"]);null!=o&&uq(t,["codeExecution"],o);let s=uG(e,["enterpriseWebSearch"]);null!=s&&uq(t,["enterpriseWebSearch"],s);let a=uG(e,["googleMaps"]);null!=a&&uq(t,["googleMaps"],a);let u=uG(e,["googleSearch"]);null!=u&&uq(t,["googleSearch"],u);let d=uG(e,["urlContext"]);return null!=d&&uq(t,["urlContext"],d),t})(e))),uq(t,["tools"],e)}let a=uG(e,["toolConfig"]);void 0!==t&&null!=a&&uq(t,["toolConfig"],a);let u=uG(e,["kmsKeyName"]);void 0!==t&&null!=u&&uq(t,["encryption_spec","kmsKeyName"],u)}(o,i),i);return s=uF("cachedContents",u._url),a=u._query,delete u._url,delete u._query,this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(n=e.config)?void 0:n.abortSignal}).then(e=>e.json()).then(e=>e)}{let t,n,l,u=(o=this.apiClient,t={},null!=(n=uG(e,["model"]))&&uq(t,["model"],dc(o,n)),null!=(l=uG(e,["config"]))&&function(e,t){var n;let i,r,l,o=uG(e,["ttl"]);void 0!==t&&null!=o&&uq(t,["ttl"],o);let s=uG(e,["expireTime"]);void 0!==t&&null!=s&&uq(t,["expireTime"],s);let a=uG(e,["displayName"]);void 0!==t&&null!=a&&uq(t,["displayName"],a);let u=uG(e,["contents"]);if(void 0!==t&&null!=u){let e=dw(u);Array.isArray(e)&&(e=e.map(e=>dB(e))),uq(t,["contents"],e)}let d=uG(e,["systemInstruction"]);void 0!==t&&null!=d&&uq(t,["systemInstruction"],dB(dE(d)));let c=uG(e,["tools"]);if(void 0!==t&&null!=c){let e=c;Array.isArray(e)&&(e=e.map(e=>(function(e){let t={},n=uG(e,["functionDeclarations"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>e)),uq(t,["functionDeclarations"],e)}if(void 0!==uG(e,["retrieval"]))throw Error("retrieval parameter is not supported in Gemini API.");let i=uG(e,["googleSearchRetrieval"]);null!=i&&uq(t,["googleSearchRetrieval"],i);let r=uG(e,["computerUse"]);null!=r&&uq(t,["computerUse"],r);let l=uG(e,["fileSearch"]);null!=l&&uq(t,["fileSearch"],l);let o=uG(e,["codeExecution"]);if(null!=o&&uq(t,["codeExecution"],o),void 0!==uG(e,["enterpriseWebSearch"]))throw Error("enterpriseWebSearch parameter is not supported in Gemini API.");let s=uG(e,["googleMaps"]);null!=s&&uq(t,["googleMaps"],function(e){let t={};if(void 0!==uG(e,["authConfig"]))throw Error("authConfig parameter is not supported in Gemini API.");let n=uG(e,["enableWidget"]);return null!=n&&uq(t,["enableWidget"],n),t}(s));let a=uG(e,["googleSearch"]);null!=a&&uq(t,["googleSearch"],function(e){let t={};if(void 0!==uG(e,["excludeDomains"]))throw Error("excludeDomains parameter is not supported in Gemini API.");if(void 0!==uG(e,["blockingConfidence"]))throw Error("blockingConfidence parameter is not supported in Gemini API.");let n=uG(e,["timeRangeFilter"]);return null!=n&&uq(t,["timeRangeFilter"],n),t}(a));let u=uG(e,["urlContext"]);return null!=u&&uq(t,["urlContext"],u),t})(e))),uq(t,["tools"],e)}let p=uG(e,["toolConfig"]);if(void 0!==t&&null!=p&&uq(t,["toolConfig"],(i={},null!=(r=uG(n=p,["functionCallingConfig"]))&&uq(i,["functionCallingConfig"],function(e){let t={},n=uG(e,["mode"]);null!=n&&uq(t,["mode"],n);let i=uG(e,["allowedFunctionNames"]);if(null!=i&&uq(t,["allowedFunctionNames"],i),void 0!==uG(e,["streamFunctionCallArguments"]))throw Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}(r)),null!=(l=uG(n,["retrievalConfig"]))&&uq(i,["retrievalConfig"],l),i)),void 0!==uG(e,["kmsKeyName"]))throw Error("kmsKeyName parameter is not supported in Gemini API.")}(l,t),t);return s=uF("cachedContents",u._url),a=u._query,delete u._url,delete u._query,this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:null==(i=e.config)?void 0:i.httpOptions,abortSignal:null==(r=e.config)?void 0:r.abortSignal}).then(e=>e.json()).then(e=>e)}}async get(e){var t,n,i,r,l,o;let s="",a={};if(this.apiClient.isVertexAI()){let i,r,o=(l=this.apiClient,i={},null!=(r=uG(e,["name"]))&&uq(i,["_url","name"],dO(l,r)),i);return s=uF("{name}",o._url),a=o._query,delete o._url,delete o._query,this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(o),httpMethod:"GET",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(n=e.config)?void 0:n.abortSignal}).then(e=>e.json()).then(e=>e)}{let t,n,l=(o=this.apiClient,t={},null!=(n=uG(e,["name"]))&&uq(t,["_url","name"],dO(o,n)),t);return s=uF("{name}",l._url),a=l._query,delete l._url,delete l._query,this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"GET",httpOptions:null==(i=e.config)?void 0:i.httpOptions,abortSignal:null==(r=e.config)?void 0:r.abortSignal}).then(e=>e.json()).then(e=>e)}}async delete(e){var t,n,i,r,l,o;let s="",a={};if(this.apiClient.isVertexAI()){let i,r,o=(l=this.apiClient,i={},null!=(r=uG(e,["name"]))&&uq(i,["_url","name"],dO(l,r)),i);return s=uF("{name}",o._url),a=o._query,delete o._url,delete o._query,this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(o),httpMethod:"DELETE",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(n=e.config)?void 0:n.abortSignal}).then(e=>e.json().then(t=>(t.sdkHttpResponse={headers:e.headers},t))).then(e=>{let t,n,i=(t={},null!=(n=uG(e,["sdkHttpResponse"]))&&uq(t,["sdkHttpResponse"],n),t),r=new u6;return Object.assign(r,i),r})}{let t,n,l=(o=this.apiClient,t={},null!=(n=uG(e,["name"]))&&uq(t,["_url","name"],dO(o,n)),t);return s=uF("{name}",l._url),a=l._query,delete l._url,delete l._query,this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:null==(i=e.config)?void 0:i.httpOptions,abortSignal:null==(r=e.config)?void 0:r.abortSignal}).then(e=>e.json().then(t=>(t.sdkHttpResponse={headers:e.headers},t))).then(e=>{let t,n,i=(t={},null!=(n=uG(e,["sdkHttpResponse"]))&&uq(t,["sdkHttpResponse"],n),t),r=new u6;return Object.assign(r,i),r})}}async update(e){var t,n,i,r,l,o;let s="",a={};if(this.apiClient.isVertexAI()){let i,r,o,u,d,c=(l=this.apiClient,i={},null!=(r=uG(e,["name"]))&&uq(i,["_url","name"],dO(l,r)),null!=(o=uG(e,["config"]))&&(u=uG(o,["ttl"]),void 0!==i&&null!=u&&uq(i,["ttl"],u),d=uG(o,["expireTime"]),void 0!==i&&null!=d&&uq(i,["expireTime"],d)),i);return s=uF("{name}",c._url),a=c._query,delete c._url,delete c._query,this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(n=e.config)?void 0:n.abortSignal}).then(e=>e.json()).then(e=>e)}{let t,n,l,u,d,c=(o=this.apiClient,t={},null!=(n=uG(e,["name"]))&&uq(t,["_url","name"],dO(o,n)),null!=(l=uG(e,["config"]))&&(u=uG(l,["ttl"]),void 0!==t&&null!=u&&uq(t,["ttl"],u),d=uG(l,["expireTime"]),void 0!==t&&null!=d&&uq(t,["expireTime"],d)),t);return s=uF("{name}",c._url),a=c._query,delete c._url,delete c._query,this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:null==(i=e.config)?void 0:i.httpOptions,abortSignal:null==(r=e.config)?void 0:r.abortSignal}).then(e=>e.json()).then(e=>e)}}async listInternal(e){var t,n,i,r;let l="",o={};if(this.apiClient.isVertexAI()){let i,r,s,a,u=(i={},null!=(r=uG(e,["config"]))&&(s=uG(r,["pageSize"]),void 0!==i&&null!=s&&uq(i,["_query","pageSize"],s),a=uG(r,["pageToken"]),void 0!==i&&null!=a&&uq(i,["_query","pageToken"],a)),i);return l=uF("cachedContents",u._url),o=u._query,delete u._url,delete u._query,this.apiClient.request({path:l,queryParams:o,body:JSON.stringify(u),httpMethod:"GET",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(n=e.config)?void 0:n.abortSignal}).then(e=>e.json().then(t=>(t.sdkHttpResponse={headers:e.headers},t))).then(e=>{let t=function(e){let t={},n=uG(e,["sdkHttpResponse"]);null!=n&&uq(t,["sdkHttpResponse"],n);let i=uG(e,["nextPageToken"]);null!=i&&uq(t,["nextPageToken"],i);let r=uG(e,["cachedContents"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>e)),uq(t,["cachedContents"],e)}return t}(e),n=new u8;return Object.assign(n,t),n})}{let t,n,s,a,u=(t={},null!=(n=uG(e,["config"]))&&(s=uG(n,["pageSize"]),void 0!==t&&null!=s&&uq(t,["_query","pageSize"],s),a=uG(n,["pageToken"]),void 0!==t&&null!=a&&uq(t,["_query","pageToken"],a)),t);return l=uF("cachedContents",u._url),o=u._query,delete u._url,delete u._query,this.apiClient.request({path:l,queryParams:o,body:JSON.stringify(u),httpMethod:"GET",httpOptions:null==(i=e.config)?void 0:i.httpOptions,abortSignal:null==(r=e.config)?void 0:r.abortSignal}).then(e=>e.json().then(t=>(t.sdkHttpResponse={headers:e.headers},t))).then(e=>{let t=function(e){let t={},n=uG(e,["sdkHttpResponse"]);null!=n&&uq(t,["sdkHttpResponse"],n);let i=uG(e,["nextPageToken"]);null!=i&&uq(t,["nextPageToken"],i);let r=uG(e,["cachedContents"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>e)),uq(t,["cachedContents"],e)}return t}(e),n=new u8;return Object.assign(n,t),n})}}}function dz(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>t.indexOf(i)&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)0>t.indexOf(i[r])&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n}function dJ(e){return this instanceof dJ?(this.v=e,this):new dJ(e)}function dW(e,t,n){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var i,r=n.apply(e,t||[]),l=[];return i=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),o("next"),o("throw"),o("return",function(e){return function(t){return Promise.resolve(t).then(e,u)}}),i[Symbol.asyncIterator]=function(){return this},i;function o(e,t){r[e]&&(i[e]=function(t){return new Promise(function(n,i){l.push([e,t,n,i])>1||s(e,t)})},t&&(i[e]=t(i[e])))}function s(e,t){try{var n;(n=r[e](t)).value instanceof dJ?Promise.resolve(n.value.v).then(a,u):d(l[0][2],n)}catch(e){d(l[0][3],e)}}function a(e){s("next",e)}function u(e){s("throw",e)}function d(e,t){e(t),l.shift(),l.length&&s(l[0][0],l[0][1])}}function dY(e){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(n){t[n]=e[n]&&function(t){return new Promise(function(i,r){var l,o,s;l=i,o=r,s=(t=e[n](t)).done,Promise.resolve(t.value).then(function(e){l({value:e,done:s})},o)})}}}function dK(e){if(void 0===e.parts||0===e.parts.length)return!1;for(let t of e.parts)if(void 0===t||0===Object.keys(t).length)return!1;return!0}function dX(e){if(void 0===e||0===e.length)return[];let t=[],n=e.length,i=0;for(;i<n;)if("user"===e[i].role)t.push(e[i]),i++;else{let r=[],l=!0;for(;i<n&&"model"===e[i].role;)r.push(e[i]),l&&!dK(e[i])&&(l=!1),i++;l?t.push(...r):t.pop()}return t}"function"==typeof SuppressedError&&SuppressedError;class dQ{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new dZ(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class dZ{constructor(e,t,n,i={},r=[]){this.apiClient=e,this.modelsModule=t,this.model=n,this.config=i,this.history=r,this.sendPromise=Promise.resolve(),function(e){if(0!==e.length){for(let t of e)if("user"!==t.role&&"model"!==t.role)throw Error(`Role must be user or model, but got ${t.role}.`)}}(r)}async sendMessage(e){var t;await this.sendPromise;let n=dE(e.message),i=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(n),config:null!=(t=e.config)?t:this.config});return this.sendPromise=(async()=>{var e,t,r;let l=await i,o=null==(t=null==(e=l.candidates)?void 0:e[0])?void 0:t.content,s=l.automaticFunctionCallingHistory,a=this.getHistory(!0).length,u=[];null!=s&&(u=null!=(r=s.slice(a))?r:[]),this.recordHistory(n,o?[o]:[],u)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),i}async sendMessageStream(e){var t;await this.sendPromise;let n=dE(e.message),i=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(n),config:null!=(t=e.config)?t:this.config});this.sendPromise=i.then(()=>void 0).catch(()=>void 0);let r=await i;return this.processStreamResponse(r,n)}getHistory(e=!1){return structuredClone(e?dX(this.history):this.history)}processStreamResponse(e,t){return dW(this,arguments,function*(){let n=[];try{for(var i,r,l,o,s,a,u,d=!0,c=dY(e);!(i=(u=yield dJ(c.next())).done);d=!0){if(o=u.value,d=!1,function(e){var t;if(void 0==e.candidates||0===e.candidates.length)return!1;let n=null==(t=e.candidates[0])?void 0:t.content;return void 0!==n&&dK(n)}(o)){let e=null==(a=null==(s=o.candidates)?void 0:s[0])?void 0:a.content;void 0!==e&&n.push(e)}yield yield dJ(o)}}catch(e){r={error:e}}finally{try{!d&&!i&&(l=c.return)&&(yield dJ(l.call(c)))}finally{if(r)throw r.error}}this.recordHistory(t,n)})}recordHistory(e,t,n){let i=[];t.length>0&&t.every(e=>void 0!==e.role)?i=t:i.push({role:"model",parts:[]}),n&&n.length>0?this.history.push(...dX(n)):this.history.push(e),this.history.push(...i)}}class d0 extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,d0.prototype)}}class d1 extends uV{constructor(e){super(),this.apiClient=e,this.list=async(e={})=>new dG(tI.PAGED_ITEM_FILES,e=>this.listInternal(e),await this.listInternal(e),e)}async upload(e){if(this.apiClient.isVertexAI())throw Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(e=>e)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,n;let i="",r={};if(this.apiClient.isVertexAI())throw Error("This method is only supported by the Gemini Developer API.");{let l,o,s,a,u=(l={},null!=(o=uG(e,["config"]))&&(s=uG(o,["pageSize"]),void 0!==l&&null!=s&&uq(l,["_query","pageSize"],s),a=uG(o,["pageToken"]),void 0!==l&&null!=a&&uq(l,["_query","pageToken"],a)),l);return i=uF("files",u._url),r=u._query,delete u._url,delete u._query,this.apiClient.request({path:i,queryParams:r,body:JSON.stringify(u),httpMethod:"GET",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(n=e.config)?void 0:n.abortSignal}).then(e=>e.json().then(t=>(t.sdkHttpResponse={headers:e.headers},t))).then(e=>{let t=function(e){let t={},n=uG(e,["sdkHttpResponse"]);null!=n&&uq(t,["sdkHttpResponse"],n);let i=uG(e,["nextPageToken"]);null!=i&&uq(t,["nextPageToken"],i);let r=uG(e,["files"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>e)),uq(t,["files"],e)}return t}(e),n=new dn;return Object.assign(n,t),n})}}async createInternal(e){var t,n;let i="",r={};if(this.apiClient.isVertexAI())throw Error("This method is only supported by the Gemini Developer API.");{let l,o,s=(l={},null!=(o=uG(e,["file"]))&&uq(l,["file"],o),l);return i=uF("upload/v1beta/files",s._url),r=s._query,delete s._url,delete s._query,this.apiClient.request({path:i,queryParams:r,body:JSON.stringify(s),httpMethod:"POST",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(n=e.config)?void 0:n.abortSignal}).then(e=>e.json()).then(e=>{let t,n,i=(t={},null!=(n=uG(e,["sdkHttpResponse"]))&&uq(t,["sdkHttpResponse"],n),t),r=new di;return Object.assign(r,i),r})}}async get(e){var t,n;let i="",r={};if(this.apiClient.isVertexAI())throw Error("This method is only supported by the Gemini Developer API.");{let l,o,s=(l={},null!=(o=uG(e,["name"]))&&uq(l,["_url","file"],dR(o)),l);return i=uF("files/{file}",s._url),r=s._query,delete s._url,delete s._query,this.apiClient.request({path:i,queryParams:r,body:JSON.stringify(s),httpMethod:"GET",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(n=e.config)?void 0:n.abortSignal}).then(e=>e.json()).then(e=>e)}}async delete(e){var t,n;let i="",r={};if(this.apiClient.isVertexAI())throw Error("This method is only supported by the Gemini Developer API.");{let l,o,s=(l={},null!=(o=uG(e,["name"]))&&uq(l,["_url","file"],dR(o)),l);return i=uF("files/{file}",s._url),r=s._query,delete s._url,delete s._query,this.apiClient.request({path:i,queryParams:r,body:JSON.stringify(s),httpMethod:"DELETE",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(n=e.config)?void 0:n.abortSignal}).then(e=>e.json().then(t=>(t.sdkHttpResponse={headers:e.headers},t))).then(e=>{let t,n,i=(t={},null!=(n=uG(e,["sdkHttpResponse"]))&&uq(t,["sdkHttpResponse"],n),t),r=new dr;return Object.assign(r,i),r})}}}function d2(e){let t={},n=uG(e,["data"]);if(null!=n&&uq(t,["data"],n),void 0!==uG(e,["displayName"]))throw Error("displayName parameter is not supported in Gemini API.");let i=uG(e,["mimeType"]);return null!=i&&uq(t,["mimeType"],i),t}function d5(e){let t={},n=uG(e,["parts"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>{var t;let n,i,r,l,o,s,a,u,d,c,p,h;return n={},null!=(i=uG(t=e,["mediaResolution"]))&&uq(n,["mediaResolution"],i),null!=(r=uG(t,["codeExecutionResult"]))&&uq(n,["codeExecutionResult"],r),null!=(l=uG(t,["executableCode"]))&&uq(n,["executableCode"],l),null!=(o=uG(t,["fileData"]))&&uq(n,["fileData"],function(e){let t={};if(void 0!==uG(e,["displayName"]))throw Error("displayName parameter is not supported in Gemini API.");let n=uG(e,["fileUri"]);null!=n&&uq(t,["fileUri"],n);let i=uG(e,["mimeType"]);return null!=i&&uq(t,["mimeType"],i),t}(o)),null!=(s=uG(t,["functionCall"]))&&uq(n,["functionCall"],function(e){let t={},n=uG(e,["id"]);null!=n&&uq(t,["id"],n);let i=uG(e,["args"]);null!=i&&uq(t,["args"],i);let r=uG(e,["name"]);if(null!=r&&uq(t,["name"],r),void 0!==uG(e,["partialArgs"]))throw Error("partialArgs parameter is not supported in Gemini API.");if(void 0!==uG(e,["willContinue"]))throw Error("willContinue parameter is not supported in Gemini API.");return t}(s)),null!=(a=uG(t,["functionResponse"]))&&uq(n,["functionResponse"],a),null!=(u=uG(t,["inlineData"]))&&uq(n,["inlineData"],function(e){let t={},n=uG(e,["data"]);if(null!=n&&uq(t,["data"],n),void 0!==uG(e,["displayName"]))throw Error("displayName parameter is not supported in Gemini API.");let i=uG(e,["mimeType"]);return null!=i&&uq(t,["mimeType"],i),t}(u)),null!=(d=uG(t,["text"]))&&uq(n,["text"],d),null!=(c=uG(t,["thought"]))&&uq(n,["thought"],c),null!=(p=uG(t,["thoughtSignature"]))&&uq(n,["thoughtSignature"],p),null!=(h=uG(t,["videoMetadata"]))&&uq(n,["videoMetadata"],h),n})),uq(t,["parts"],e)}let i=uG(e,["role"]);return null!=i&&uq(t,["role"],i),t}function d4(e,t){let n={},i=uG(t,["model"]);null!=i&&uq(n,["_url","model"],dd(e,i));let r=uG(t,["contents"]);if(null!=r){let e=dw(r);Array.isArray(e)&&(e=e.map(e=>d5(e))),uq(n,["contents"],e)}let l=uG(t,["config"]);return null!=l&&uq(n,["generationConfig"],function(e,t,n){var i;let r,l,o,s={},a=uG(t,["systemInstruction"]);void 0!==n&&null!=a&&uq(n,["systemInstruction"],d5(dE(a)));let u=uG(t,["temperature"]);null!=u&&uq(s,["temperature"],u);let d=uG(t,["topP"]);null!=d&&uq(s,["topP"],d);let c=uG(t,["topK"]);null!=c&&uq(s,["topK"],c);let p=uG(t,["candidateCount"]);null!=p&&uq(s,["candidateCount"],p);let h=uG(t,["maxOutputTokens"]);null!=h&&uq(s,["maxOutputTokens"],h);let m=uG(t,["stopSequences"]);null!=m&&uq(s,["stopSequences"],m);let f=uG(t,["responseLogprobs"]);null!=f&&uq(s,["responseLogprobs"],f);let g=uG(t,["logprobs"]);null!=g&&uq(s,["logprobs"],g);let y=uG(t,["presencePenalty"]);null!=y&&uq(s,["presencePenalty"],y);let v=uG(t,["frequencyPenalty"]);null!=v&&uq(s,["frequencyPenalty"],v);let x=uG(t,["seed"]);null!=x&&uq(s,["seed"],x);let b=uG(t,["responseMimeType"]);null!=b&&uq(s,["responseMimeType"],b);let E=uG(t,["responseSchema"]);null!=E&&uq(s,["responseSchema"],dT(E));let S=uG(t,["responseJsonSchema"]);if(null!=S&&uq(s,["responseJsonSchema"],S),void 0!==uG(t,["routingConfig"]))throw Error("routingConfig parameter is not supported in Gemini API.");if(void 0!==uG(t,["modelSelectionConfig"]))throw Error("modelSelectionConfig parameter is not supported in Gemini API.");let w=uG(t,["safetySettings"]);if(void 0!==n&&null!=w){let e=w;Array.isArray(e)&&(e=e.map(e=>(function(e){let t={},n=uG(e,["category"]);if(null!=n&&uq(t,["category"],n),void 0!==uG(e,["method"]))throw Error("method parameter is not supported in Gemini API.");let i=uG(e,["threshold"]);return null!=i&&uq(t,["threshold"],i),t})(e))),uq(n,["safetySettings"],e)}let T=uG(t,["tools"]);if(void 0!==n&&null!=T){let e=d_(T);Array.isArray(e)&&(e=e.map(e=>(function(e){let t={},n=uG(e,["functionDeclarations"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>e)),uq(t,["functionDeclarations"],e)}if(void 0!==uG(e,["retrieval"]))throw Error("retrieval parameter is not supported in Gemini API.");let i=uG(e,["googleSearchRetrieval"]);null!=i&&uq(t,["googleSearchRetrieval"],i);let r=uG(e,["computerUse"]);null!=r&&uq(t,["computerUse"],r);let l=uG(e,["fileSearch"]);null!=l&&uq(t,["fileSearch"],l);let o=uG(e,["codeExecution"]);if(null!=o&&uq(t,["codeExecution"],o),void 0!==uG(e,["enterpriseWebSearch"]))throw Error("enterpriseWebSearch parameter is not supported in Gemini API.");let s=uG(e,["googleMaps"]);null!=s&&uq(t,["googleMaps"],function(e){let t={};if(void 0!==uG(e,["authConfig"]))throw Error("authConfig parameter is not supported in Gemini API.");let n=uG(e,["enableWidget"]);return null!=n&&uq(t,["enableWidget"],n),t}(s));let a=uG(e,["googleSearch"]);null!=a&&uq(t,["googleSearch"],function(e){let t={};if(void 0!==uG(e,["excludeDomains"]))throw Error("excludeDomains parameter is not supported in Gemini API.");if(void 0!==uG(e,["blockingConfidence"]))throw Error("blockingConfidence parameter is not supported in Gemini API.");let n=uG(e,["timeRangeFilter"]);return null!=n&&uq(t,["timeRangeFilter"],n),t}(a));let u=uG(e,["urlContext"]);return null!=u&&uq(t,["urlContext"],u),t})(dI(e)))),uq(n,["tools"],e)}let A=uG(t,["toolConfig"]);if(void 0!==n&&null!=A&&uq(n,["toolConfig"],(r={},null!=(l=uG(i=A,["functionCallingConfig"]))&&uq(r,["functionCallingConfig"],function(e){let t={},n=uG(e,["mode"]);null!=n&&uq(t,["mode"],n);let i=uG(e,["allowedFunctionNames"]);if(null!=i&&uq(t,["allowedFunctionNames"],i),void 0!==uG(e,["streamFunctionCallArguments"]))throw Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}(l)),null!=(o=uG(i,["retrievalConfig"]))&&uq(r,["retrievalConfig"],o),r)),void 0!==uG(t,["labels"]))throw Error("labels parameter is not supported in Gemini API.");let C=uG(t,["cachedContent"]);void 0!==n&&null!=C&&uq(n,["cachedContent"],dO(e,C));let I=uG(t,["responseModalities"]);null!=I&&uq(s,["responseModalities"],I);let _=uG(t,["mediaResolution"]);null!=_&&uq(s,["mediaResolution"],_);let O=uG(t,["speechConfig"]);if(null!=O&&uq(s,["speechConfig"],dA(O)),void 0!==uG(t,["audioTimestamp"]))throw Error("audioTimestamp parameter is not supported in Gemini API.");let N=uG(t,["thinkingConfig"]);null!=N&&uq(s,["thinkingConfig"],N);let R=uG(t,["imageConfig"]);null!=R&&uq(s,["imageConfig"],function(e){let t={},n=uG(e,["aspectRatio"]);null!=n&&uq(t,["aspectRatio"],n);let i=uG(e,["imageSize"]);if(null!=i&&uq(t,["imageSize"],i),void 0!==uG(e,["outputMimeType"]))throw Error("outputMimeType parameter is not supported in Gemini API.");if(void 0!==uG(e,["outputCompressionQuality"]))throw Error("outputCompressionQuality parameter is not supported in Gemini API.");return t}(R));let P=uG(t,["enableEnhancedCivicAnswers"]);return null!=P&&uq(s,["enableEnhancedCivicAnswers"],P),s}(e,l,n)),n}function d3(e,t){let n={},i=uG(t,["model"]);null!=i&&uq(n,["_url","model"],dd(e,i));let r=uG(t,["contents"]);if(null!=r){let e=dw(r);Array.isArray(e)&&(e=e.map(e=>e)),uq(n,["contents"],e)}let l=uG(t,["config"]);return null!=l&&uq(n,["generationConfig"],function(e,t,n){var i;let r,l,o,s,a,u={},d=uG(t,["systemInstruction"]);void 0!==n&&null!=d&&uq(n,["systemInstruction"],dE(d));let c=uG(t,["temperature"]);null!=c&&uq(u,["temperature"],c);let p=uG(t,["topP"]);null!=p&&uq(u,["topP"],p);let h=uG(t,["topK"]);null!=h&&uq(u,["topK"],h);let m=uG(t,["candidateCount"]);null!=m&&uq(u,["candidateCount"],m);let f=uG(t,["maxOutputTokens"]);null!=f&&uq(u,["maxOutputTokens"],f);let g=uG(t,["stopSequences"]);null!=g&&uq(u,["stopSequences"],g);let y=uG(t,["responseLogprobs"]);null!=y&&uq(u,["responseLogprobs"],y);let v=uG(t,["logprobs"]);null!=v&&uq(u,["logprobs"],v);let x=uG(t,["presencePenalty"]);null!=x&&uq(u,["presencePenalty"],x);let b=uG(t,["frequencyPenalty"]);null!=b&&uq(u,["frequencyPenalty"],b);let E=uG(t,["seed"]);null!=E&&uq(u,["seed"],E);let S=uG(t,["responseMimeType"]);null!=S&&uq(u,["responseMimeType"],S);let w=uG(t,["responseSchema"]);null!=w&&uq(u,["responseSchema"],dT(w));let T=uG(t,["responseJsonSchema"]);null!=T&&uq(u,["responseJsonSchema"],T);let A=uG(t,["routingConfig"]);null!=A&&uq(u,["routingConfig"],A);let C=uG(t,["modelSelectionConfig"]);null!=C&&uq(u,["modelConfig"],C);let I=uG(t,["safetySettings"]);if(void 0!==n&&null!=I){let e=I;Array.isArray(e)&&(e=e.map(e=>e)),uq(n,["safetySettings"],e)}let _=uG(t,["tools"]);if(void 0!==n&&null!=_){let e=d_(_);Array.isArray(e)&&(e=e.map(e=>co(dI(e)))),uq(n,["tools"],e)}let O=uG(t,["toolConfig"]);void 0!==n&&null!=O&&uq(n,["toolConfig"],O);let N=uG(t,["labels"]);void 0!==n&&null!=N&&uq(n,["labels"],N);let R=uG(t,["cachedContent"]);void 0!==n&&null!=R&&uq(n,["cachedContent"],dO(e,R));let P=uG(t,["responseModalities"]);null!=P&&uq(u,["responseModalities"],P);let k=uG(t,["mediaResolution"]);null!=k&&uq(u,["mediaResolution"],k);let M=uG(t,["speechConfig"]);null!=M&&uq(u,["speechConfig"],dA(M));let D=uG(t,["audioTimestamp"]);null!=D&&uq(u,["audioTimestamp"],D);let j=uG(t,["thinkingConfig"]);null!=j&&uq(u,["thinkingConfig"],j);let U=uG(t,["imageConfig"]);if(null!=U&&uq(u,["imageConfig"],(r={},null!=(l=uG(i=U,["aspectRatio"]))&&uq(r,["aspectRatio"],l),null!=(o=uG(i,["imageSize"]))&&uq(r,["imageSize"],o),null!=(s=uG(i,["outputMimeType"]))&&uq(r,["imageOutputOptions","mimeType"],s),null!=(a=uG(i,["outputCompressionQuality"]))&&uq(r,["imageOutputOptions","compressionQuality"],a),r)),void 0!==uG(t,["enableEnhancedCivicAnswers"]))throw Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return u}(e,l,n)),n}function d6(e){let t={},n=uG(e,["sdkHttpResponse"]);null!=n&&uq(t,["sdkHttpResponse"],n);let i=uG(e,["candidates"]);if(null!=i){let e=i;Array.isArray(e)&&(e=e.map(e=>(function(e){let t={},n=uG(e,["content"]);null!=n&&uq(t,["content"],n);let i=uG(e,["citationMetadata"]);null!=i&&uq(t,["citationMetadata"],function(e){let t={},n=uG(e,["citationSources"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>e)),uq(t,["citations"],e)}return t}(i));let r=uG(e,["tokenCount"]);null!=r&&uq(t,["tokenCount"],r);let l=uG(e,["finishReason"]);null!=l&&uq(t,["finishReason"],l);let o=uG(e,["avgLogprobs"]);null!=o&&uq(t,["avgLogprobs"],o);let s=uG(e,["groundingMetadata"]);null!=s&&uq(t,["groundingMetadata"],s);let a=uG(e,["index"]);null!=a&&uq(t,["index"],a);let u=uG(e,["logprobsResult"]);null!=u&&uq(t,["logprobsResult"],u);let d=uG(e,["safetyRatings"]);if(null!=d){let e=d;Array.isArray(e)&&(e=e.map(e=>e)),uq(t,["safetyRatings"],e)}let c=uG(e,["urlContextMetadata"]);return null!=c&&uq(t,["urlContextMetadata"],c),t})(e))),uq(t,["candidates"],e)}let r=uG(e,["modelVersion"]);null!=r&&uq(t,["modelVersion"],r);let l=uG(e,["promptFeedback"]);null!=l&&uq(t,["promptFeedback"],l);let o=uG(e,["responseId"]);null!=o&&uq(t,["responseId"],o);let s=uG(e,["usageMetadata"]);return null!=s&&uq(t,["usageMetadata"],s),t}function d8(e){let t={},n=uG(e,["sdkHttpResponse"]);null!=n&&uq(t,["sdkHttpResponse"],n);let i=uG(e,["candidates"]);if(null!=i){let e=i;Array.isArray(e)&&(e=e.map(e=>e)),uq(t,["candidates"],e)}let r=uG(e,["createTime"]);null!=r&&uq(t,["createTime"],r);let l=uG(e,["modelVersion"]);null!=l&&uq(t,["modelVersion"],l);let o=uG(e,["promptFeedback"]);null!=o&&uq(t,["promptFeedback"],o);let s=uG(e,["responseId"]);null!=s&&uq(t,["responseId"],s);let a=uG(e,["usageMetadata"]);return null!=a&&uq(t,["usageMetadata"],a),t}function d9(e){let t={},n=uG(e,["_self"]);null!=n&&uq(t,["image"],d7(n));let i=uG(e,["raiFilteredReason"]);null!=i&&uq(t,["raiFilteredReason"],i);let r=uG(e,["_self"]);null!=r&&uq(t,["safetyAttributes"],cl(r));let l=uG(e,["prompt"]);return null!=l&&uq(t,["enhancedPrompt"],l),t}function d7(e){let t={},n=uG(e,["gcsUri"]);null!=n&&uq(t,["gcsUri"],n);let i=uG(e,["bytesBase64Encoded"]);null!=i&&uq(t,["imageBytes"],uH(i));let r=uG(e,["mimeType"]);return null!=r&&uq(t,["mimeType"],r),t}function ce(e){let t={};if(void 0!==uG(e,["gcsUri"]))throw Error("gcsUri parameter is not supported in Gemini API.");let n=uG(e,["imageBytes"]);null!=n&&uq(t,["bytesBase64Encoded"],uH(n));let i=uG(e,["mimeType"]);return null!=i&&uq(t,["mimeType"],i),t}function ct(e){let t={},n=uG(e,["gcsUri"]);null!=n&&uq(t,["gcsUri"],n);let i=uG(e,["imageBytes"]);null!=i&&uq(t,["bytesBase64Encoded"],uH(i));let r=uG(e,["mimeType"]);return null!=r&&uq(t,["mimeType"],r),t}function cn(e){var t;let n,i,r,l,o={},s=uG(e,["name"]);null!=s&&uq(o,["name"],s);let a=uG(e,["displayName"]);null!=a&&uq(o,["displayName"],a);let u=uG(e,["description"]);null!=u&&uq(o,["description"],u);let d=uG(e,["version"]);null!=d&&uq(o,["version"],d);let c=uG(e,["_self"]);null!=c&&uq(o,["tunedModelInfo"],(n={},null!=(i=uG(t=c,["baseModel"]))&&uq(n,["baseModel"],i),null!=(r=uG(t,["createTime"]))&&uq(n,["createTime"],r),null!=(l=uG(t,["updateTime"]))&&uq(n,["updateTime"],l),n));let p=uG(e,["inputTokenLimit"]);null!=p&&uq(o,["inputTokenLimit"],p);let h=uG(e,["outputTokenLimit"]);null!=h&&uq(o,["outputTokenLimit"],h);let m=uG(e,["supportedGenerationMethods"]);null!=m&&uq(o,["supportedActions"],m);let f=uG(e,["temperature"]);null!=f&&uq(o,["temperature"],f);let g=uG(e,["maxTemperature"]);null!=g&&uq(o,["maxTemperature"],g);let y=uG(e,["topP"]);null!=y&&uq(o,["topP"],y);let v=uG(e,["topK"]);null!=v&&uq(o,["topK"],v);let x=uG(e,["thinking"]);return null!=x&&uq(o,["thinking"],x),o}function ci(e){var t;let n,i,r,l,o={},s=uG(e,["name"]);null!=s&&uq(o,["name"],s);let a=uG(e,["displayName"]);null!=a&&uq(o,["displayName"],a);let u=uG(e,["description"]);null!=u&&uq(o,["description"],u);let d=uG(e,["versionId"]);null!=d&&uq(o,["version"],d);let c=uG(e,["deployedModels"]);if(null!=c){let e=c;Array.isArray(e)&&(e=e.map(e=>{let t,n,i;return t={},null!=(n=uG(e,["endpoint"]))&&uq(t,["name"],n),null!=(i=uG(e,["deployedModelId"]))&&uq(t,["deployedModelId"],i),t})),uq(o,["endpoints"],e)}let p=uG(e,["labels"]);null!=p&&uq(o,["labels"],p);let h=uG(e,["_self"]);null!=h&&uq(o,["tunedModelInfo"],(n={},null!=(i=uG(t=h,["labels","google-vertex-llm-tuning-base-model-id"]))&&uq(n,["baseModel"],i),null!=(r=uG(t,["createTime"]))&&uq(n,["createTime"],r),null!=(l=uG(t,["updateTime"]))&&uq(n,["updateTime"],l),n));let m=uG(e,["defaultCheckpointId"]);null!=m&&uq(o,["defaultCheckpointId"],m);let f=uG(e,["checkpoints"]);if(null!=f){let e=f;Array.isArray(e)&&(e=e.map(e=>e)),uq(o,["checkpoints"],e)}return o}function cr(e){let t={},n=uG(e,["safetyAttributes","categories"]);null!=n&&uq(t,["categories"],n);let i=uG(e,["safetyAttributes","scores"]);null!=i&&uq(t,["scores"],i);let r=uG(e,["contentType"]);return null!=r&&uq(t,["contentType"],r),t}function cl(e){let t={},n=uG(e,["safetyAttributes","categories"]);null!=n&&uq(t,["categories"],n);let i=uG(e,["safetyAttributes","scores"]);null!=i&&uq(t,["scores"],i);let r=uG(e,["contentType"]);return null!=r&&uq(t,["contentType"],r),t}function co(e){let t={},n=uG(e,["functionDeclarations"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>(function(e){let t={};if(void 0!==uG(e,["behavior"]))throw Error("behavior parameter is not supported in Vertex AI.");let n=uG(e,["description"]);null!=n&&uq(t,["description"],n);let i=uG(e,["name"]);null!=i&&uq(t,["name"],i);let r=uG(e,["parameters"]);null!=r&&uq(t,["parameters"],r);let l=uG(e,["parametersJsonSchema"]);null!=l&&uq(t,["parametersJsonSchema"],l);let o=uG(e,["response"]);null!=o&&uq(t,["response"],o);let s=uG(e,["responseJsonSchema"]);return null!=s&&uq(t,["responseJsonSchema"],s),t})(e))),uq(t,["functionDeclarations"],e)}let i=uG(e,["retrieval"]);null!=i&&uq(t,["retrieval"],i);let r=uG(e,["googleSearchRetrieval"]);null!=r&&uq(t,["googleSearchRetrieval"],r);let l=uG(e,["computerUse"]);if(null!=l&&uq(t,["computerUse"],l),void 0!==uG(e,["fileSearch"]))throw Error("fileSearch parameter is not supported in Vertex AI.");let o=uG(e,["codeExecution"]);null!=o&&uq(t,["codeExecution"],o);let s=uG(e,["enterpriseWebSearch"]);null!=s&&uq(t,["enterpriseWebSearch"],s);let a=uG(e,["googleMaps"]);null!=a&&uq(t,["googleMaps"],a);let u=uG(e,["googleSearch"]);null!=u&&uq(t,["googleSearch"],u);let d=uG(e,["urlContext"]);return null!=d&&uq(t,["urlContext"],d),t}function cs(e){let t={},n=uG(e,["uri"]);null!=n&&uq(t,["uri"],n);let i=uG(e,["videoBytes"]);null!=i&&uq(t,["encodedVideo"],uH(i));let r=uG(e,["mimeType"]);return null!=r&&uq(t,["encoding"],r),t}function ca(e){let t={},n=uG(e,["uri"]);null!=n&&uq(t,["gcsUri"],n);let i=uG(e,["videoBytes"]);null!=i&&uq(t,["bytesBase64Encoded"],uH(i));let r=uG(e,["mimeType"]);return null!=r&&uq(t,["mimeType"],r),t}function cu(e,t){let n=uG(e,["mimeType"]);void 0!==t&&null!=n&&uq(t,["mimeType"],n);let i=uG(e,["displayName"]);void 0!==t&&null!=i&&uq(t,["displayName"],i);let r=uG(e,["customMetadata"]);if(void 0!==t&&null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>e)),uq(t,["customMetadata"],e)}let l=uG(e,["chunkingConfig"]);return void 0!==t&&null!=l&&uq(t,["chunkingConfig"],l),{}}let cd="x-goog-api-client";class cc{constructor(e){var t,n;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const i={};this.clientOptions.vertexai?(i.apiVersion=null!=(t=this.clientOptions.apiVersion)?t:"v1beta1",i.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(i.apiVersion=null!=(n=this.clientOptions.apiVersion)?n:"v1beta",i.baseUrl="https://generativelanguage.googleapis.com/"),i.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=i,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(i,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&"global"!==this.clientOptions.location?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return null!=(e=this.clientOptions.vertexai)&&e}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}async getAuthHeaders(){let e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&void 0!==this.clientOptions.httpOptions.apiVersion)return this.clientOptions.httpOptions.apiVersion;throw Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&void 0!==this.clientOptions.httpOptions.baseUrl)return this.clientOptions.httpOptions.baseUrl;throw Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&void 0!==this.clientOptions.httpOptions.headers)return this.clientOptions.httpOptions.headers;throw Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||void 0===e.baseUrl||void 0===e.apiVersion)throw Error("HTTP options are not correctly set.");let t=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&""!==e.apiVersion&&t.push(e.apiVersion),t.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){let e=new URL(this.getBaseUrl());return e.protocol="http:"==e.protocol?"ws":"wss",e.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw Error("HTTP options are not correctly set.")}constructUrl(e,t,n){let i=[this.getRequestUrlInternal(t)];return n&&i.push(this.getBaseResourcePath()),""!==e&&i.push(e),new URL(`${i.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||"GET"===e.httpMethod&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));let n=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,t,n);if(e.queryParams)for(let[t,n]of Object.entries(e.queryParams))i.searchParams.append(t,String(n));let r={};if("GET"===e.httpMethod){if(e.body&&"{}"!==e.body)throw Error("Request body should be empty for GET request, but got non empty request body")}else r.body=e.body;return r=await this.includeExtraHttpOptionsToRequestInit(r,t,i.toString(),e.abortSignal),this.unaryApiCall(i,r,e.httpMethod)}patchHttpOptions(e,t){let n=JSON.parse(JSON.stringify(e));for(let[e,i]of Object.entries(t))"object"==typeof i?n[e]=Object.assign(Object.assign({},n[e]),i):void 0!==i&&(n[e]=i);return n}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));let n=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,t,n);i.searchParams.has("alt")&&"sse"===i.searchParams.get("alt")||i.searchParams.set("alt","sse");let r={};return r.body=e.body,r=await this.includeExtraHttpOptionsToRequestInit(r,t,i.toString(),e.abortSignal),this.streamApiCall(i,r,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,n,i){if(t&&t.timeout||i){let n=new AbortController,r=n.signal;if(t.timeout&&(null==t?void 0:t.timeout)>0){let e=setTimeout(()=>n.abort(),t.timeout);e&&"function"==typeof e.unref&&e.unref()}i&&i.addEventListener("abort",()=>{n.abort()}),e.signal=r}return t&&null!==t.extraBody&&function(e,t){if(!t||0===Object.keys(t).length)return;if(e.body instanceof Blob)return console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");let n={};if("string"==typeof e.body&&e.body.length>0)try{let t=JSON.parse(e.body);if("object"!=typeof t||null===t||Array.isArray(t))return void console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");n=t}catch(e){console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}e.body=JSON.stringify(function e(t,n){let i=Object.assign({},t);for(let t in n)if(Object.prototype.hasOwnProperty.call(n,t)){let r=n[t],l=i[t];r&&"object"==typeof r&&!Array.isArray(r)&&l&&"object"==typeof l&&!Array.isArray(l)?i[t]=e(l,r):(l&&r&&typeof l!=typeof r&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${t}". Original type: ${typeof l}, New type: ${typeof r}. Overwriting.`),i[t]=r)}return i}(n,t))}(e,t.extraBody),e.headers=await this.getHeadersInternal(t,n),e}async unaryApiCall(e,t,n){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:n})).then(async e=>(await cp(e),new u$(e))).catch(e=>{if(e instanceof Error)throw e;throw Error(JSON.stringify(e))})}async streamApiCall(e,t,n){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:n})).then(async e=>(await cp(e),this.processStreamResponse(e))).catch(e=>{if(e instanceof Error)throw e;throw Error(JSON.stringify(e))})}processStreamResponse(e){return dW(this,arguments,function*(){var t;let n=null==(t=null==e?void 0:e.body)?void 0:t.getReader(),i=new TextDecoder("utf-8");if(!n)throw Error("Response body is empty");try{let t="",r="data:",l=["\n\n","\r\r","\r\n\r\n"];for(;;){let{done:o,value:s}=yield dJ(n.read());if(o){if(t.trim().length>0)throw Error("Incomplete JSON segment at the end");break}let a=i.decode(s,{stream:!0});try{let e=JSON.parse(a);if("error"in e){let t=JSON.parse(JSON.stringify(e.error)),n=t.status,i=t.code,r=`got status: ${n}. ${JSON.stringify(e)}`;if(i>=400&&i<600)throw new d0({message:r,status:i})}}catch(e){if("ApiError"===e.name)throw e}t+=a;let u=-1,d=0;for(;;){for(let e of(u=-1,d=0,l)){let n=t.indexOf(e);-1!==n&&(-1===u||n<u)&&(u=n,d=e.length)}if(-1===u)break;let n=t.substring(0,u);t=t.substring(u+d);let i=n.trim();if(i.startsWith(r)){let t=i.substring(r.length).trim();try{let n=new Response(t,{headers:null==e?void 0:e.headers,status:null==e?void 0:e.status,statusText:null==e?void 0:e.statusText});yield yield dJ(new u$(n))}catch(e){throw Error(`exception parsing stream chunk ${t}. ${e}`)}}}}}finally{n.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(e=>{throw Error(`exception ${e} sending request`)})}getDefaultHeaders(){let e={},t="google-genai-sdk/1.34.0 "+this.clientOptions.userAgentExtra;return e["User-Agent"]=t,e[cd]=t,e["Content-Type"]="application/json",e}async getHeadersInternal(e,t){let n=new Headers;if(e&&e.headers){for(let[t,i]of Object.entries(e.headers))n.append(t,i);e.timeout&&e.timeout>0&&n.append("X-Server-Timeout",String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(n,t),n}getFileName(e){var t;let n="";return"string"==typeof e&&(n=null!=(t=(n=e.replace(/[/\\]+$/,"")).split(/[/\\]/).pop())?t:""),n}async uploadFile(e,t){var n;let i={};null!=t&&(i.mimeType=t.mimeType,i.name=t.name,i.displayName=t.displayName),i.name&&!i.name.startsWith("files/")&&(i.name=`files/${i.name}`);let r=this.clientOptions.uploader,l=await r.stat(e);i.sizeBytes=String(l.size);let o=null!=(n=null==t?void 0:t.mimeType)?n:l.type;if(void 0===o||""===o)throw Error("Can not determine mimeType. Please provide mimeType in the config.");i.mimeType=o;let s={file:i},a=this.getFileName(e),u=uF("upload/v1beta/files",s._url),d=await this.fetchUploadUrl(u,i.sizeBytes,i.mimeType,a,s,null==t?void 0:t.httpOptions);return r.upload(e,d,this)}async uploadFileToFileSearchStore(e,t,n){var i;let r=this.clientOptions.uploader,l=await r.stat(t),o=String(l.size),s=null!=(i=null==n?void 0:n.mimeType)?i:l.type;if(void 0===s||""===s)throw Error("Can not determine mimeType. Please provide mimeType in the config.");let a=`upload/v1beta/${e}:uploadToFileSearchStore`,u=this.getFileName(t),d={};null!=n&&cu(n,d);let c=await this.fetchUploadUrl(a,o,s,u,d,null==n?void 0:n.httpOptions);return r.uploadToFileSearchStore(t,c,this)}async downloadFile(e){let t=this.clientOptions.downloader;await t.download(e,this)}async fetchUploadUrl(e,t,n,i,r,l){var o;let s={};s=l||{apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${t}`,"X-Goog-Upload-Header-Content-Type":`${n}`},i?{"X-Goog-Upload-File-Name":i}:{})};let a=await this.request({path:e,body:JSON.stringify(r),httpMethod:"POST",httpOptions:s});if(!a||!(null==a?void 0:a.headers))throw Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");let u=null==(o=null==a?void 0:a.headers)?void 0:o["x-goog-upload-url"];if(void 0===u)throw Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return u}}async function cp(e){var t;if(void 0===e)throw Error("response is undefined");if(!e.ok){let n=e.status,i=JSON.stringify((null==(t=e.headers.get("content-type"))?void 0:t.includes("application/json"))?await e.json():{error:{message:await e.text(),code:e.status,status:e.statusText}});if(n>=400&&n<600)throw new d0({message:i,status:n});throw Error(i)}}function ch(e){for(let n of e){var t;if(null!==(t=n)&&"object"==typeof t&&t instanceof cf||"object"==typeof n&&"inputSchema"in n)return!0}return!1}function cm(e){var t;let n=null!=(t=e[cd])?t:"";e[cd]=(n+" mcp_used/unknown").trimStart()}class cf{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new cf(e,t)}async initialize(){var e,t,n,i;if(this.mcpTools.length>0)return;let r={},l=[];for(let u of this.mcpClients)try{for(var o,s=!0,a=(t=void 0,dY(function(e){return dW(this,arguments,function*(e,t=100){let n,i=0;for(;i<t;){let t=yield dJ(e.listTools({cursor:n}));for(let e of t.tools)yield yield dJ(e),i++;if(!t.nextCursor)break;n=t.nextCursor}})}(u)));!(e=(o=await a.next()).done);s=!0){i=o.value,s=!1,l.push(i);let e=i.name;if(r[e])throw Error(`Duplicate function name ${e} found in MCP tools. Please ensure function names are unique.`);r[e]=u}}catch(e){t={error:e}}finally{try{!s&&!e&&(n=a.return)&&await n.call(a)}finally{if(t)throw t.error}}this.mcpTools=l,this.functionNameToMcpClient=r}async tool(){return await this.initialize(),function(e,t={}){let n=[],i=new Set;for(let r of e){let e=r.name;if(i.has(e))throw Error(`Duplicate function name ${e} found in MCP tools. Please ensure function names are unique.`);i.add(e);let l=function(e,t={}){let n={name:e.name,description:e.description,parametersJsonSchema:e.inputSchema};return e.outputSchema&&(n.responseJsonSchema=e.outputSchema),t.behavior&&(n.behavior=t.behavior),{functionDeclarations:[n]}}(r,t);l.functionDeclarations&&n.push(...l.functionDeclarations)}return{functionDeclarations:n}}(this.mcpTools,this.config)}async callTool(e){await this.initialize();let t=[];for(let n of e)if(n.name in this.functionNameToMcpClient){let e,i=this.functionNameToMcpClient[n.name];this.config.timeout&&(e={timeout:this.config.timeout});let r=await i.callTool({name:n.name,arguments:n.args},void 0,e);t.push({functionResponse:{name:n.name,response:r.isError?{error:r}:r}})}return t}}async function cg(e,t,n){let i=new da;Object.assign(i,n.data instanceof Blob?JSON.parse(await n.data.text()):JSON.parse(n.data)),t(i)}class cy{constructor(e,t,n){this.apiClient=e,this.auth=t,this.webSocketFactory=n}async connect(e){var t,n;let i;if(this.apiClient.isVertexAI())throw Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");let r=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion(),o=function(e){let t=new Headers;for(let[n,i]of Object.entries(e))t.append(n,i);return t}(this.apiClient.getDefaultHeaders()),s=this.apiClient.getApiKey(),a=`${r}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateMusic?key=${s}`,u=()=>{},d=new Promise(e=>{u=e}),c=e.callbacks,p=this.apiClient,h={onopen:function(){u({})},onmessage:e=>{cg(p,c.onmessage,e)},onerror:null!=(t=null==c?void 0:c.onerror)?t:function(e){},onclose:null!=(n=null==c?void 0:c.onclose)?n:function(e){}},m=this.webSocketFactory.create(a,(i={},o.forEach((e,t)=>{i[t]=e}),i),h);m.connect(),await d;let f=dd(this.apiClient,e.model);return m.send(JSON.stringify({setup:{model:f}})),new cv(m,this.apiClient)}}class cv{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||0===Object.keys(e.weightedPrompts).length)throw Error("Weighted prompts must be set and contain at least one entry.");let t=function(e){let t={},n=uG(e,["weightedPrompts"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>e)),uq(t,["weightedPrompts"],e)}return t}(e);this.conn.send(JSON.stringify({clientContent:t}))}async setMusicGenerationConfig(e){let t,n;e.musicGenerationConfig||(e.musicGenerationConfig={});let i=(t={},null!=(n=uG(e,["musicGenerationConfig"]))&&uq(t,["musicGenerationConfig"],n),t);this.conn.send(JSON.stringify(i))}sendPlaybackControl(e){this.conn.send(JSON.stringify({playbackControl:e}))}play(){this.sendPlaybackControl(tC.PLAY)}pause(){this.sendPlaybackControl(tC.PAUSE)}stop(){this.sendPlaybackControl(tC.STOP)}resetContext(){this.sendPlaybackControl(tC.RESET_CONTEXT)}close(){this.conn.close()}}async function cx(e,t,n){let i=new ds,r=JSON.parse(n.data instanceof Blob?await n.data.text():n.data instanceof ArrayBuffer?new TextDecoder().decode(n.data):n.data);if(e.isVertexAI()){let e,t,n,l,o,s,a,u,d;Object.assign(i,(e={},null!=(t=uG(r,["setupComplete"]))&&uq(e,["setupComplete"],t),null!=(n=uG(r,["serverContent"]))&&uq(e,["serverContent"],n),null!=(l=uG(r,["toolCall"]))&&uq(e,["toolCall"],l),null!=(o=uG(r,["toolCallCancellation"]))&&uq(e,["toolCallCancellation"],o),null!=(s=uG(r,["usageMetadata"]))&&uq(e,["usageMetadata"],function(e){let t={},n=uG(e,["promptTokenCount"]);null!=n&&uq(t,["promptTokenCount"],n);let i=uG(e,["cachedContentTokenCount"]);null!=i&&uq(t,["cachedContentTokenCount"],i);let r=uG(e,["candidatesTokenCount"]);null!=r&&uq(t,["responseTokenCount"],r);let l=uG(e,["toolUsePromptTokenCount"]);null!=l&&uq(t,["toolUsePromptTokenCount"],l);let o=uG(e,["thoughtsTokenCount"]);null!=o&&uq(t,["thoughtsTokenCount"],o);let s=uG(e,["totalTokenCount"]);null!=s&&uq(t,["totalTokenCount"],s);let a=uG(e,["promptTokensDetails"]);if(null!=a){let e=a;Array.isArray(e)&&(e=e.map(e=>e)),uq(t,["promptTokensDetails"],e)}let u=uG(e,["cacheTokensDetails"]);if(null!=u){let e=u;Array.isArray(e)&&(e=e.map(e=>e)),uq(t,["cacheTokensDetails"],e)}let d=uG(e,["candidatesTokensDetails"]);if(null!=d){let e=d;Array.isArray(e)&&(e=e.map(e=>e)),uq(t,["responseTokensDetails"],e)}let c=uG(e,["toolUsePromptTokensDetails"]);if(null!=c){let e=c;Array.isArray(e)&&(e=e.map(e=>e)),uq(t,["toolUsePromptTokensDetails"],e)}let p=uG(e,["trafficType"]);return null!=p&&uq(t,["trafficType"],p),t}(s)),null!=(a=uG(r,["goAway"]))&&uq(e,["goAway"],a),null!=(u=uG(r,["sessionResumptionUpdate"]))&&uq(e,["sessionResumptionUpdate"],u),null!=(d=uG(r,["voiceActivityDetectionSignal"]))&&uq(e,["voiceActivityDetectionSignal"],d),e))}else Object.assign(i,r);t(i)}class cb{constructor(e,t,n){this.apiClient=e,this.auth=t,this.webSocketFactory=n,this.music=new cy(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,n,i,r,l,o,s,a;let u,d;if(e.config&&e.config.httpOptions)throw Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");let c=this.apiClient.getWebsocketBaseUrl(),p=this.apiClient.getApiVersion(),h=this.apiClient.getHeaders();e.config&&e.config.tools&&ch(e.config.tools)&&cm(h);let m=function(e){let t=new Headers;for(let[n,i]of Object.entries(e))t.append(n,i);return t}(h);if(this.apiClient.isVertexAI())u=`${c}/ws/google.cloud.aiplatform.${p}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(m,u);else{let e=this.apiClient.getApiKey(),t="BidiGenerateContent",n="key";(null==e?void 0:e.startsWith("auth_tokens/"))&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),"v1alpha"!==p&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),t="BidiGenerateContentConstrained",n="access_token"),u=`${c}/ws/google.ai.generativelanguage.${p}.GenerativeService.${t}?${n}=${e}`}let f=()=>{},g=new Promise(e=>{f=e}),y=e.callbacks,v=this.apiClient,x={onopen:function(){var e;null==(e=null==y?void 0:y.onopen)||e.call(y),f({})},onmessage:e=>{cx(v,y.onmessage,e)},onerror:null!=(t=null==y?void 0:y.onerror)?t:function(e){},onclose:null!=(n=null==y?void 0:y.onclose)?n:function(e){}},b=this.webSocketFactory.create(u,(d={},m.forEach((e,t)=>{d[t]=e}),d),x);b.connect(),await g;let E=dd(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&E.startsWith("publishers/")){let e=this.apiClient.getProject(),t=this.apiClient.getLocation();E=`projects/${e}/locations/${t}/`+E}let S={};this.apiClient.isVertexAI()&&(null==(i=e.config)?void 0:i.responseModalities)===void 0&&(void 0===e.config?e.config={responseModalities:[e0.AUDIO]}:e.config.responseModalities=[e0.AUDIO]),(null==(r=e.config)?void 0:r.generationConfig)&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");let w=null!=(o=null==(l=e.config)?void 0:l.tools)?o:[],T=[];for(let e of w)this.isCallableTool(e)?T.push(await e.tool()):T.push(e);T.length>0&&(e.config.tools=T);let A={model:E,config:e.config,callbacks:e.callbacks};if(this.apiClient.isVertexAI()){let e,t,n;s=this.apiClient,e={},null!=(t=uG(A,["model"]))&&uq(e,["setup","model"],dd(s,t)),null!=(n=uG(A,["config"]))&&uq(e,["config"],function(e,t){let n=uG(e,["generationConfig"]);void 0!==t&&null!=n&&uq(t,["setup","generationConfig"],function(e){let t={},n=uG(e,["modelSelectionConfig"]);null!=n&&uq(t,["modelConfig"],n);let i=uG(e,["responseJsonSchema"]);null!=i&&uq(t,["responseJsonSchema"],i);let r=uG(e,["audioTimestamp"]);null!=r&&uq(t,["audioTimestamp"],r);let l=uG(e,["candidateCount"]);null!=l&&uq(t,["candidateCount"],l);let o=uG(e,["enableAffectiveDialog"]);null!=o&&uq(t,["enableAffectiveDialog"],o);let s=uG(e,["frequencyPenalty"]);null!=s&&uq(t,["frequencyPenalty"],s);let a=uG(e,["logprobs"]);null!=a&&uq(t,["logprobs"],a);let u=uG(e,["maxOutputTokens"]);null!=u&&uq(t,["maxOutputTokens"],u);let d=uG(e,["mediaResolution"]);null!=d&&uq(t,["mediaResolution"],d);let c=uG(e,["presencePenalty"]);null!=c&&uq(t,["presencePenalty"],c);let p=uG(e,["responseLogprobs"]);null!=p&&uq(t,["responseLogprobs"],p);let h=uG(e,["responseMimeType"]);null!=h&&uq(t,["responseMimeType"],h);let m=uG(e,["responseModalities"]);null!=m&&uq(t,["responseModalities"],m);let f=uG(e,["responseSchema"]);null!=f&&uq(t,["responseSchema"],f);let g=uG(e,["routingConfig"]);null!=g&&uq(t,["routingConfig"],g);let y=uG(e,["seed"]);null!=y&&uq(t,["seed"],y);let v=uG(e,["speechConfig"]);null!=v&&uq(t,["speechConfig"],v);let x=uG(e,["stopSequences"]);null!=x&&uq(t,["stopSequences"],x);let b=uG(e,["temperature"]);null!=b&&uq(t,["temperature"],b);let E=uG(e,["thinkingConfig"]);null!=E&&uq(t,["thinkingConfig"],E);let S=uG(e,["topK"]);null!=S&&uq(t,["topK"],S);let w=uG(e,["topP"]);if(null!=w&&uq(t,["topP"],w),void 0!==uG(e,["enableEnhancedCivicAnswers"]))throw Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}(n));let i=uG(e,["responseModalities"]);void 0!==t&&null!=i&&uq(t,["setup","generationConfig","responseModalities"],i);let r=uG(e,["temperature"]);void 0!==t&&null!=r&&uq(t,["setup","generationConfig","temperature"],r);let l=uG(e,["topP"]);void 0!==t&&null!=l&&uq(t,["setup","generationConfig","topP"],l);let o=uG(e,["topK"]);void 0!==t&&null!=o&&uq(t,["setup","generationConfig","topK"],o);let s=uG(e,["maxOutputTokens"]);void 0!==t&&null!=s&&uq(t,["setup","generationConfig","maxOutputTokens"],s);let a=uG(e,["mediaResolution"]);void 0!==t&&null!=a&&uq(t,["setup","generationConfig","mediaResolution"],a);let u=uG(e,["seed"]);void 0!==t&&null!=u&&uq(t,["setup","generationConfig","seed"],u);let d=uG(e,["speechConfig"]);void 0!==t&&null!=d&&uq(t,["setup","generationConfig","speechConfig"],dC(d));let c=uG(e,["thinkingConfig"]);void 0!==t&&null!=c&&uq(t,["setup","generationConfig","thinkingConfig"],c);let p=uG(e,["enableAffectiveDialog"]);void 0!==t&&null!=p&&uq(t,["setup","generationConfig","enableAffectiveDialog"],p);let h=uG(e,["systemInstruction"]);void 0!==t&&null!=h&&uq(t,["setup","systemInstruction"],dE(h));let m=uG(e,["tools"]);if(void 0!==t&&null!=m){let e=d_(m);Array.isArray(e)&&(e=e.map(e=>(function(e){let t={},n=uG(e,["functionDeclarations"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>(function(e){let t={};if(void 0!==uG(e,["behavior"]))throw Error("behavior parameter is not supported in Vertex AI.");let n=uG(e,["description"]);null!=n&&uq(t,["description"],n);let i=uG(e,["name"]);null!=i&&uq(t,["name"],i);let r=uG(e,["parameters"]);null!=r&&uq(t,["parameters"],r);let l=uG(e,["parametersJsonSchema"]);null!=l&&uq(t,["parametersJsonSchema"],l);let o=uG(e,["response"]);null!=o&&uq(t,["response"],o);let s=uG(e,["responseJsonSchema"]);return null!=s&&uq(t,["responseJsonSchema"],s),t})(e))),uq(t,["functionDeclarations"],e)}let i=uG(e,["retrieval"]);null!=i&&uq(t,["retrieval"],i);let r=uG(e,["googleSearchRetrieval"]);null!=r&&uq(t,["googleSearchRetrieval"],r);let l=uG(e,["computerUse"]);if(null!=l&&uq(t,["computerUse"],l),void 0!==uG(e,["fileSearch"]))throw Error("fileSearch parameter is not supported in Vertex AI.");let o=uG(e,["codeExecution"]);null!=o&&uq(t,["codeExecution"],o);let s=uG(e,["enterpriseWebSearch"]);null!=s&&uq(t,["enterpriseWebSearch"],s);let a=uG(e,["googleMaps"]);null!=a&&uq(t,["googleMaps"],a);let u=uG(e,["googleSearch"]);null!=u&&uq(t,["googleSearch"],u);let d=uG(e,["urlContext"]);return null!=d&&uq(t,["urlContext"],d),t})(dI(e)))),uq(t,["setup","tools"],e)}let f=uG(e,["sessionResumption"]);void 0!==t&&null!=f&&uq(t,["setup","sessionResumption"],f);let g=uG(e,["inputAudioTranscription"]);void 0!==t&&null!=g&&uq(t,["setup","inputAudioTranscription"],g);let y=uG(e,["outputAudioTranscription"]);void 0!==t&&null!=y&&uq(t,["setup","outputAudioTranscription"],y);let v=uG(e,["realtimeInputConfig"]);void 0!==t&&null!=v&&uq(t,["setup","realtimeInputConfig"],v);let x=uG(e,["contextWindowCompression"]);void 0!==t&&null!=x&&uq(t,["setup","contextWindowCompression"],x);let b=uG(e,["proactivity"]);void 0!==t&&null!=b&&uq(t,["setup","proactivity"],b);let E=uG(e,["explicitVadSignal"]);return void 0!==t&&null!=E&&uq(t,["setup","explicitVadSignal"],E),{}}(n,e)),S=e}else{let e,t,n;a=this.apiClient,e={},null!=(t=uG(A,["model"]))&&uq(e,["setup","model"],dd(a,t)),null!=(n=uG(A,["config"]))&&uq(e,["config"],function(e,t){let n=uG(e,["generationConfig"]);void 0!==t&&null!=n&&uq(t,["setup","generationConfig"],n);let i=uG(e,["responseModalities"]);void 0!==t&&null!=i&&uq(t,["setup","generationConfig","responseModalities"],i);let r=uG(e,["temperature"]);void 0!==t&&null!=r&&uq(t,["setup","generationConfig","temperature"],r);let l=uG(e,["topP"]);void 0!==t&&null!=l&&uq(t,["setup","generationConfig","topP"],l);let o=uG(e,["topK"]);void 0!==t&&null!=o&&uq(t,["setup","generationConfig","topK"],o);let s=uG(e,["maxOutputTokens"]);void 0!==t&&null!=s&&uq(t,["setup","generationConfig","maxOutputTokens"],s);let a=uG(e,["mediaResolution"]);void 0!==t&&null!=a&&uq(t,["setup","generationConfig","mediaResolution"],a);let u=uG(e,["seed"]);void 0!==t&&null!=u&&uq(t,["setup","generationConfig","seed"],u);let d=uG(e,["speechConfig"]);void 0!==t&&null!=d&&uq(t,["setup","generationConfig","speechConfig"],dC(d));let c=uG(e,["thinkingConfig"]);void 0!==t&&null!=c&&uq(t,["setup","generationConfig","thinkingConfig"],c);let p=uG(e,["enableAffectiveDialog"]);void 0!==t&&null!=p&&uq(t,["setup","generationConfig","enableAffectiveDialog"],p);let h=uG(e,["systemInstruction"]);void 0!==t&&null!=h&&uq(t,["setup","systemInstruction"],function(e){let t={},n=uG(e,["parts"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>{var t;let n,i,r,l,o,s,a,u,d,c,p,h;return n={},null!=(i=uG(t=e,["mediaResolution"]))&&uq(n,["mediaResolution"],i),null!=(r=uG(t,["codeExecutionResult"]))&&uq(n,["codeExecutionResult"],r),null!=(l=uG(t,["executableCode"]))&&uq(n,["executableCode"],l),null!=(o=uG(t,["fileData"]))&&uq(n,["fileData"],function(e){let t={};if(void 0!==uG(e,["displayName"]))throw Error("displayName parameter is not supported in Gemini API.");let n=uG(e,["fileUri"]);null!=n&&uq(t,["fileUri"],n);let i=uG(e,["mimeType"]);return null!=i&&uq(t,["mimeType"],i),t}(o)),null!=(s=uG(t,["functionCall"]))&&uq(n,["functionCall"],function(e){let t={},n=uG(e,["id"]);null!=n&&uq(t,["id"],n);let i=uG(e,["args"]);null!=i&&uq(t,["args"],i);let r=uG(e,["name"]);if(null!=r&&uq(t,["name"],r),void 0!==uG(e,["partialArgs"]))throw Error("partialArgs parameter is not supported in Gemini API.");if(void 0!==uG(e,["willContinue"]))throw Error("willContinue parameter is not supported in Gemini API.");return t}(s)),null!=(a=uG(t,["functionResponse"]))&&uq(n,["functionResponse"],a),null!=(u=uG(t,["inlineData"]))&&uq(n,["inlineData"],d2(u)),null!=(d=uG(t,["text"]))&&uq(n,["text"],d),null!=(c=uG(t,["thought"]))&&uq(n,["thought"],c),null!=(p=uG(t,["thoughtSignature"]))&&uq(n,["thoughtSignature"],p),null!=(h=uG(t,["videoMetadata"]))&&uq(n,["videoMetadata"],h),n})),uq(t,["parts"],e)}let i=uG(e,["role"]);return null!=i&&uq(t,["role"],i),t}(dE(h)));let m=uG(e,["tools"]);if(void 0!==t&&null!=m){let e=d_(m);Array.isArray(e)&&(e=e.map(e=>(function(e){let t={},n=uG(e,["functionDeclarations"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>e)),uq(t,["functionDeclarations"],e)}if(void 0!==uG(e,["retrieval"]))throw Error("retrieval parameter is not supported in Gemini API.");let i=uG(e,["googleSearchRetrieval"]);null!=i&&uq(t,["googleSearchRetrieval"],i);let r=uG(e,["computerUse"]);null!=r&&uq(t,["computerUse"],r);let l=uG(e,["fileSearch"]);null!=l&&uq(t,["fileSearch"],l);let o=uG(e,["codeExecution"]);if(null!=o&&uq(t,["codeExecution"],o),void 0!==uG(e,["enterpriseWebSearch"]))throw Error("enterpriseWebSearch parameter is not supported in Gemini API.");let s=uG(e,["googleMaps"]);null!=s&&uq(t,["googleMaps"],function(e){let t={};if(void 0!==uG(e,["authConfig"]))throw Error("authConfig parameter is not supported in Gemini API.");let n=uG(e,["enableWidget"]);return null!=n&&uq(t,["enableWidget"],n),t}(s));let a=uG(e,["googleSearch"]);null!=a&&uq(t,["googleSearch"],function(e){let t={};if(void 0!==uG(e,["excludeDomains"]))throw Error("excludeDomains parameter is not supported in Gemini API.");if(void 0!==uG(e,["blockingConfidence"]))throw Error("blockingConfidence parameter is not supported in Gemini API.");let n=uG(e,["timeRangeFilter"]);return null!=n&&uq(t,["timeRangeFilter"],n),t}(a));let u=uG(e,["urlContext"]);return null!=u&&uq(t,["urlContext"],u),t})(dI(e)))),uq(t,["setup","tools"],e)}let f=uG(e,["sessionResumption"]);void 0!==t&&null!=f&&uq(t,["setup","sessionResumption"],function(e){let t={},n=uG(e,["handle"]);if(null!=n&&uq(t,["handle"],n),void 0!==uG(e,["transparent"]))throw Error("transparent parameter is not supported in Gemini API.");return t}(f));let g=uG(e,["inputAudioTranscription"]);void 0!==t&&null!=g&&uq(t,["setup","inputAudioTranscription"],g);let y=uG(e,["outputAudioTranscription"]);void 0!==t&&null!=y&&uq(t,["setup","outputAudioTranscription"],y);let v=uG(e,["realtimeInputConfig"]);void 0!==t&&null!=v&&uq(t,["setup","realtimeInputConfig"],v);let x=uG(e,["contextWindowCompression"]);void 0!==t&&null!=x&&uq(t,["setup","contextWindowCompression"],x);let b=uG(e,["proactivity"]);if(void 0!==t&&null!=b&&uq(t,["setup","proactivity"],b),void 0!==uG(e,["explicitVadSignal"]))throw Error("explicitVadSignal parameter is not supported in Gemini API.");return{}}(n,e)),S=e}return delete S.config,b.send(JSON.stringify(S)),new cS(b,this.apiClient)}isCallableTool(e){return"callTool"in e&&"function"==typeof e.callTool}}let cE={turnComplete:!0};class cS{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(null!==t.turns&&void 0!==t.turns){let n=[];try{n=dw(t.turns),e.isVertexAI()||(n=n.map(e=>d5(e)))}catch(e){throw Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:n,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let n=[];if(null==t.functionResponses||0===(n=Array.isArray(t.functionResponses)?t.functionResponses:[t.functionResponses]).length)throw Error("functionResponses is required.");for(let t of n){if("object"!=typeof t||null===t||!("name"in t)||!("response"in t))throw Error(`Could not parse function response, type '${typeof t}'.`);if(!e.isVertexAI()&&!("id"in t))throw Error("FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.")}return{toolResponse:{functionResponses:n}}}sendClientContent(e){e=Object.assign(Object.assign({},cE),e);let t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};t=this.apiClient.isVertexAI()?{realtimeInput:function(e){let t={},n=uG(e,["media"]);if(null!=n){let e=dp(n);Array.isArray(e)&&(e=e.map(e=>e)),uq(t,["mediaChunks"],e)}let i=uG(e,["audio"]);null!=i&&uq(t,["audio"],df(i));let r=uG(e,["audioStreamEnd"]);null!=r&&uq(t,["audioStreamEnd"],r);let l=uG(e,["video"]);null!=l&&uq(t,["video"],dm(l));let o=uG(e,["text"]);null!=o&&uq(t,["text"],o);let s=uG(e,["activityStart"]);null!=s&&uq(t,["activityStart"],s);let a=uG(e,["activityEnd"]);return null!=a&&uq(t,["activityEnd"],a),t}(e)}:{realtimeInput:function(e){let t={},n=uG(e,["media"]);if(null!=n){let e=dp(n);Array.isArray(e)&&(e=e.map(e=>d2(e))),uq(t,["mediaChunks"],e)}let i=uG(e,["audio"]);null!=i&&uq(t,["audio"],d2(df(i)));let r=uG(e,["audioStreamEnd"]);null!=r&&uq(t,["audioStreamEnd"],r);let l=uG(e,["video"]);null!=l&&uq(t,["video"],d2(dm(l)));let o=uG(e,["text"]);null!=o&&uq(t,["text"],o);let s=uG(e,["activityStart"]);null!=s&&uq(t,["activityStart"],s);let a=uG(e,["activityEnd"]);return null!=a&&uq(t,["activityEnd"],a),t}(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(null==e.functionResponses)throw Error("Tool response parameters are required.");let t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function cw(e){var t,n,i;if(null==(t=null==e?void 0:e.automaticFunctionCalling)?void 0:t.disable)return!0;let r=!1;for(let t of null!=(n=null==e?void 0:e.tools)?n:[])if(cT(t)){r=!0;break}if(!r)return!0;let l=null==(i=null==e?void 0:e.automaticFunctionCalling)?void 0:i.maximumRemoteCalls;return(!(!l||!(l<0)&&Number.isInteger(l))||0==l)&&(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",l),!0)}function cT(e){return"callTool"in e&&"function"==typeof e.callTool}function cA(e){var t;let n=[];return(null==(t=null==e?void 0:e.config)?void 0:t.tools)&&e.config.tools.forEach((e,t)=>{cT(e)||e.functionDeclarations&&e.functionDeclarations.length>0&&n.push(t)}),n}function cC(e){var t;return!(null==(t=null==e?void 0:e.automaticFunctionCalling)?void 0:t.ignoreCallHistory)}class cI extends uV{constructor(e){super(),this.apiClient=e,this.generateContent=async e=>{var t,n,i,r,l,o,s,a;let u,d,c=await this.processParamsMaybeAddMcpUsage(e);if(this.maybeMoveToResponseJsonSchem(e),!(null!=(a=null==(s=null==(o=e.config)?void 0:o.tools)?void 0:s.some(e=>cT(e)))&&a)||cw(e.config))return await this.generateContentInternal(c);let p=cA(e);if(p.length>0){let e=p.map(e=>`tools[${e}]`).join(", ");throw Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${e}.`)}let h=dw(c.contents),m=null!=(i=null==(n=null==(t=c.config)?void 0:t.automaticFunctionCalling)?void 0:n.maximumRemoteCalls)?i:10,f=0;for(;f<m&&(u=await this.generateContentInternal(c)).functionCalls&&0!==u.functionCalls.length;){let t=u.candidates[0].content,n=[];for(let t of null!=(l=null==(r=e.config)?void 0:r.tools)?l:[])if(cT(t)){let e=await t.callTool(u.functionCalls);n.push(...e)}f++,d={role:"user",parts:n},c.contents=dw(c.contents),c.contents.push(t),c.contents.push(d),cC(c.config)&&(h.push(t),h.push(d))}return cC(c.config)&&(u.automaticFunctionCallingHistory=h),u},this.generateContentStream=async e=>{var t,n,i,r,l;if(this.maybeMoveToResponseJsonSchem(e),cw(e.config)){let t=await this.processParamsMaybeAddMcpUsage(e);return await this.generateContentStreamInternal(t)}let o=cA(e);if(o.length>0){let e=o.map(e=>`tools[${e}]`).join(", ");throw Error(`Incompatible tools found at ${e}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}let s=null==(i=null==(n=null==(t=null==e?void 0:e.config)?void 0:t.toolConfig)?void 0:n.functionCallingConfig)?void 0:i.streamFunctionCallArguments,a=null==(l=null==(r=null==e?void 0:e.config)?void 0:r.automaticFunctionCalling)?void 0:l.disable;if(s&&!a)throw Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(e)},this.generateImages=async e=>await this.generateImagesInternal(e).then(e=>{var t;let n,i=[];if(null==e?void 0:e.generatedImages)for(let r of e.generatedImages)r&&(null==r?void 0:r.safetyAttributes)&&(null==(t=null==r?void 0:r.safetyAttributes)?void 0:t.contentType)==="Positive Prompt"?n=null==r?void 0:r.safetyAttributes:i.push(r);return n?{generatedImages:i,positivePromptSafetyAttributes:n,sdkHttpResponse:e.sdkHttpResponse}:{generatedImages:i,sdkHttpResponse:e.sdkHttpResponse}}),this.list=async e=>{var t;let n={config:Object.assign(Object.assign({},{queryBase:!0}),null==e?void 0:e.config)};if(this.apiClient.isVertexAI()&&!n.config.queryBase)if(null==(t=n.config)?void 0:t.filter)throw Error("Filtering tuned models list for Vertex AI is not currently supported");else n.config.filter="labels.tune-type:*";return new dG(tI.PAGED_ITEM_MODELS,e=>this.listInternal(e),await this.listInternal(n),n)},this.editImage=async e=>{let t={model:e.model,prompt:e.prompt,referenceImages:[],config:e.config};return e.referenceImages&&e.referenceImages&&(t.referenceImages=e.referenceImages.map(e=>e.toReferenceImageAPI())),await this.editImageInternal(t)},this.upscaleImage=async e=>{let t={numberOfImages:1,mode:"upscale"};e.config&&(t=Object.assign(Object.assign({},t),e.config));let n={model:e.model,image:e.image,upscaleFactor:e.upscaleFactor,config:t};return await this.upscaleImageInternal(n)},this.generateVideos=async e=>{var t,n,i,r,l,o;if((e.prompt||e.image||e.video)&&e.source)throw Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return!this.apiClient.isVertexAI()&&((null==(t=e.video)?void 0:t.uri)&&(null==(n=e.video)?void 0:n.videoBytes)?e.video={uri:e.video.uri,mimeType:e.video.mimeType}:(null==(r=null==(i=e.source)?void 0:i.video)?void 0:r.uri)&&(null==(o=null==(l=e.source)?void 0:l.video)?void 0:o.videoBytes)&&(e.source.video={uri:e.source.video.uri,mimeType:e.source.video.mimeType})),await this.generateVideosInternal(e)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&!e.config.responseJsonSchema&&Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema)}async processParamsMaybeAddMcpUsage(e){var t,n,i;let r=null==(t=e.config)?void 0:t.tools;if(!r)return e;let l=await Promise.all(r.map(async e=>cT(e)?await e.tool():e)),o={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:l})};if(o.config.tools=l,e.config&&e.config.tools&&ch(e.config.tools)){let t=Object.assign({},null!=(i=null==(n=e.config.httpOptions)?void 0:n.headers)?i:{});0===Object.keys(t).length&&(t=this.apiClient.getDefaultHeaders()),cm(t),o.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:t})}return o}async initAfcToolsMap(e){var t,n,i;let r=new Map;for(let l of null!=(n=null==(t=e.config)?void 0:t.tools)?n:[])if(cT(l))for(let e of null!=(i=(await l.tool()).functionDeclarations)?i:[]){if(!e.name)throw Error("Function declaration name is required.");if(r.has(e.name))throw Error(`Duplicate tool declaration name: ${e.name}`);r.set(e.name,l)}return r}async processAfcStream(e){var t,n,i;let r=null!=(i=null==(n=null==(t=e.config)?void 0:t.automaticFunctionCalling)?void 0:n.maximumRemoteCalls)?i:10,l=!1,o=0;return function(e,t,n){return dW(this,arguments,function*(){for(;o<r;){l&&(o++,l=!1);let f=yield dJ(e.processParamsMaybeAddMcpUsage(n)),g=yield dJ(e.generateContentStreamInternal(f)),y=[],v=[];try{for(var i,s,a,u,d,c,p,h=!0,m=(s=void 0,dY(g));!(i=(p=yield dJ(m.next())).done);h=!0)if(u=p.value,h=!1,yield yield dJ(u),u.candidates&&(null==(d=u.candidates[0])?void 0:d.content)){for(let e of(v.push(u.candidates[0].content),null!=(c=u.candidates[0].content.parts)?c:[]))if(o<r&&e.functionCall){if(!e.functionCall.name)throw Error("Function call name was not returned by the model.");if(t.has(e.functionCall.name)){let n=yield dJ(t.get(e.functionCall.name).callTool([e.functionCall]));y.push(...n)}else throw Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${t.keys()}, mising tool: ${e.functionCall.name}`)}}}catch(e){s={error:e}}finally{try{!h&&!i&&(a=m.return)&&(yield dJ(a.call(m)))}finally{if(s)throw s.error}}if(y.length>0){l=!0;let e=new uz;e.candidates=[{content:{role:"user",parts:y}}],yield yield dJ(e);let t=[];t.push(...v),t.push({role:"user",parts:y});let i=dw(n.contents).concat(t);n.contents=i}else break}})}(this,await this.initAfcToolsMap(e),e)}async generateContentInternal(e){var t,n,i,r;let l="",o={};if(this.apiClient.isVertexAI()){let i=d3(this.apiClient,e);return l=uF("{model}:generateContent",i._url),o=i._query,delete i._url,delete i._query,this.apiClient.request({path:l,queryParams:o,body:JSON.stringify(i),httpMethod:"POST",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(n=e.config)?void 0:n.abortSignal}).then(e=>e.json().then(t=>(t.sdkHttpResponse={headers:e.headers},t))).then(e=>{let t=d8(e),n=new uz;return Object.assign(n,t),n})}{let t=d4(this.apiClient,e);return l=uF("{model}:generateContent",t._url),o=t._query,delete t._url,delete t._query,this.apiClient.request({path:l,queryParams:o,body:JSON.stringify(t),httpMethod:"POST",httpOptions:null==(i=e.config)?void 0:i.httpOptions,abortSignal:null==(r=e.config)?void 0:r.abortSignal}).then(e=>e.json().then(t=>(t.sdkHttpResponse={headers:e.headers},t))).then(e=>{let t=d6(e),n=new uz;return Object.assign(n,t),n})}}async generateContentStreamInternal(e){var t,n,i,r;let l="",o={};if(this.apiClient.isVertexAI()){let i=d3(this.apiClient,e);return l=uF("{model}:streamGenerateContent?alt=sse",i._url),o=i._query,delete i._url,delete i._query,this.apiClient.requestStream({path:l,queryParams:o,body:JSON.stringify(i),httpMethod:"POST",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(n=e.config)?void 0:n.abortSignal}).then(function(e){return dW(this,arguments,function*(){var t,n,i,r;try{for(var l,o=!0,s=dY(e);!(t=(l=yield dJ(s.next())).done);o=!0){r=l.value,o=!1;let e=d8((yield dJ(r.json())));e.sdkHttpResponse={headers:r.headers};let t=new uz;Object.assign(t,e),yield yield dJ(t)}}catch(e){n={error:e}}finally{try{!o&&!t&&(i=s.return)&&(yield dJ(i.call(s)))}finally{if(n)throw n.error}}})})}{let t=d4(this.apiClient,e);return l=uF("{model}:streamGenerateContent?alt=sse",t._url),o=t._query,delete t._url,delete t._query,this.apiClient.requestStream({path:l,queryParams:o,body:JSON.stringify(t),httpMethod:"POST",httpOptions:null==(i=e.config)?void 0:i.httpOptions,abortSignal:null==(r=e.config)?void 0:r.abortSignal}).then(function(e){return dW(this,arguments,function*(){var t,n,i,r;try{for(var l,o=!0,s=dY(e);!(t=(l=yield dJ(s.next())).done);o=!0){r=l.value,o=!1;let e=d6((yield dJ(r.json())));e.sdkHttpResponse={headers:r.headers};let t=new uz;Object.assign(t,e),yield yield dJ(t)}}catch(e){n={error:e}}finally{try{!o&&!t&&(i=s.return)&&(yield dJ(i.call(s)))}finally{if(n)throw n.error}}})})}}async embedContent(e){var t,n,i,r;let l="",o={};if(this.apiClient.isVertexAI()){let i=function(e,t){let n,i,r,l,o,s={},a=uG(t,["model"]);null!=a&&uq(s,["_url","model"],dd(e,a));let u=uG(t,["contents"]);if(null!=u){let t=dS(e,u);Array.isArray(t)&&(t=t.map(e=>e)),uq(s,["instances[]","content"],t)}let d=uG(t,["config"]);return null!=d&&(n=uG(d,["taskType"]),void 0!==s&&null!=n&&uq(s,["instances[]","task_type"],n),i=uG(d,["title"]),void 0!==s&&null!=i&&uq(s,["instances[]","title"],i),r=uG(d,["outputDimensionality"]),void 0!==s&&null!=r&&uq(s,["parameters","outputDimensionality"],r),l=uG(d,["mimeType"]),void 0!==s&&null!=l&&uq(s,["instances[]","mimeType"],l),o=uG(d,["autoTruncate"]),void 0!==s&&null!=o&&uq(s,["parameters","autoTruncate"],o)),s}(this.apiClient,e);return l=uF("{model}:predict",i._url),o=i._query,delete i._url,delete i._query,this.apiClient.request({path:l,queryParams:o,body:JSON.stringify(i),httpMethod:"POST",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(n=e.config)?void 0:n.abortSignal}).then(e=>e.json().then(t=>(t.sdkHttpResponse={headers:e.headers},t))).then(e=>{let t=function(e){let t={},n=uG(e,["sdkHttpResponse"]);null!=n&&uq(t,["sdkHttpResponse"],n);let i=uG(e,["predictions[]","embeddings"]);if(null!=i){let e=i;Array.isArray(e)&&(e=e.map(e=>{var t;let n,i,r,l,o,s;return n={},null!=(i=uG(e,["values"]))&&uq(n,["values"],i),null!=(r=uG(e,["statistics"]))&&uq(n,["statistics"],(l={},null!=(o=uG(t=r,["truncated"]))&&uq(l,["truncated"],o),null!=(s=uG(t,["token_count"]))&&uq(l,["tokenCount"],s),l)),n})),uq(t,["embeddings"],e)}let r=uG(e,["metadata"]);return null!=r&&uq(t,["metadata"],r),t}(e),n=new uJ;return Object.assign(n,t),n})}{let t=function(e,t){let n={},i=uG(t,["model"]);null!=i&&uq(n,["_url","model"],dd(e,i));let r=uG(t,["contents"]);if(null!=r){let t=dS(e,r);Array.isArray(t)&&(t=t.map(e=>e)),uq(n,["requests[]","content"],t)}let l=uG(t,["config"]);null!=l&&function(e,t){let n=uG(e,["taskType"]);void 0!==t&&null!=n&&uq(t,["requests[]","taskType"],n);let i=uG(e,["title"]);void 0!==t&&null!=i&&uq(t,["requests[]","title"],i);let r=uG(e,["outputDimensionality"]);if(void 0!==t&&null!=r&&uq(t,["requests[]","outputDimensionality"],r),void 0!==uG(e,["mimeType"]))throw Error("mimeType parameter is not supported in Gemini API.");if(void 0!==uG(e,["autoTruncate"]))throw Error("autoTruncate parameter is not supported in Gemini API.")}(l,n);let o=uG(t,["model"]);return void 0!==o&&uq(n,["requests[]","model"],dd(e,o)),n}(this.apiClient,e);return l=uF("{model}:batchEmbedContents",t._url),o=t._query,delete t._url,delete t._query,this.apiClient.request({path:l,queryParams:o,body:JSON.stringify(t),httpMethod:"POST",httpOptions:null==(i=e.config)?void 0:i.httpOptions,abortSignal:null==(r=e.config)?void 0:r.abortSignal}).then(e=>e.json().then(t=>(t.sdkHttpResponse={headers:e.headers},t))).then(e=>{let t=function(e){let t={},n=uG(e,["sdkHttpResponse"]);null!=n&&uq(t,["sdkHttpResponse"],n);let i=uG(e,["embeddings"]);if(null!=i){let e=i;Array.isArray(e)&&(e=e.map(e=>e)),uq(t,["embeddings"],e)}let r=uG(e,["metadata"]);return null!=r&&uq(t,["metadata"],r),t}(e),n=new uJ;return Object.assign(n,t),n})}}async generateImagesInternal(e){var t,n,i,r,l,o;let s="",a={};if(this.apiClient.isVertexAI()){let i,r,o,u,d,c,p,h,m,f,g,y,v,x,b,E,S,w,T,A,C,I=(l=this.apiClient,i={},null!=(r=uG(e,["model"]))&&uq(i,["_url","model"],dd(l,r)),null!=(o=uG(e,["prompt"]))&&uq(i,["instances[0]","prompt"],o),null!=(u=uG(e,["config"]))&&(d=uG(u,["outputGcsUri"]),void 0!==i&&null!=d&&uq(i,["parameters","storageUri"],d),c=uG(u,["negativePrompt"]),void 0!==i&&null!=c&&uq(i,["parameters","negativePrompt"],c),p=uG(u,["numberOfImages"]),void 0!==i&&null!=p&&uq(i,["parameters","sampleCount"],p),h=uG(u,["aspectRatio"]),void 0!==i&&null!=h&&uq(i,["parameters","aspectRatio"],h),m=uG(u,["guidanceScale"]),void 0!==i&&null!=m&&uq(i,["parameters","guidanceScale"],m),f=uG(u,["seed"]),void 0!==i&&null!=f&&uq(i,["parameters","seed"],f),g=uG(u,["safetyFilterLevel"]),void 0!==i&&null!=g&&uq(i,["parameters","safetySetting"],g),y=uG(u,["personGeneration"]),void 0!==i&&null!=y&&uq(i,["parameters","personGeneration"],y),v=uG(u,["includeSafetyAttributes"]),void 0!==i&&null!=v&&uq(i,["parameters","includeSafetyAttributes"],v),x=uG(u,["includeRaiReason"]),void 0!==i&&null!=x&&uq(i,["parameters","includeRaiReason"],x),b=uG(u,["language"]),void 0!==i&&null!=b&&uq(i,["parameters","language"],b),E=uG(u,["outputMimeType"]),void 0!==i&&null!=E&&uq(i,["parameters","outputOptions","mimeType"],E),S=uG(u,["outputCompressionQuality"]),void 0!==i&&null!=S&&uq(i,["parameters","outputOptions","compressionQuality"],S),w=uG(u,["addWatermark"]),void 0!==i&&null!=w&&uq(i,["parameters","addWatermark"],w),T=uG(u,["labels"]),void 0!==i&&null!=T&&uq(i,["labels"],T),A=uG(u,["imageSize"]),void 0!==i&&null!=A&&uq(i,["parameters","sampleImageSize"],A),C=uG(u,["enhancePrompt"]),void 0!==i&&null!=C&&uq(i,["parameters","enhancePrompt"],C)),i);return s=uF("{model}:predict",I._url),a=I._query,delete I._url,delete I._query,this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(I),httpMethod:"POST",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(n=e.config)?void 0:n.abortSignal}).then(e=>e.json().then(t=>(t.sdkHttpResponse={headers:e.headers},t))).then(e=>{let t=function(e){let t={},n=uG(e,["sdkHttpResponse"]);null!=n&&uq(t,["sdkHttpResponse"],n);let i=uG(e,["predictions"]);if(null!=i){let e=i;Array.isArray(e)&&(e=e.map(e=>d9(e))),uq(t,["generatedImages"],e)}let r=uG(e,["positivePromptSafetyAttributes"]);return null!=r&&uq(t,["positivePromptSafetyAttributes"],cl(r)),t}(e),n=new uW;return Object.assign(n,t),n})}{let t,n,l,u,d=(o=this.apiClient,t={},null!=(n=uG(e,["model"]))&&uq(t,["_url","model"],dd(o,n)),null!=(l=uG(e,["prompt"]))&&uq(t,["instances[0]","prompt"],l),null!=(u=uG(e,["config"]))&&function(e,t){if(void 0!==uG(e,["outputGcsUri"]))throw Error("outputGcsUri parameter is not supported in Gemini API.");if(void 0!==uG(e,["negativePrompt"]))throw Error("negativePrompt parameter is not supported in Gemini API.");let n=uG(e,["numberOfImages"]);void 0!==t&&null!=n&&uq(t,["parameters","sampleCount"],n);let i=uG(e,["aspectRatio"]);void 0!==t&&null!=i&&uq(t,["parameters","aspectRatio"],i);let r=uG(e,["guidanceScale"]);if(void 0!==t&&null!=r&&uq(t,["parameters","guidanceScale"],r),void 0!==uG(e,["seed"]))throw Error("seed parameter is not supported in Gemini API.");let l=uG(e,["safetyFilterLevel"]);void 0!==t&&null!=l&&uq(t,["parameters","safetySetting"],l);let o=uG(e,["personGeneration"]);void 0!==t&&null!=o&&uq(t,["parameters","personGeneration"],o);let s=uG(e,["includeSafetyAttributes"]);void 0!==t&&null!=s&&uq(t,["parameters","includeSafetyAttributes"],s);let a=uG(e,["includeRaiReason"]);void 0!==t&&null!=a&&uq(t,["parameters","includeRaiReason"],a);let u=uG(e,["language"]);void 0!==t&&null!=u&&uq(t,["parameters","language"],u);let d=uG(e,["outputMimeType"]);void 0!==t&&null!=d&&uq(t,["parameters","outputOptions","mimeType"],d);let c=uG(e,["outputCompressionQuality"]);if(void 0!==t&&null!=c&&uq(t,["parameters","outputOptions","compressionQuality"],c),void 0!==uG(e,["addWatermark"]))throw Error("addWatermark parameter is not supported in Gemini API.");if(void 0!==uG(e,["labels"]))throw Error("labels parameter is not supported in Gemini API.");let p=uG(e,["imageSize"]);if(void 0!==t&&null!=p&&uq(t,["parameters","sampleImageSize"],p),void 0!==uG(e,["enhancePrompt"]))throw Error("enhancePrompt parameter is not supported in Gemini API.")}(u,t),t);return s=uF("{model}:predict",d._url),a=d._query,delete d._url,delete d._query,this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(d),httpMethod:"POST",httpOptions:null==(i=e.config)?void 0:i.httpOptions,abortSignal:null==(r=e.config)?void 0:r.abortSignal}).then(e=>e.json().then(t=>(t.sdkHttpResponse={headers:e.headers},t))).then(e=>{let t=function(e){let t={},n=uG(e,["sdkHttpResponse"]);null!=n&&uq(t,["sdkHttpResponse"],n);let i=uG(e,["predictions"]);if(null!=i){let e=i;Array.isArray(e)&&(e=e.map(e=>{var t,n;let i,r,l,o,s,a,u;return i={},null!=(r=uG(t=e,["_self"]))&&uq(i,["image"],(l={},null!=(o=uG(n=r,["bytesBase64Encoded"]))&&uq(l,["imageBytes"],uH(o)),null!=(s=uG(n,["mimeType"]))&&uq(l,["mimeType"],s),l)),null!=(a=uG(t,["raiFilteredReason"]))&&uq(i,["raiFilteredReason"],a),null!=(u=uG(t,["_self"]))&&uq(i,["safetyAttributes"],cr(u)),i})),uq(t,["generatedImages"],e)}let r=uG(e,["positivePromptSafetyAttributes"]);return null!=r&&uq(t,["positivePromptSafetyAttributes"],cr(r)),t}(e),n=new uW;return Object.assign(n,t),n})}}async editImageInternal(e){var t,n;let i="",r={};if(this.apiClient.isVertexAI()){let l=function(e,t){let n,i,r,l,o,s,a,u,d,c,p,h,m,f,g,y,v,x={},b=uG(t,["model"]);null!=b&&uq(x,["_url","model"],dd(e,b));let E=uG(t,["prompt"]);null!=E&&uq(x,["instances[0]","prompt"],E);let S=uG(t,["referenceImages"]);if(null!=S){let e=S;Array.isArray(e)&&(e=e.map(e=>(function(e){let t,n,i,r,l,o,s,a={},u=uG(e,["referenceImage"]);null!=u&&uq(a,["referenceImage"],ct(u));let d=uG(e,["referenceId"]);null!=d&&uq(a,["referenceId"],d);let c=uG(e,["referenceType"]);null!=c&&uq(a,["referenceType"],c);let p=uG(e,["maskImageConfig"]);null!=p&&uq(a,["maskImageConfig"],(t={},null!=(n=uG(p,["maskMode"]))&&uq(t,["maskMode"],n),null!=(i=uG(p,["segmentationClasses"]))&&uq(t,["maskClasses"],i),null!=(r=uG(p,["maskDilation"]))&&uq(t,["dilation"],r),t));let h=uG(e,["controlImageConfig"]);null!=h&&uq(a,["controlImageConfig"],(l={},null!=(o=uG(h,["controlType"]))&&uq(l,["controlType"],o),null!=(s=uG(h,["enableControlImageComputation"]))&&uq(l,["computeControl"],s),l));let m=uG(e,["styleImageConfig"]);null!=m&&uq(a,["styleImageConfig"],m);let f=uG(e,["subjectImageConfig"]);return null!=f&&uq(a,["subjectImageConfig"],f),a})(e))),uq(x,["instances[0]","referenceImages"],e)}let w=uG(t,["config"]);return null!=w&&(n=uG(w,["outputGcsUri"]),void 0!==x&&null!=n&&uq(x,["parameters","storageUri"],n),i=uG(w,["negativePrompt"]),void 0!==x&&null!=i&&uq(x,["parameters","negativePrompt"],i),r=uG(w,["numberOfImages"]),void 0!==x&&null!=r&&uq(x,["parameters","sampleCount"],r),l=uG(w,["aspectRatio"]),void 0!==x&&null!=l&&uq(x,["parameters","aspectRatio"],l),o=uG(w,["guidanceScale"]),void 0!==x&&null!=o&&uq(x,["parameters","guidanceScale"],o),s=uG(w,["seed"]),void 0!==x&&null!=s&&uq(x,["parameters","seed"],s),a=uG(w,["safetyFilterLevel"]),void 0!==x&&null!=a&&uq(x,["parameters","safetySetting"],a),u=uG(w,["personGeneration"]),void 0!==x&&null!=u&&uq(x,["parameters","personGeneration"],u),d=uG(w,["includeSafetyAttributes"]),void 0!==x&&null!=d&&uq(x,["parameters","includeSafetyAttributes"],d),c=uG(w,["includeRaiReason"]),void 0!==x&&null!=c&&uq(x,["parameters","includeRaiReason"],c),p=uG(w,["language"]),void 0!==x&&null!=p&&uq(x,["parameters","language"],p),h=uG(w,["outputMimeType"]),void 0!==x&&null!=h&&uq(x,["parameters","outputOptions","mimeType"],h),m=uG(w,["outputCompressionQuality"]),void 0!==x&&null!=m&&uq(x,["parameters","outputOptions","compressionQuality"],m),f=uG(w,["addWatermark"]),void 0!==x&&null!=f&&uq(x,["parameters","addWatermark"],f),g=uG(w,["labels"]),void 0!==x&&null!=g&&uq(x,["labels"],g),y=uG(w,["editMode"]),void 0!==x&&null!=y&&uq(x,["parameters","editMode"],y),v=uG(w,["baseSteps"]),void 0!==x&&null!=v&&uq(x,["parameters","editConfig","baseSteps"],v)),x}(this.apiClient,e);return i=uF("{model}:predict",l._url),r=l._query,delete l._url,delete l._query,this.apiClient.request({path:i,queryParams:r,body:JSON.stringify(l),httpMethod:"POST",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(n=e.config)?void 0:n.abortSignal}).then(e=>e.json().then(t=>(t.sdkHttpResponse={headers:e.headers},t))).then(e=>{let t=function(e){let t={},n=uG(e,["sdkHttpResponse"]);null!=n&&uq(t,["sdkHttpResponse"],n);let i=uG(e,["predictions"]);if(null!=i){let e=i;Array.isArray(e)&&(e=e.map(e=>d9(e))),uq(t,["generatedImages"],e)}return t}(e),n=new uY;return Object.assign(n,t),n})}throw Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,n,i;let r="",l={};if(this.apiClient.isVertexAI()){let o,s,a,u,d,c,p,h,m,f,g,y,v,x,b,E,S=(i=this.apiClient,o={},null!=(s=uG(e,["model"]))&&uq(o,["_url","model"],dd(i,s)),null!=(a=uG(e,["image"]))&&uq(o,["instances[0]","image"],ct(a)),null!=(u=uG(e,["upscaleFactor"]))&&uq(o,["parameters","upscaleConfig","upscaleFactor"],u),null!=(d=uG(e,["config"]))&&(c=uG(d,["outputGcsUri"]),void 0!==o&&null!=c&&uq(o,["parameters","storageUri"],c),p=uG(d,["safetyFilterLevel"]),void 0!==o&&null!=p&&uq(o,["parameters","safetySetting"],p),h=uG(d,["personGeneration"]),void 0!==o&&null!=h&&uq(o,["parameters","personGeneration"],h),m=uG(d,["includeRaiReason"]),void 0!==o&&null!=m&&uq(o,["parameters","includeRaiReason"],m),f=uG(d,["outputMimeType"]),void 0!==o&&null!=f&&uq(o,["parameters","outputOptions","mimeType"],f),g=uG(d,["outputCompressionQuality"]),void 0!==o&&null!=g&&uq(o,["parameters","outputOptions","compressionQuality"],g),y=uG(d,["enhanceInputImage"]),void 0!==o&&null!=y&&uq(o,["parameters","upscaleConfig","enhanceInputImage"],y),v=uG(d,["imagePreservationFactor"]),void 0!==o&&null!=v&&uq(o,["parameters","upscaleConfig","imagePreservationFactor"],v),x=uG(d,["labels"]),void 0!==o&&null!=x&&uq(o,["labels"],x),b=uG(d,["numberOfImages"]),void 0!==o&&null!=b&&uq(o,["parameters","sampleCount"],b),E=uG(d,["mode"]),void 0!==o&&null!=E&&uq(o,["parameters","mode"],E)),o);return r=uF("{model}:predict",S._url),l=S._query,delete S._url,delete S._query,this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(S),httpMethod:"POST",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(n=e.config)?void 0:n.abortSignal}).then(e=>e.json().then(t=>(t.sdkHttpResponse={headers:e.headers},t))).then(e=>{let t=function(e){let t={},n=uG(e,["sdkHttpResponse"]);null!=n&&uq(t,["sdkHttpResponse"],n);let i=uG(e,["predictions"]);if(null!=i){let e=i;Array.isArray(e)&&(e=e.map(e=>d9(e))),uq(t,["generatedImages"],e)}return t}(e),n=new uK;return Object.assign(n,t),n})}throw Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,n,i;let r="",l={};if(this.apiClient.isVertexAI()){let o,s,a,u,d,c,p,h,m,f,g,y,v,x,b,E=(i=this.apiClient,o={},null!=(s=uG(e,["model"]))&&uq(o,["_url","model"],dd(i,s)),null!=(a=uG(e,["source"]))&&function(e,t){let n=uG(e,["prompt"]);void 0!==t&&null!=n&&uq(t,["instances[0]","prompt"],n);let i=uG(e,["personImage"]);void 0!==t&&null!=i&&uq(t,["instances[0]","personImage","image"],ct(i));let r=uG(e,["productImages"]);if(void 0!==t&&null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>{let t,n;return t={},null!=(n=uG(e,["productImage"]))&&uq(t,["image"],ct(n)),t})),uq(t,["instances[0]","productImages"],e)}}(a,o),null!=(u=uG(e,["config"]))&&(d=uG(u,["numberOfImages"]),void 0!==o&&null!=d&&uq(o,["parameters","sampleCount"],d),c=uG(u,["baseSteps"]),void 0!==o&&null!=c&&uq(o,["parameters","baseSteps"],c),p=uG(u,["outputGcsUri"]),void 0!==o&&null!=p&&uq(o,["parameters","storageUri"],p),h=uG(u,["seed"]),void 0!==o&&null!=h&&uq(o,["parameters","seed"],h),m=uG(u,["safetyFilterLevel"]),void 0!==o&&null!=m&&uq(o,["parameters","safetySetting"],m),f=uG(u,["personGeneration"]),void 0!==o&&null!=f&&uq(o,["parameters","personGeneration"],f),g=uG(u,["addWatermark"]),void 0!==o&&null!=g&&uq(o,["parameters","addWatermark"],g),y=uG(u,["outputMimeType"]),void 0!==o&&null!=y&&uq(o,["parameters","outputOptions","mimeType"],y),v=uG(u,["outputCompressionQuality"]),void 0!==o&&null!=v&&uq(o,["parameters","outputOptions","compressionQuality"],v),x=uG(u,["enhancePrompt"]),void 0!==o&&null!=x&&uq(o,["parameters","enhancePrompt"],x),b=uG(u,["labels"]),void 0!==o&&null!=b&&uq(o,["labels"],b)),o);return r=uF("{model}:predict",E._url),l=E._query,delete E._url,delete E._query,this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(E),httpMethod:"POST",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(n=e.config)?void 0:n.abortSignal}).then(e=>e.json()).then(e=>{let t=function(e){let t={},n=uG(e,["predictions"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>d9(e))),uq(t,["generatedImages"],e)}return t}(e),n=new uX;return Object.assign(n,t),n})}throw Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,n,i,r,l;let o="",s={};if(this.apiClient.isVertexAI()){let a,u,d,c,p,h,m,f,g,y,v,x,b,E,S,w=(i=this.apiClient,h={},null!=(m=uG(e,["model"]))&&uq(h,["_url","model"],dd(i,m)),null!=(f=uG(e,["source"]))&&(r=f,l=h,d=uG(r,["prompt"]),void 0!==l&&null!=d&&uq(l,["instances[0]","prompt"],d),c=uG(r,["image"]),void 0!==l&&null!=c&&uq(l,["instances[0]","image"],ct(c)),p=uG(r,["scribbleImage"]),void 0!==l&&null!=p&&uq(l,["instances[0]","scribble"],(a={},null!=(u=uG(p,["image"]))&&uq(a,["image"],ct(u)),a))),null!=(g=uG(e,["config"]))&&(y=uG(g,["mode"]),void 0!==h&&null!=y&&uq(h,["parameters","mode"],y),v=uG(g,["maxPredictions"]),void 0!==h&&null!=v&&uq(h,["parameters","maxPredictions"],v),x=uG(g,["confidenceThreshold"]),void 0!==h&&null!=x&&uq(h,["parameters","confidenceThreshold"],x),b=uG(g,["maskDilation"]),void 0!==h&&null!=b&&uq(h,["parameters","maskDilation"],b),E=uG(g,["binaryColorThreshold"]),void 0!==h&&null!=E&&uq(h,["parameters","binaryColorThreshold"],E),S=uG(g,["labels"]),void 0!==h&&null!=S&&uq(h,["labels"],S)),h);return o=uF("{model}:predict",w._url),s=w._query,delete w._url,delete w._query,this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(w),httpMethod:"POST",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(n=e.config)?void 0:n.abortSignal}).then(e=>e.json()).then(e=>{let t=function(e){let t={},n=uG(e,["predictions"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>(function(e){let t={},n=uG(e,["_self"]);null!=n&&uq(t,["mask"],d7(n));let i=uG(e,["labels"]);if(null!=i){let e=i;Array.isArray(e)&&(e=e.map(e=>e)),uq(t,["labels"],e)}return t})(e))),uq(t,["generatedMasks"],e)}return t}(e),n=new uQ;return Object.assign(n,t),n})}throw Error("This method is only supported by the Vertex AI.")}async get(e){var t,n,i,r,l,o;let s="",a={};if(this.apiClient.isVertexAI()){let i,r,o=(l=this.apiClient,i={},null!=(r=uG(e,["model"]))&&uq(i,["_url","name"],dd(l,r)),i);return s=uF("{name}",o._url),a=o._query,delete o._url,delete o._query,this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(o),httpMethod:"GET",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(n=e.config)?void 0:n.abortSignal}).then(e=>e.json()).then(e=>ci(e))}{let t,n,l=(o=this.apiClient,t={},null!=(n=uG(e,["model"]))&&uq(t,["_url","name"],dd(o,n)),t);return s=uF("{name}",l._url),a=l._query,delete l._url,delete l._query,this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"GET",httpOptions:null==(i=e.config)?void 0:i.httpOptions,abortSignal:null==(r=e.config)?void 0:r.abortSignal}).then(e=>e.json()).then(e=>cn(e))}}async listInternal(e){var t,n,i,r,l,o;let s="",a={};if(this.apiClient.isVertexAI()){let i,r,o,u,d,c,p=(l=this.apiClient,i={},null!=(r=uG(e,["config"]))&&(o=uG(r,["pageSize"]),void 0!==i&&null!=o&&uq(i,["_query","pageSize"],o),u=uG(r,["pageToken"]),void 0!==i&&null!=u&&uq(i,["_query","pageToken"],u),d=uG(r,["filter"]),void 0!==i&&null!=d&&uq(i,["_query","filter"],d),c=uG(r,["queryBase"]),void 0!==i&&null!=c&&uq(i,["_url","models_url"],dP(l,c))),i);return s=uF("{models_url}",p._url),a=p._query,delete p._url,delete p._query,this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(p),httpMethod:"GET",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(n=e.config)?void 0:n.abortSignal}).then(e=>e.json().then(t=>(t.sdkHttpResponse={headers:e.headers},t))).then(e=>{let t=function(e){let t={},n=uG(e,["sdkHttpResponse"]);null!=n&&uq(t,["sdkHttpResponse"],n);let i=uG(e,["nextPageToken"]);null!=i&&uq(t,["nextPageToken"],i);let r=uG(e,["_self"]);if(null!=r){let e=dk(r);Array.isArray(e)&&(e=e.map(e=>ci(e))),uq(t,["models"],e)}return t}(e),n=new uZ;return Object.assign(n,t),n})}{let t,n,l,u,d,c,p=(o=this.apiClient,t={},null!=(n=uG(e,["config"]))&&(l=uG(n,["pageSize"]),void 0!==t&&null!=l&&uq(t,["_query","pageSize"],l),u=uG(n,["pageToken"]),void 0!==t&&null!=u&&uq(t,["_query","pageToken"],u),d=uG(n,["filter"]),void 0!==t&&null!=d&&uq(t,["_query","filter"],d),c=uG(n,["queryBase"]),void 0!==t&&null!=c&&uq(t,["_url","models_url"],dP(o,c))),t);return s=uF("{models_url}",p._url),a=p._query,delete p._url,delete p._query,this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(p),httpMethod:"GET",httpOptions:null==(i=e.config)?void 0:i.httpOptions,abortSignal:null==(r=e.config)?void 0:r.abortSignal}).then(e=>e.json().then(t=>(t.sdkHttpResponse={headers:e.headers},t))).then(e=>{let t=function(e){let t={},n=uG(e,["sdkHttpResponse"]);null!=n&&uq(t,["sdkHttpResponse"],n);let i=uG(e,["nextPageToken"]);null!=i&&uq(t,["nextPageToken"],i);let r=uG(e,["_self"]);if(null!=r){let e=dk(r);Array.isArray(e)&&(e=e.map(e=>cn(e))),uq(t,["models"],e)}return t}(e),n=new uZ;return Object.assign(n,t),n})}}async update(e){var t,n,i,r,l,o;let s="",a={};if(this.apiClient.isVertexAI()){let i,r,o,u,d,c,p=(l=this.apiClient,i={},null!=(r=uG(e,["model"]))&&uq(i,["_url","model"],dd(l,r)),null!=(o=uG(e,["config"]))&&(u=uG(o,["displayName"]),void 0!==i&&null!=u&&uq(i,["displayName"],u),d=uG(o,["description"]),void 0!==i&&null!=d&&uq(i,["description"],d),c=uG(o,["defaultCheckpointId"]),void 0!==i&&null!=c&&uq(i,["defaultCheckpointId"],c)),i);return s=uF("{model}",p._url),a=p._query,delete p._url,delete p._query,this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(n=e.config)?void 0:n.abortSignal}).then(e=>e.json()).then(e=>ci(e))}{let t,n,l,u,d,c,p=(o=this.apiClient,t={},null!=(n=uG(e,["model"]))&&uq(t,["_url","name"],dd(o,n)),null!=(l=uG(e,["config"]))&&(u=uG(l,["displayName"]),void 0!==t&&null!=u&&uq(t,["displayName"],u),d=uG(l,["description"]),void 0!==t&&null!=d&&uq(t,["description"],d),c=uG(l,["defaultCheckpointId"]),void 0!==t&&null!=c&&uq(t,["defaultCheckpointId"],c)),t);return s=uF("{name}",p._url),a=p._query,delete p._url,delete p._query,this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:null==(i=e.config)?void 0:i.httpOptions,abortSignal:null==(r=e.config)?void 0:r.abortSignal}).then(e=>e.json()).then(e=>cn(e))}}async delete(e){var t,n,i,r,l,o;let s="",a={};if(this.apiClient.isVertexAI()){let i,r,o=(l=this.apiClient,i={},null!=(r=uG(e,["model"]))&&uq(i,["_url","name"],dd(l,r)),i);return s=uF("{name}",o._url),a=o._query,delete o._url,delete o._query,this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(o),httpMethod:"DELETE",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(n=e.config)?void 0:n.abortSignal}).then(e=>e.json().then(t=>(t.sdkHttpResponse={headers:e.headers},t))).then(e=>{let t,n,i=(t={},null!=(n=uG(e,["sdkHttpResponse"]))&&uq(t,["sdkHttpResponse"],n),t),r=new u0;return Object.assign(r,i),r})}{let t,n,l=(o=this.apiClient,t={},null!=(n=uG(e,["model"]))&&uq(t,["_url","name"],dd(o,n)),t);return s=uF("{name}",l._url),a=l._query,delete l._url,delete l._query,this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:null==(i=e.config)?void 0:i.httpOptions,abortSignal:null==(r=e.config)?void 0:r.abortSignal}).then(e=>e.json().then(t=>(t.sdkHttpResponse={headers:e.headers},t))).then(e=>{let t,n,i=(t={},null!=(n=uG(e,["sdkHttpResponse"]))&&uq(t,["sdkHttpResponse"],n),t),r=new u0;return Object.assign(r,i),r})}}async countTokens(e){var t,n,i,r;let l="",o={};if(this.apiClient.isVertexAI()){let i=function(e,t){let n={},i=uG(t,["model"]);null!=i&&uq(n,["_url","model"],dd(e,i));let r=uG(t,["contents"]);if(null!=r){let e=dw(r);Array.isArray(e)&&(e=e.map(e=>e)),uq(n,["contents"],e)}let l=uG(t,["config"]);return null!=l&&function(e,t){let n=uG(e,["systemInstruction"]);void 0!==t&&null!=n&&uq(t,["systemInstruction"],dE(n));let i=uG(e,["tools"]);if(void 0!==t&&null!=i){let e=i;Array.isArray(e)&&(e=e.map(e=>co(e))),uq(t,["tools"],e)}let r=uG(e,["generationConfig"]);void 0!==t&&null!=r&&uq(t,["generationConfig"],function(e){let t={},n=uG(e,["modelSelectionConfig"]);null!=n&&uq(t,["modelConfig"],n);let i=uG(e,["responseJsonSchema"]);null!=i&&uq(t,["responseJsonSchema"],i);let r=uG(e,["audioTimestamp"]);null!=r&&uq(t,["audioTimestamp"],r);let l=uG(e,["candidateCount"]);null!=l&&uq(t,["candidateCount"],l);let o=uG(e,["enableAffectiveDialog"]);null!=o&&uq(t,["enableAffectiveDialog"],o);let s=uG(e,["frequencyPenalty"]);null!=s&&uq(t,["frequencyPenalty"],s);let a=uG(e,["logprobs"]);null!=a&&uq(t,["logprobs"],a);let u=uG(e,["maxOutputTokens"]);null!=u&&uq(t,["maxOutputTokens"],u);let d=uG(e,["mediaResolution"]);null!=d&&uq(t,["mediaResolution"],d);let c=uG(e,["presencePenalty"]);null!=c&&uq(t,["presencePenalty"],c);let p=uG(e,["responseLogprobs"]);null!=p&&uq(t,["responseLogprobs"],p);let h=uG(e,["responseMimeType"]);null!=h&&uq(t,["responseMimeType"],h);let m=uG(e,["responseModalities"]);null!=m&&uq(t,["responseModalities"],m);let f=uG(e,["responseSchema"]);null!=f&&uq(t,["responseSchema"],f);let g=uG(e,["routingConfig"]);null!=g&&uq(t,["routingConfig"],g);let y=uG(e,["seed"]);null!=y&&uq(t,["seed"],y);let v=uG(e,["speechConfig"]);null!=v&&uq(t,["speechConfig"],v);let x=uG(e,["stopSequences"]);null!=x&&uq(t,["stopSequences"],x);let b=uG(e,["temperature"]);null!=b&&uq(t,["temperature"],b);let E=uG(e,["thinkingConfig"]);null!=E&&uq(t,["thinkingConfig"],E);let S=uG(e,["topK"]);null!=S&&uq(t,["topK"],S);let w=uG(e,["topP"]);if(null!=w&&uq(t,["topP"],w),void 0!==uG(e,["enableEnhancedCivicAnswers"]))throw Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}(r))}(l,n),n}(this.apiClient,e);return l=uF("{model}:countTokens",i._url),o=i._query,delete i._url,delete i._query,this.apiClient.request({path:l,queryParams:o,body:JSON.stringify(i),httpMethod:"POST",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(n=e.config)?void 0:n.abortSignal}).then(e=>e.json().then(t=>(t.sdkHttpResponse={headers:e.headers},t))).then(e=>{let t,n,i,r=(t={},null!=(n=uG(e,["sdkHttpResponse"]))&&uq(t,["sdkHttpResponse"],n),null!=(i=uG(e,["totalTokens"]))&&uq(t,["totalTokens"],i),t),l=new u1;return Object.assign(l,r),l})}{let t=function(e,t){let n={},i=uG(t,["model"]);null!=i&&uq(n,["_url","model"],dd(e,i));let r=uG(t,["contents"]);if(null!=r){let e=dw(r);Array.isArray(e)&&(e=e.map(e=>d5(e))),uq(n,["contents"],e)}let l=uG(t,["config"]);return null!=l&&function(e){if(void 0!==uG(e,["systemInstruction"]))throw Error("systemInstruction parameter is not supported in Gemini API.");if(void 0!==uG(e,["tools"]))throw Error("tools parameter is not supported in Gemini API.");if(void 0!==uG(e,["generationConfig"]))throw Error("generationConfig parameter is not supported in Gemini API.")}(l),n}(this.apiClient,e);return l=uF("{model}:countTokens",t._url),o=t._query,delete t._url,delete t._query,this.apiClient.request({path:l,queryParams:o,body:JSON.stringify(t),httpMethod:"POST",httpOptions:null==(i=e.config)?void 0:i.httpOptions,abortSignal:null==(r=e.config)?void 0:r.abortSignal}).then(e=>e.json().then(t=>(t.sdkHttpResponse={headers:e.headers},t))).then(e=>{let t,n,i,r,l=(t={},null!=(n=uG(e,["sdkHttpResponse"]))&&uq(t,["sdkHttpResponse"],n),null!=(i=uG(e,["totalTokens"]))&&uq(t,["totalTokens"],i),null!=(r=uG(e,["cachedContentTokenCount"]))&&uq(t,["cachedContentTokenCount"],r),t),o=new u1;return Object.assign(o,l),o})}}async computeTokens(e){var t,n;let i="",r={};if(this.apiClient.isVertexAI()){let l=function(e,t){let n={},i=uG(t,["model"]);null!=i&&uq(n,["_url","model"],dd(e,i));let r=uG(t,["contents"]);if(null!=r){let e=dw(r);Array.isArray(e)&&(e=e.map(e=>e)),uq(n,["contents"],e)}return n}(this.apiClient,e);return i=uF("{model}:computeTokens",l._url),r=l._query,delete l._url,delete l._query,this.apiClient.request({path:i,queryParams:r,body:JSON.stringify(l),httpMethod:"POST",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(n=e.config)?void 0:n.abortSignal}).then(e=>e.json().then(t=>(t.sdkHttpResponse={headers:e.headers},t))).then(e=>{let t=function(e){let t={},n=uG(e,["sdkHttpResponse"]);null!=n&&uq(t,["sdkHttpResponse"],n);let i=uG(e,["tokensInfo"]);if(null!=i){let e=i;Array.isArray(e)&&(e=e.map(e=>e)),uq(t,["tokensInfo"],e)}return t}(e),n=new u2;return Object.assign(n,t),n})}throw Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,n,i,r,l,o,s,a,u,d;let c="",p={};if(this.apiClient.isVertexAI()){let i,r,o,u,d,h,m,f,g,y,v=(l=this.apiClient,u={},null!=(d=uG(e,["model"]))&&uq(u,["_url","model"],dd(l,d)),null!=(h=uG(e,["prompt"]))&&uq(u,["instances[0]","prompt"],h),null!=(m=uG(e,["image"]))&&uq(u,["instances[0]","image"],ct(m)),null!=(f=uG(e,["video"]))&&uq(u,["instances[0]","video"],ca(f)),null!=(g=uG(e,["source"]))&&(s=g,a=u,i=uG(s,["prompt"]),void 0!==a&&null!=i&&uq(a,["instances[0]","prompt"],i),r=uG(s,["image"]),void 0!==a&&null!=r&&uq(a,["instances[0]","image"],ct(r)),o=uG(s,["video"]),void 0!==a&&null!=o&&uq(a,["instances[0]","video"],ca(o))),null!=(y=uG(e,["config"]))&&function(e,t){var n;let i,r,l,o=uG(e,["numberOfVideos"]);void 0!==t&&null!=o&&uq(t,["parameters","sampleCount"],o);let s=uG(e,["outputGcsUri"]);void 0!==t&&null!=s&&uq(t,["parameters","storageUri"],s);let a=uG(e,["fps"]);void 0!==t&&null!=a&&uq(t,["parameters","fps"],a);let u=uG(e,["durationSeconds"]);void 0!==t&&null!=u&&uq(t,["parameters","durationSeconds"],u);let d=uG(e,["seed"]);void 0!==t&&null!=d&&uq(t,["parameters","seed"],d);let c=uG(e,["aspectRatio"]);void 0!==t&&null!=c&&uq(t,["parameters","aspectRatio"],c);let p=uG(e,["resolution"]);void 0!==t&&null!=p&&uq(t,["parameters","resolution"],p);let h=uG(e,["personGeneration"]);void 0!==t&&null!=h&&uq(t,["parameters","personGeneration"],h);let m=uG(e,["pubsubTopic"]);void 0!==t&&null!=m&&uq(t,["parameters","pubsubTopic"],m);let f=uG(e,["negativePrompt"]);void 0!==t&&null!=f&&uq(t,["parameters","negativePrompt"],f);let g=uG(e,["enhancePrompt"]);void 0!==t&&null!=g&&uq(t,["parameters","enhancePrompt"],g);let y=uG(e,["generateAudio"]);void 0!==t&&null!=y&&uq(t,["parameters","generateAudio"],y);let v=uG(e,["lastFrame"]);void 0!==t&&null!=v&&uq(t,["instances[0]","lastFrame"],ct(v));let x=uG(e,["referenceImages"]);if(void 0!==t&&null!=x){let e=x;Array.isArray(e)&&(e=e.map(e=>{var t;let n,i,r;return n={},null!=(i=uG(t=e,["image"]))&&uq(n,["image"],ct(i)),null!=(r=uG(t,["referenceType"]))&&uq(n,["referenceType"],r),n})),uq(t,["instances[0]","referenceImages"],e)}let b=uG(e,["mask"]);void 0!==t&&null!=b&&uq(t,["instances[0]","mask"],(i={},null!=(r=uG(n=b,["image"]))&&uq(i,["_self"],ct(r)),null!=(l=uG(n,["maskMode"]))&&uq(i,["maskMode"],l),i));let E=uG(e,["compressionQuality"]);void 0!==t&&null!=E&&uq(t,["parameters","compressionQuality"],E)}(y,u),u);return c=uF("{model}:predictLongRunning",v._url),p=v._query,delete v._url,delete v._query,this.apiClient.request({path:c,queryParams:p,body:JSON.stringify(v),httpMethod:"POST",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(n=e.config)?void 0:n.abortSignal}).then(e=>e.json()).then(e=>{let t,n,i,r,l,o,s=(t={},null!=(n=uG(e,["name"]))&&uq(t,["name"],n),null!=(i=uG(e,["metadata"]))&&uq(t,["metadata"],i),null!=(r=uG(e,["done"]))&&uq(t,["done"],r),null!=(l=uG(e,["error"]))&&uq(t,["error"],l),null!=(o=uG(e,["response"]))&&uq(t,["response"],function(e){let t={},n=uG(e,["videos"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>{var t;let n,i,r,l,o,s;return n={},null!=(i=uG(e,["_self"]))&&uq(n,["video"],(r={},null!=(l=uG(t=i,["gcsUri"]))&&uq(r,["uri"],l),null!=(o=uG(t,["bytesBase64Encoded"]))&&uq(r,["videoBytes"],uH(o)),null!=(s=uG(t,["mimeType"]))&&uq(r,["mimeType"],s),r)),n})),uq(t,["generatedVideos"],e)}let i=uG(e,["raiMediaFilteredCount"]);null!=i&&uq(t,["raiMediaFilteredCount"],i);let r=uG(e,["raiMediaFilteredReasons"]);return null!=r&&uq(t,["raiMediaFilteredReasons"],r),t}(o)),t),a=new u5;return Object.assign(a,s),a})}{let t,n,l,s,a,h,m,f,g,y,v=(o=this.apiClient,s={},null!=(a=uG(e,["model"]))&&uq(s,["_url","model"],dd(o,a)),null!=(h=uG(e,["prompt"]))&&uq(s,["instances[0]","prompt"],h),null!=(m=uG(e,["image"]))&&uq(s,["instances[0]","image"],ce(m)),null!=(f=uG(e,["video"]))&&uq(s,["instances[0]","video"],cs(f)),null!=(g=uG(e,["source"]))&&(u=g,d=s,t=uG(u,["prompt"]),void 0!==d&&null!=t&&uq(d,["instances[0]","prompt"],t),n=uG(u,["image"]),void 0!==d&&null!=n&&uq(d,["instances[0]","image"],ce(n)),l=uG(u,["video"]),void 0!==d&&null!=l&&uq(d,["instances[0]","video"],cs(l))),null!=(y=uG(e,["config"]))&&function(e,t){let n=uG(e,["numberOfVideos"]);if(void 0!==t&&null!=n&&uq(t,["parameters","sampleCount"],n),void 0!==uG(e,["outputGcsUri"]))throw Error("outputGcsUri parameter is not supported in Gemini API.");if(void 0!==uG(e,["fps"]))throw Error("fps parameter is not supported in Gemini API.");let i=uG(e,["durationSeconds"]);if(void 0!==t&&null!=i&&uq(t,["parameters","durationSeconds"],i),void 0!==uG(e,["seed"]))throw Error("seed parameter is not supported in Gemini API.");let r=uG(e,["aspectRatio"]);void 0!==t&&null!=r&&uq(t,["parameters","aspectRatio"],r);let l=uG(e,["resolution"]);void 0!==t&&null!=l&&uq(t,["parameters","resolution"],l);let o=uG(e,["personGeneration"]);if(void 0!==t&&null!=o&&uq(t,["parameters","personGeneration"],o),void 0!==uG(e,["pubsubTopic"]))throw Error("pubsubTopic parameter is not supported in Gemini API.");let s=uG(e,["negativePrompt"]);void 0!==t&&null!=s&&uq(t,["parameters","negativePrompt"],s);let a=uG(e,["enhancePrompt"]);if(void 0!==t&&null!=a&&uq(t,["parameters","enhancePrompt"],a),void 0!==uG(e,["generateAudio"]))throw Error("generateAudio parameter is not supported in Gemini API.");let u=uG(e,["lastFrame"]);void 0!==t&&null!=u&&uq(t,["instances[0]","lastFrame"],ce(u));let d=uG(e,["referenceImages"]);if(void 0!==t&&null!=d){let e=d;Array.isArray(e)&&(e=e.map(e=>{var t;let n,i,r;return n={},null!=(i=uG(t=e,["image"]))&&uq(n,["image"],ce(i)),null!=(r=uG(t,["referenceType"]))&&uq(n,["referenceType"],r),n})),uq(t,["instances[0]","referenceImages"],e)}if(void 0!==uG(e,["mask"]))throw Error("mask parameter is not supported in Gemini API.");if(void 0!==uG(e,["compressionQuality"]))throw Error("compressionQuality parameter is not supported in Gemini API.")}(y,s),s);return c=uF("{model}:predictLongRunning",v._url),p=v._query,delete v._url,delete v._query,this.apiClient.request({path:c,queryParams:p,body:JSON.stringify(v),httpMethod:"POST",httpOptions:null==(i=e.config)?void 0:i.httpOptions,abortSignal:null==(r=e.config)?void 0:r.abortSignal}).then(e=>e.json()).then(e=>{let t,n,i,r,l,o,s=(t={},null!=(n=uG(e,["name"]))&&uq(t,["name"],n),null!=(i=uG(e,["metadata"]))&&uq(t,["metadata"],i),null!=(r=uG(e,["done"]))&&uq(t,["done"],r),null!=(l=uG(e,["error"]))&&uq(t,["error"],l),null!=(o=uG(e,["response","generateVideoResponse"]))&&uq(t,["response"],function(e){let t={},n=uG(e,["generatedSamples"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>{var t;let n,i,r,l,o,s;return n={},null!=(i=uG(e,["video"]))&&uq(n,["video"],(r={},null!=(l=uG(t=i,["uri"]))&&uq(r,["uri"],l),null!=(o=uG(t,["encodedVideo"]))&&uq(r,["videoBytes"],uH(o)),null!=(s=uG(t,["encoding"]))&&uq(r,["mimeType"],s),r)),n})),uq(t,["generatedVideos"],e)}let i=uG(e,["raiMediaFilteredCount"]);null!=i&&uq(t,["raiMediaFilteredCount"],i);let r=uG(e,["raiMediaFilteredReasons"]);return null!=r&&uq(t,["raiMediaFilteredReasons"],r),t}(o)),t),a=new u5;return Object.assign(a,s),a})}}}class c_ extends uV{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){let t=e.operation,n=e.config;if(void 0===t.name||""===t.name)throw Error("Operation name is required.");if(this.apiClient.isVertexAI()){let e,i=t.name.split("/operations/")[0];n&&"httpOptions"in n&&(e=n.httpOptions);let r=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:i,config:{httpOptions:e}});return t._fromAPIResponse({apiResponse:r,_isVertexAI:!0})}{let e=await this.getVideosOperationInternal({operationName:t.name,config:n});return t._fromAPIResponse({apiResponse:e,_isVertexAI:!1})}}async get(e){let t=e.operation,n=e.config;if(void 0===t.name||""===t.name)throw Error("Operation name is required.");if(this.apiClient.isVertexAI()){let e,i=t.name.split("/operations/")[0];n&&"httpOptions"in n&&(e=n.httpOptions);let r=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:i,config:{httpOptions:e}});return t._fromAPIResponse({apiResponse:r,_isVertexAI:!0})}{let e=await this.getVideosOperationInternal({operationName:t.name,config:n});return t._fromAPIResponse({apiResponse:e,_isVertexAI:!1})}}async getVideosOperationInternal(e){var t,n,i,r;let l="",o={};if(this.apiClient.isVertexAI()){let i,r,s=(i={},null!=(r=uG(e,["operationName"]))&&uq(i,["_url","operationName"],r),i);return l=uF("{operationName}",s._url),o=s._query,delete s._url,delete s._query,this.apiClient.request({path:l,queryParams:o,body:JSON.stringify(s),httpMethod:"GET",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(n=e.config)?void 0:n.abortSignal}).then(e=>e.json())}{let t,n,s=(t={},null!=(n=uG(e,["operationName"]))&&uq(t,["_url","operationName"],n),t);return l=uF("{operationName}",s._url),o=s._query,delete s._url,delete s._query,this.apiClient.request({path:l,queryParams:o,body:JSON.stringify(s),httpMethod:"GET",httpOptions:null==(i=e.config)?void 0:i.httpOptions,abortSignal:null==(r=e.config)?void 0:r.abortSignal}).then(e=>e.json())}}async fetchPredictVideosOperationInternal(e){var t,n;let i="",r={};if(this.apiClient.isVertexAI()){let l,o,s,a=(l={},null!=(o=uG(e,["operationName"]))&&uq(l,["operationName"],o),null!=(s=uG(e,["resourceName"]))&&uq(l,["_url","resourceName"],s),l);return i=uF("{resourceName}:fetchPredictOperation",a._url),r=a._query,delete a._url,delete a._query,this.apiClient.request({path:i,queryParams:r,body:JSON.stringify(a),httpMethod:"POST",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(n=e.config)?void 0:n.abortSignal}).then(e=>e.json())}throw Error("This method is only supported by the Vertex AI.")}}class cO extends uV{constructor(e){super(),this.apiClient=e}async create(e){var t,n,i,r,l;let o="",s={};if(this.apiClient.isVertexAI())throw Error("The client.tokens.create method is only supported by the Gemini Developer API.");{let a,u,d,c,p,h,m,f,g,y,v=(i=this.apiClient,c={},null!=(p=uG(e,["config"]))&&uq(c,["config"],(h=uG(p,["expireTime"]),void 0!==c&&null!=h&&uq(c,["expireTime"],h),m=uG(p,["newSessionExpireTime"]),void 0!==c&&null!=m&&uq(c,["newSessionExpireTime"],m),f=uG(p,["uses"]),void 0!==c&&null!=f&&uq(c,["uses"],f),g=uG(p,["liveConnectConstraints"]),void 0!==c&&null!=g&&uq(c,["bidiGenerateContentSetup"],(r=i,a={},null!=(u=uG(l=g,["model"]))&&uq(a,["setup","model"],dd(r,u)),null!=(d=uG(l,["config"]))&&uq(a,["config"],function(e,t){let n=uG(e,["generationConfig"]);void 0!==t&&null!=n&&uq(t,["setup","generationConfig"],n);let i=uG(e,["responseModalities"]);void 0!==t&&null!=i&&uq(t,["setup","generationConfig","responseModalities"],i);let r=uG(e,["temperature"]);void 0!==t&&null!=r&&uq(t,["setup","generationConfig","temperature"],r);let l=uG(e,["topP"]);void 0!==t&&null!=l&&uq(t,["setup","generationConfig","topP"],l);let o=uG(e,["topK"]);void 0!==t&&null!=o&&uq(t,["setup","generationConfig","topK"],o);let s=uG(e,["maxOutputTokens"]);void 0!==t&&null!=s&&uq(t,["setup","generationConfig","maxOutputTokens"],s);let a=uG(e,["mediaResolution"]);void 0!==t&&null!=a&&uq(t,["setup","generationConfig","mediaResolution"],a);let u=uG(e,["seed"]);void 0!==t&&null!=u&&uq(t,["setup","generationConfig","seed"],u);let d=uG(e,["speechConfig"]);void 0!==t&&null!=d&&uq(t,["setup","generationConfig","speechConfig"],dC(d));let c=uG(e,["thinkingConfig"]);void 0!==t&&null!=c&&uq(t,["setup","generationConfig","thinkingConfig"],c);let p=uG(e,["enableAffectiveDialog"]);void 0!==t&&null!=p&&uq(t,["setup","generationConfig","enableAffectiveDialog"],p);let h=uG(e,["systemInstruction"]);void 0!==t&&null!=h&&uq(t,["setup","systemInstruction"],function(e){let t={},n=uG(e,["parts"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>{var t;let n,i,r,l,o,s,a,u,d,c,p,h;return n={},null!=(i=uG(t=e,["mediaResolution"]))&&uq(n,["mediaResolution"],i),null!=(r=uG(t,["codeExecutionResult"]))&&uq(n,["codeExecutionResult"],r),null!=(l=uG(t,["executableCode"]))&&uq(n,["executableCode"],l),null!=(o=uG(t,["fileData"]))&&uq(n,["fileData"],function(e){let t={};if(void 0!==uG(e,["displayName"]))throw Error("displayName parameter is not supported in Gemini API.");let n=uG(e,["fileUri"]);null!=n&&uq(t,["fileUri"],n);let i=uG(e,["mimeType"]);return null!=i&&uq(t,["mimeType"],i),t}(o)),null!=(s=uG(t,["functionCall"]))&&uq(n,["functionCall"],function(e){let t={},n=uG(e,["id"]);null!=n&&uq(t,["id"],n);let i=uG(e,["args"]);null!=i&&uq(t,["args"],i);let r=uG(e,["name"]);if(null!=r&&uq(t,["name"],r),void 0!==uG(e,["partialArgs"]))throw Error("partialArgs parameter is not supported in Gemini API.");if(void 0!==uG(e,["willContinue"]))throw Error("willContinue parameter is not supported in Gemini API.");return t}(s)),null!=(a=uG(t,["functionResponse"]))&&uq(n,["functionResponse"],a),null!=(u=uG(t,["inlineData"]))&&uq(n,["inlineData"],function(e){let t={},n=uG(e,["data"]);if(null!=n&&uq(t,["data"],n),void 0!==uG(e,["displayName"]))throw Error("displayName parameter is not supported in Gemini API.");let i=uG(e,["mimeType"]);return null!=i&&uq(t,["mimeType"],i),t}(u)),null!=(d=uG(t,["text"]))&&uq(n,["text"],d),null!=(c=uG(t,["thought"]))&&uq(n,["thought"],c),null!=(p=uG(t,["thoughtSignature"]))&&uq(n,["thoughtSignature"],p),null!=(h=uG(t,["videoMetadata"]))&&uq(n,["videoMetadata"],h),n})),uq(t,["parts"],e)}let i=uG(e,["role"]);return null!=i&&uq(t,["role"],i),t}(dE(h)));let m=uG(e,["tools"]);if(void 0!==t&&null!=m){let e=d_(m);Array.isArray(e)&&(e=e.map(e=>(function(e){let t={},n=uG(e,["functionDeclarations"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>e)),uq(t,["functionDeclarations"],e)}if(void 0!==uG(e,["retrieval"]))throw Error("retrieval parameter is not supported in Gemini API.");let i=uG(e,["googleSearchRetrieval"]);null!=i&&uq(t,["googleSearchRetrieval"],i);let r=uG(e,["computerUse"]);null!=r&&uq(t,["computerUse"],r);let l=uG(e,["fileSearch"]);null!=l&&uq(t,["fileSearch"],l);let o=uG(e,["codeExecution"]);if(null!=o&&uq(t,["codeExecution"],o),void 0!==uG(e,["enterpriseWebSearch"]))throw Error("enterpriseWebSearch parameter is not supported in Gemini API.");let s=uG(e,["googleMaps"]);null!=s&&uq(t,["googleMaps"],function(e){let t={};if(void 0!==uG(e,["authConfig"]))throw Error("authConfig parameter is not supported in Gemini API.");let n=uG(e,["enableWidget"]);return null!=n&&uq(t,["enableWidget"],n),t}(s));let a=uG(e,["googleSearch"]);null!=a&&uq(t,["googleSearch"],function(e){let t={};if(void 0!==uG(e,["excludeDomains"]))throw Error("excludeDomains parameter is not supported in Gemini API.");if(void 0!==uG(e,["blockingConfidence"]))throw Error("blockingConfidence parameter is not supported in Gemini API.");let n=uG(e,["timeRangeFilter"]);return null!=n&&uq(t,["timeRangeFilter"],n),t}(a));let u=uG(e,["urlContext"]);return null!=u&&uq(t,["urlContext"],u),t})(dI(e)))),uq(t,["setup","tools"],e)}let f=uG(e,["sessionResumption"]);void 0!==t&&null!=f&&uq(t,["setup","sessionResumption"],function(e){let t={},n=uG(e,["handle"]);if(null!=n&&uq(t,["handle"],n),void 0!==uG(e,["transparent"]))throw Error("transparent parameter is not supported in Gemini API.");return t}(f));let g=uG(e,["inputAudioTranscription"]);void 0!==t&&null!=g&&uq(t,["setup","inputAudioTranscription"],g);let y=uG(e,["outputAudioTranscription"]);void 0!==t&&null!=y&&uq(t,["setup","outputAudioTranscription"],y);let v=uG(e,["realtimeInputConfig"]);void 0!==t&&null!=v&&uq(t,["setup","realtimeInputConfig"],v);let x=uG(e,["contextWindowCompression"]);void 0!==t&&null!=x&&uq(t,["setup","contextWindowCompression"],x);let b=uG(e,["proactivity"]);if(void 0!==t&&null!=b&&uq(t,["setup","proactivity"],b),void 0!==uG(e,["explicitVadSignal"]))throw Error("explicitVadSignal parameter is not supported in Gemini API.");return{}}(d,a)),a)),y=uG(p,["lockAdditionalFields"]),void 0!==c&&null!=y&&uq(c,["fieldMask"],y),{})),c);o=uF("auth_tokens",v._url),s=v._query,delete v.config,delete v._url,delete v._query;let x=function(e,t){let n=null,i=e.bidiGenerateContentSetup;if("object"==typeof i&&null!==i&&"setup"in i){let t=i.setup;"object"==typeof t&&null!==t?(e.bidiGenerateContentSetup=t,n=t):delete e.bidiGenerateContentSetup}else void 0!==i&&delete e.bidiGenerateContentSetup;let r=e.fieldMask;if(n){let i=function(e){let t=[];for(let n in e)if(Object.prototype.hasOwnProperty.call(e,n)){let i=e[n];if("object"==typeof i&&null!=i&&Object.keys(i).length>0){let e=Object.keys(i).map(e=>`${n}.${e}`);t.push(...e)}else t.push(n)}return t.join(",")}(n);if(Array.isArray(null==t?void 0:t.lockAdditionalFields)&&(null==t?void 0:t.lockAdditionalFields.length)===0)i?e.fieldMask=i:delete e.fieldMask;else if((null==t?void 0:t.lockAdditionalFields)&&t.lockAdditionalFields.length>0&&null!==r&&Array.isArray(r)&&r.length>0){let t=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"],n=[];r.length>0&&(n=r.map(e=>t.includes(e)?`generationConfig.${e}`:e));let l=[];i&&l.push(i),n.length>0&&l.push(...n),l.length>0?e.fieldMask=l.join(","):delete e.fieldMask}else delete e.fieldMask}else null!==r&&Array.isArray(r)&&r.length>0?e.fieldMask=r.join(","):delete e.fieldMask;return e}(v,e.config);return this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(x),httpMethod:"POST",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(n=e.config)?void 0:n.abortSignal}).then(e=>e.json()).then(e=>e)}}}class cN extends uV{constructor(e){super(),this.apiClient=e,this.list=async e=>new dG(tI.PAGED_ITEM_DOCUMENTS,t=>this.listInternal({parent:e.parent,config:t.config}),await this.listInternal(e),e)}async get(e){var t,n;let i="",r={};if(this.apiClient.isVertexAI())throw Error("This method is only supported by the Gemini Developer API.");{let l,o,s=(l={},null!=(o=uG(e,["name"]))&&uq(l,["_url","name"],o),l);return i=uF("{name}",s._url),r=s._query,delete s._url,delete s._query,this.apiClient.request({path:i,queryParams:r,body:JSON.stringify(s),httpMethod:"GET",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(n=e.config)?void 0:n.abortSignal}).then(e=>e.json()).then(e=>e)}}async delete(e){var t,n;let i="",r={};if(this.apiClient.isVertexAI())throw Error("This method is only supported by the Gemini Developer API.");{let l,o,s,a,u=(l={},null!=(o=uG(e,["name"]))&&uq(l,["_url","name"],o),null!=(s=uG(e,["config"]))&&(a=uG(s,["force"]),void 0!==l&&null!=a&&uq(l,["_query","force"],a)),l);i=uF("{name}",u._url),r=u._query,delete u._url,delete u._query,await this.apiClient.request({path:i,queryParams:r,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(n=e.config)?void 0:n.abortSignal})}}async listInternal(e){var t,n;let i="",r={};if(this.apiClient.isVertexAI())throw Error("This method is only supported by the Gemini Developer API.");{let l,o,s,a,u,d=(l={},null!=(o=uG(e,["parent"]))&&uq(l,["_url","parent"],o),null!=(s=uG(e,["config"]))&&(a=uG(s,["pageSize"]),void 0!==l&&null!=a&&uq(l,["_query","pageSize"],a),u=uG(s,["pageToken"]),void 0!==l&&null!=u&&uq(l,["_query","pageToken"],u)),l);return i=uF("{parent}/documents",d._url),r=d._query,delete d._url,delete d._query,this.apiClient.request({path:i,queryParams:r,body:JSON.stringify(d),httpMethod:"GET",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(n=e.config)?void 0:n.abortSignal}).then(e=>e.json()).then(e=>{let t=function(e){let t={},n=uG(e,["sdkHttpResponse"]);null!=n&&uq(t,["sdkHttpResponse"],n);let i=uG(e,["nextPageToken"]);null!=i&&uq(t,["nextPageToken"],i);let r=uG(e,["documents"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>e)),uq(t,["documents"],e)}return t}(e),n=new u9;return Object.assign(n,t),n})}}}class cR extends uV{constructor(e,t=new cN(e)){super(),this.apiClient=e,this.documents=t,this.list=async(e={})=>new dG(tI.PAGED_ITEM_FILE_SEARCH_STORES,e=>this.listInternal(e),await this.listInternal(e),e)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var t,n;let i="",r={};if(this.apiClient.isVertexAI())throw Error("This method is only supported by the Gemini Developer API.");{let l,o,s,a=(l={},null!=(o=uG(e,["config"]))&&(s=uG(o,["displayName"]),void 0!==l&&null!=s&&uq(l,["displayName"],s)),l);return i=uF("fileSearchStores",a._url),r=a._query,delete a._url,delete a._query,this.apiClient.request({path:i,queryParams:r,body:JSON.stringify(a),httpMethod:"POST",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(n=e.config)?void 0:n.abortSignal}).then(e=>e.json()).then(e=>e)}}async get(e){var t,n;let i="",r={};if(this.apiClient.isVertexAI())throw Error("This method is only supported by the Gemini Developer API.");{let l,o,s=(l={},null!=(o=uG(e,["name"]))&&uq(l,["_url","name"],o),l);return i=uF("{name}",s._url),r=s._query,delete s._url,delete s._query,this.apiClient.request({path:i,queryParams:r,body:JSON.stringify(s),httpMethod:"GET",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(n=e.config)?void 0:n.abortSignal}).then(e=>e.json()).then(e=>e)}}async delete(e){var t,n;let i="",r={};if(this.apiClient.isVertexAI())throw Error("This method is only supported by the Gemini Developer API.");{let l,o,s,a,u=(l={},null!=(o=uG(e,["name"]))&&uq(l,["_url","name"],o),null!=(s=uG(e,["config"]))&&(a=uG(s,["force"]),void 0!==l&&null!=a&&uq(l,["_query","force"],a)),l);i=uF("{name}",u._url),r=u._query,delete u._url,delete u._query,await this.apiClient.request({path:i,queryParams:r,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(n=e.config)?void 0:n.abortSignal})}}async listInternal(e){var t,n;let i="",r={};if(this.apiClient.isVertexAI())throw Error("This method is only supported by the Gemini Developer API.");{let l,o,s,a,u=(l={},null!=(o=uG(e,["config"]))&&(s=uG(o,["pageSize"]),void 0!==l&&null!=s&&uq(l,["_query","pageSize"],s),a=uG(o,["pageToken"]),void 0!==l&&null!=a&&uq(l,["_query","pageToken"],a)),l);return i=uF("fileSearchStores",u._url),r=u._query,delete u._url,delete u._query,this.apiClient.request({path:i,queryParams:r,body:JSON.stringify(u),httpMethod:"GET",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(n=e.config)?void 0:n.abortSignal}).then(e=>e.json()).then(e=>{let t=function(e){let t={},n=uG(e,["sdkHttpResponse"]);null!=n&&uq(t,["sdkHttpResponse"],n);let i=uG(e,["nextPageToken"]);null!=i&&uq(t,["nextPageToken"],i);let r=uG(e,["fileSearchStores"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>e)),uq(t,["fileSearchStores"],e)}return t}(e),n=new u7;return Object.assign(n,t),n})}}async uploadToFileSearchStoreInternal(e){var t,n;let i="",r={};if(this.apiClient.isVertexAI())throw Error("This method is only supported by the Gemini Developer API.");{let l,o,s,a=(l={},null!=(o=uG(e,["fileSearchStoreName"]))&&uq(l,["_url","file_search_store_name"],o),null!=(s=uG(e,["config"]))&&cu(s,l),l);return i=uF("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",a._url),r=a._query,delete a._url,delete a._query,this.apiClient.request({path:i,queryParams:r,body:JSON.stringify(a),httpMethod:"POST",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(n=e.config)?void 0:n.abortSignal}).then(e=>e.json()).then(e=>{let t,n,i=(t={},null!=(n=uG(e,["sdkHttpResponse"]))&&uq(t,["sdkHttpResponse"],n),t),r=new de;return Object.assign(r,i),r})}}async importFile(e){var t,n;let i="",r={};if(this.apiClient.isVertexAI())throw Error("This method is only supported by the Gemini Developer API.");{let l,o,s,a,u=(l={},null!=(o=uG(e,["fileSearchStoreName"]))&&uq(l,["_url","file_search_store_name"],o),null!=(s=uG(e,["fileName"]))&&uq(l,["fileName"],s),null!=(a=uG(e,["config"]))&&function(e,t){let n=uG(e,["customMetadata"]);if(void 0!==t&&null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>e)),uq(t,["customMetadata"],e)}let i=uG(e,["chunkingConfig"]);void 0!==t&&null!=i&&uq(t,["chunkingConfig"],i)}(a,l),l);return i=uF("{file_search_store_name}:importFile",u._url),r=u._query,delete u._url,delete u._query,this.apiClient.request({path:i,queryParams:r,body:JSON.stringify(u),httpMethod:"POST",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(n=e.config)?void 0:n.abortSignal}).then(e=>e.json()).then(e=>{var t;let n,i,r,l,o,s,a,u,d,c,p=(o={},null!=(s=uG(e,["name"]))&&uq(o,["name"],s),null!=(a=uG(e,["metadata"]))&&uq(o,["metadata"],a),null!=(u=uG(e,["done"]))&&uq(o,["done"],u),null!=(d=uG(e,["error"]))&&uq(o,["error"],d),null!=(c=uG(e,["response"]))&&uq(o,["response"],(n={},null!=(i=uG(t=c,["sdkHttpResponse"]))&&uq(n,["sdkHttpResponse"],i),null!=(r=uG(t,["parent"]))&&uq(n,["parent"],r),null!=(l=uG(t,["documentName"]))&&uq(n,["documentName"],l),n)),o),h=new dt;return Object.assign(h,p),h})}}}let cP=function(){let{crypto:e}=globalThis;if(null==e?void 0:e.randomUUID)return cP=e.randomUUID.bind(e),e.randomUUID();let t=new Uint8Array(1),n=e?()=>e.getRandomValues(t)[0]:()=>255*Math.random()&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,e=>(e^n()&15>>e/4).toString(16))};function ck(e){return"object"==typeof e&&null!==e&&("name"in e&&"AbortError"===e.name||"message"in e&&String(e.message).includes("FetchRequestCanceledException"))}let cM=e=>{if(e instanceof Error)return e;if("object"==typeof e&&null!==e){try{if("[object Error]"===Object.prototype.toString.call(e)){let t=Error(e.message,e.cause?{cause:e.cause}:{});return e.stack&&(t.stack=e.stack),e.cause&&!t.cause&&(t.cause=e.cause),e.name&&(t.name=e.name),t}}catch(e){}try{return Error(JSON.stringify(e))}catch(e){}}return Error(e)};class cD extends Error{}class cj extends cD{constructor(e,t,n,i){super(`${cj.makeMessage(e,t,n)}`),this.status=e,this.headers=i,this.error=t}static makeMessage(e,t,n){let i=(null==t?void 0:t.message)?"string"==typeof t.message?t.message:JSON.stringify(t.message):t?JSON.stringify(t):n;return e&&i?`${e} ${i}`:e?`${e} status code (no body)`:i||"(no status code or body)"}static generate(e,t,n,i){return e&&i?400===e?new cF(e,t,n,i):401===e?new cq(e,t,n,i):403===e?new cG(e,t,n,i):404===e?new cH(e,t,n,i):409===e?new cB(e,t,n,i):422===e?new c$(e,t,n,i):429===e?new cz(e,t,n,i):e>=500?new cJ(e,t,n,i):new cj(e,t,n,i):new cL({message:n,cause:cM(t)})}}class cU extends cj{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class cL extends cj{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),t&&(this.cause=t)}}class cV extends cL{constructor({message:e}={}){super({message:null!=e?e:"Request timed out."})}}class cF extends cj{}class cq extends cj{}class cG extends cj{}class cH extends cj{}class cB extends cj{}class c$ extends cj{}class cz extends cj{}class cJ extends cj{}let cW=/^[a-z][a-z0-9+.-]*:/i,cY=e=>(cY=Array.isArray)(e),cK=cY,cX="0.0.1",cQ=e=>"x32"===e?"x32":"x86_64"===e||"x64"===e?"x64":"arm"===e?"arm":"aarch64"===e||"arm64"===e?"arm64":e?`other:${e}`:"unknown",cZ=e=>(e=e.toLowerCase()).includes("ios")?"iOS":"android"===e?"Android":"darwin"===e?"MacOS":"win32"===e?"Windows":"freebsd"===e?"FreeBSD":"openbsd"===e?"OpenBSD":"linux"===e?"Linux":e?`Other:${e}`:"Unknown";function c0(...e){let t=globalThis.ReadableStream;if(void 0===t)throw Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new t(...e)}function c1(e){if(e[Symbol.asyncIterator])return e;let t=e.getReader();return{async next(){try{let e=await t.read();return(null==e?void 0:e.done)&&t.releaseLock(),e}catch(e){throw t.releaseLock(),e}},async return(){let e=t.cancel();return t.releaseLock(),await e,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function c2(e){var t,n;if(null===e||"object"!=typeof e)return;if(e[Symbol.asyncIterator])return void await (null==(n=(t=e[Symbol.asyncIterator]()).return)?void 0:n.call(t));let i=e.getReader(),r=i.cancel();i.releaseLock(),await r}let c5=({headers:e,body:t})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(t)}),c4=()=>{var e;if("undefined"==typeof File){let{process:t}=globalThis;throw Error("`File` is not defined as a global, which is required for file uploads."+("string"==typeof(null==(e=null==t?void 0:t.versions)?void 0:e.node)&&20>parseInt(t.versions.node.split("."))?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function c3(e,t,n){return c4(),new File(e,null!=t?t:"unknown_file",n)}let c6=e=>null!=e&&"object"==typeof e&&"number"==typeof e.size&&"string"==typeof e.type&&"function"==typeof e.text&&"function"==typeof e.slice&&"function"==typeof e.arrayBuffer;async function c8(e,t,n){var i;let r,l;if(c4(),null!=(r=e=await e)&&"object"==typeof r&&"string"==typeof r.name&&"number"==typeof r.lastModified&&c6(r))return e instanceof File?e:c3([await e.arrayBuffer()],e.name);if(null!=(l=e)&&"object"==typeof l&&"string"==typeof l.url&&"function"==typeof l.blob){let i=await e.blob();return t||(t=new URL(e.url).pathname.split(/[\\/]/).pop()),c3(await c9(i),t,n)}let o=await c9(e);if(t||(t=("object"==typeof(i=e)&&null!==i&&("name"in i&&i.name&&String(i.name)||"url"in i&&i.url&&String(i.url)||"filename"in i&&i.filename&&String(i.filename)||"path"in i&&i.path&&String(i.path))||"").split(/[\\/]/).pop()||void 0),!(null==n?void 0:n.type)){let e=o.find(e=>"object"==typeof e&&"type"in e&&e.type);"string"==typeof e&&(n=Object.assign(Object.assign({},n),{type:e}))}return c3(o,t,n)}async function c9(e){let t=[];if("string"==typeof e||ArrayBuffer.isView(e)||e instanceof ArrayBuffer)t.push(e);else if(c6(e))t.push(e instanceof Blob?e:await e.arrayBuffer());else if(null!=e&&"object"==typeof e&&"function"==typeof e[Symbol.asyncIterator])try{for(var n,i,r,l,o,s,a=!0,u=dY(e);!(n=(s=await u.next()).done);a=!0)l=s.value,a=!1,t.push(...await c9(l))}catch(e){i={error:e}}finally{try{!a&&!n&&(r=u.return)&&await r.call(u)}finally{if(i)throw i.error}}else{let t=null==(o=null==e?void 0:e.constructor)?void 0:o.name;throw Error(`Unexpected data type: ${typeof e}${t?`; constructor: ${t}`:""}${function(e){if("object"!=typeof e||null===e)return"";let t=Object.getOwnPropertyNames(e);return`; props: [${t.map(e=>`"${e}"`).join(", ")}]`}(e)}`)}return t}class c7{constructor(e){this._client=e}}function pe(e){return e.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}c7._key=[];let pt=Object.freeze(Object.create(null)),pn=((e=pe)=>function(t,...n){let i;if(1===t.length)return t[0];let r=!1,l=[],o=t.reduce((t,i,o)=>{var s,a,u;/[?#]/.test(i)&&(r=!0);let d=n[o],c=(r?encodeURIComponent:e)(""+d);return o!==n.length&&(null==d||"object"==typeof d&&d.toString===(null==(u=Object.getPrototypeOf(null!=(a=Object.getPrototypeOf(null!=(s=d.hasOwnProperty)?s:pt))?a:pt))?void 0:u.toString))&&(c=d+"",l.push({start:t.length+i.length,length:c.length,error:`Value of type ${Object.prototype.toString.call(d).slice(8,-1)} is not a valid path parameter`})),t+i+(o===n.length?"":c)},""),s=o.split(/[?#]/,1)[0],a=/(?<=^|\/)(?:\.|%2e){1,2}(?=\/|$)/gi;for(;null!==(i=a.exec(s));)l.push({start:i.index,length:i[0].length,error:`Value "${i[0]}" can't be safely passed as a path parameter`});if(l.sort((e,t)=>e.start-t.start),l.length>0){let e=0,t=l.reduce((t,n)=>{let i=" ".repeat(n.start-e),r="^".repeat(n.length);return e=n.start+n.length,t+i+r},"");throw new cD(`Path parameters result in path with invalid segments:
${l.map(e=>e.error).join("\n")}
${o}
${t}`)}return o})(pe);class pi extends c7{create(e,t){var n;let{api_version:i=this._client.apiVersion}=e,r=dz(e,["api_version"]);if("model"in r&&"agent_config"in r)throw new cD("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in r&&"generation_config"in r)throw new cD("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(pn`/${i}/interactions`,Object.assign(Object.assign({body:r},t),{stream:null!=(n=e.stream)&&n}))}delete(e,t={},n){let{api_version:i=this._client.apiVersion}=null!=t?t:{};return this._client.delete(pn`/${i}/interactions/${e}`,n)}cancel(e,t={},n){let{api_version:i=this._client.apiVersion}=null!=t?t:{};return this._client.post(pn`/${i}/interactions/${e}/cancel`,n)}get(e,t={},n){var i;let r=null!=t?t:{},{api_version:l=this._client.apiVersion}=r,o=dz(r,["api_version"]);return this._client.get(pn`/${l}/interactions/${e}`,Object.assign(Object.assign({query:o},n),{stream:null!=(i=null==t?void 0:t.stream)&&i}))}}pi._key=Object.freeze(["interactions"]);class pr extends pi{}function pl(e){let t;return(null!=i?i:i=(t=new globalThis.TextEncoder).encode.bind(t))(e)}function po(e){let t;return(null!=r?r:r=(t=new globalThis.TextDecoder).decode.bind(t))(e)}class ps{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){let t;if(null==e)return[];let n=e instanceof ArrayBuffer?new Uint8Array(e):"string"==typeof e?pl(e):e;this.buffer=function(e){let t=0;for(let n of e)t+=n.length;let n=new Uint8Array(t),i=0;for(let t of e)n.set(t,i),i+=t.length;return n}([this.buffer,n]);let i=[];for(;null!=(t=function(e,t){for(let n=null!=t?t:0;n<e.length;n++){if(10===e[n])return{preceding:n,index:n+1,carriage:!1};if(13===e[n])return{preceding:n,index:n+1,carriage:!0}}return null}(this.buffer,this.carriageReturnIndex));){if(t.carriage&&null==this.carriageReturnIndex){this.carriageReturnIndex=t.index;continue}if(null!=this.carriageReturnIndex&&(t.index!==this.carriageReturnIndex+1||t.carriage)){i.push(po(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}let e=null!==this.carriageReturnIndex?t.preceding-1:t.preceding,n=po(this.buffer.subarray(0,e));i.push(n),this.buffer=this.buffer.subarray(t.index),this.carriageReturnIndex=null}return i}flush(){return this.buffer.length?this.decode("\n"):[]}}ps.NEWLINE_CHARS=new Set(["\n","\r"]),ps.NEWLINE_REGEXP=/\r\n|[\n\r]/g;let pa={off:0,error:200,warn:300,info:400,debug:500},pu=(e,t,n)=>{if(e){if(Object.prototype.hasOwnProperty.call(pa,e))return e;pm(n).warn(`${t} was set to ${JSON.stringify(e)}, expected one of ${JSON.stringify(Object.keys(pa))}`)}};function pd(){}function pc(e,t,n){return!t||pa[e]>pa[n]?pd:t[e].bind(t)}let pp={error:pd,warn:pd,info:pd,debug:pd},ph=new WeakMap;function pm(e){var t;let n=e.logger,i=null!=(t=e.logLevel)?t:"off";if(!n)return pp;let r=ph.get(n);if(r&&r[0]===i)return r[1];let l={error:pc("error",n,i),warn:pc("warn",n,i),info:pc("info",n,i),debug:pc("debug",n,i)};return ph.set(n,[i,l]),l}let pf=e=>(e.options&&(e.options=Object.assign({},e.options),delete e.options.headers),e.headers&&(e.headers=Object.fromEntries((e.headers instanceof Headers?[...e.headers]:Object.entries(e.headers)).map(([e,t])=>[e,"x-goog-api-key"===e.toLowerCase()||"authorization"===e.toLowerCase()||"cookie"===e.toLowerCase()||"set-cookie"===e.toLowerCase()?"***":t]))),"retryOfRequestLogID"in e&&(e.retryOfRequestLogID&&(e.retryOf=e.retryOfRequestLogID),delete e.retryOfRequestLogID),e);class pg{constructor(e,t,n){this.iterator=e,this.controller=t,this.client=n}static fromSSEResponse(e,t,n){let i=!1,r=n?pm(n):console;return new pg(function(){return dW(this,arguments,function*(){var n,l,o,s;if(i)throw new cD("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let a=!1;try{try{for(var u,d=!0,c=dY(function(e,t){return dW(this,arguments,function*(){var n,i,r,l;if(!e.body){if(t.abort(),void 0!==globalThis.navigator&&"ReactNative"===globalThis.navigator.product)throw new cD("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api");throw new cD("Attempted to iterate over a response with no body")}let o=new py,s=new ps,a=c1(e.body);try{for(var u,d=!0,c=dY(function(e){return dW(this,arguments,function*(){var t,n,i,r;let l=new Uint8Array;try{for(var o,s=!0,a=dY(e);!(t=(o=yield dJ(a.next())).done);s=!0){let e;if(r=o.value,s=!1,null==r)continue;let t=r instanceof ArrayBuffer?new Uint8Array(r):"string"==typeof r?pl(r):r,n=new Uint8Array(l.length+t.length);for(n.set(l),n.set(t,l.length),l=n;-1!==(e=function(e){for(let t=0;t<e.length-1;t++){if(10===e[t]&&10===e[t+1]||13===e[t]&&13===e[t+1])return t+2;if(13===e[t]&&10===e[t+1]&&t+3<e.length&&13===e[t+2]&&10===e[t+3])return t+4}return -1}(l));)yield yield dJ(l.slice(0,e)),l=l.slice(e)}}catch(e){n={error:e}}finally{try{!s&&!t&&(i=a.return)&&(yield dJ(i.call(a)))}finally{if(n)throw n.error}}l.length>0&&(yield yield dJ(l))})}(a));!(n=(u=yield dJ(c.next())).done);d=!0)for(let e of(l=u.value,d=!1,s.decode(l))){let t=o.decode(e);t&&(yield yield dJ(t))}}catch(e){i={error:e}}finally{try{!d&&!n&&(r=c.return)&&(yield dJ(r.call(c)))}finally{if(i)throw i.error}}for(let e of s.flush()){let t=o.decode(e);t&&(yield yield dJ(t))}})}(e,t));!(n=(u=yield dJ(c.next())).done);d=!0)if(s=u.value,d=!1,!a)if(s.data.startsWith("[DONE]")){a=!0;continue}else try{yield yield dJ(JSON.parse(s.data))}catch(e){throw r.error("Could not parse message into JSON:",s.data),r.error("From chunk:",s.raw),e}}catch(e){l={error:e}}finally{try{!d&&!n&&(o=c.return)&&(yield dJ(o.call(c)))}finally{if(l)throw l.error}}a=!0}catch(e){if(ck(e))return yield dJ(void 0);throw e}finally{a||t.abort()}})},t,n)}static fromReadableStream(e,t,n){let i=!1;return new pg(function(){return dW(this,arguments,function*(){var n,r,l,o;if(i)throw new cD("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let s=!1;try{try{for(var a,u=!0,d=dY(function(){return dW(this,arguments,function*(){var t,n,i,r;let l=new ps,o=c1(e);try{for(var s,a=!0,u=dY(o);!(t=(s=yield dJ(u.next())).done);a=!0)for(let e of(r=s.value,a=!1,l.decode(r)))yield yield dJ(e)}catch(e){n={error:e}}finally{try{!a&&!t&&(i=u.return)&&(yield dJ(i.call(u)))}finally{if(n)throw n.error}}for(let e of l.flush())yield yield dJ(e)})}());!(n=(a=yield dJ(d.next())).done);u=!0)o=a.value,u=!1,!s&&o&&(yield yield dJ(JSON.parse(o)))}catch(e){r={error:e}}finally{try{!u&&!n&&(l=d.return)&&(yield dJ(l.call(d)))}finally{if(r)throw r.error}}s=!0}catch(e){if(ck(e))return yield dJ(void 0);throw e}finally{s||t.abort()}})},t,n)}[Symbol.asyncIterator](){return this.iterator()}tee(){let e=[],t=[],n=this.iterator(),i=i=>({next:()=>{if(0===i.length){let i=n.next();e.push(i),t.push(i)}return i.shift()}});return[new pg(()=>i(e),this.controller,this.client),new pg(()=>i(t),this.controller,this.client)]}toReadableStream(){let e,t=this;return c0({async start(){e=t[Symbol.asyncIterator]()},async pull(t){try{let{value:n,done:i}=await e.next();if(i)return t.close();let r=pl(JSON.stringify(n)+"\n");t.enqueue(r)}catch(e){t.error(e)}},async cancel(){var t;await (null==(t=e.return)?void 0:t.call(e))}})}}class py{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){var t;let n;if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;let e={event:this.event,data:this.data.join("\n"),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],e}if(this.chunks.push(e),e.startsWith(":"))return null;let[i,r,l]=-1!==(n=(t=e).indexOf(":"))?[t.substring(0,n),":",t.substring(n+1)]:[t,"",""];return l.startsWith(" ")&&(l=l.substring(1)),"event"===i?this.event=l:"data"===i&&this.data.push(l),null}}async function pv(e,t){let{response:n,requestLogID:i,retryOfRequestLogID:r,startTime:l}=t,o=await (async()=>{var i;if(t.options.stream)return(pm(e).debug("response",n.status,n.url,n.headers,n.body),t.options.__streamClass)?t.options.__streamClass.fromSSEResponse(n,t.controller,e):pg.fromSSEResponse(n,t.controller,e);if(204===n.status)return null;if(t.options.__binaryResponse)return n;let r=n.headers.get("content-type"),l=null==(i=null==r?void 0:r.split(";")[0])?void 0:i.trim();return(null==l?void 0:l.includes("application/json"))||(null==l?void 0:l.endsWith("+json"))?await n.json():await n.text()})();return pm(e).debug(`[${i}] response parsed`,pf({retryOfRequestLogID:r,url:n.url,status:n.status,body:o,durationMs:Date.now()-l})),o}class px extends Promise{constructor(e,t,n=pv){super(e=>{e(null)}),this.responsePromise=t,this.parseResponse=n,this.client=e}_thenUnwrap(e){return new px(this.client,this.responsePromise,async(t,n)=>e(await this.parseResponse(t,n),n))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){let[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}let pb=Symbol("brand.privateNullableHeaders"),pE=e=>{let t=new Headers,n=new Set;for(let i of e){let e=new Set;for(let[r,l]of function*(e){let t;if(!e)return;if(pb in e){let{values:t,nulls:n}=e;for(let e of(yield*t.entries(),n))yield[e,null];return}let n=!1;for(let i of(e instanceof Headers?t=e.entries():cK(e)?t=e:(n=!0,t=Object.entries(null!=e?e:{})),t)){let e=i[0];if("string"!=typeof e)throw TypeError("expected header name to be a string");let t=cK(i[1])?i[1]:[i[1]],r=!1;for(let i of t)void 0!==i&&(n&&!r&&(r=!0,yield[e,null]),yield[e,i])}}(i)){let i=r.toLowerCase();e.has(i)||(t.delete(r),e.add(i)),null===l?(t.delete(r),n.add(i)):(t.append(r,l),n.delete(i))}}return{[pb]:!0,values:t,nulls:n}},pS=e=>{var t,n,i,r,l,o;return void 0!==globalThis.process?null!=(i=null==(n=null==(t=globalThis.process.env)?void 0:t[e])?void 0:n.trim())?i:void 0:void 0!==globalThis.Deno?null==(o=null==(l=null==(r=globalThis.Deno.env)?void 0:r.get)?void 0:l.call(r,e))?void 0:o.trim():void 0};class pw{constructor(e){var t,n,i,r,l,o,s,{baseURL:a=pS("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:u=null!=(t=pS("GEMINI_API_KEY"))?t:null,apiVersion:d="v1beta"}=e;const c=Object.assign(Object.assign({apiKey:u,apiVersion:d},dz(e,["baseURL","apiKey","apiVersion"])),{baseURL:a||"https://generativelanguage.googleapis.com"});this.baseURL=c.baseURL,this.timeout=null!=(n=c.timeout)?n:pw.DEFAULT_TIMEOUT,this.logger=null!=(i=c.logger)?i:console;const p="warn";this.logLevel=p,this.logLevel=null!=(l=null!=(r=pu(c.logLevel,"ClientOptions.logLevel",this))?r:pu(pS("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))?l:p,this.fetchOptions=c.fetchOptions,this.maxRetries=null!=(o=c.maxRetries)?o:2,this.fetch=null!=(s=c.fetch)?s:function(){if("undefined"!=typeof fetch)return fetch;throw Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}(),this.encoder=c5,this._options=c,this.apiKey=u,this.apiVersion=d,this.clientAdapter=c.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return"https://generativelanguage.googleapis.com"!==this.baseURL}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:t}){if(!(e.has("authorization")||e.has("x-goog-api-key")||this.apiKey&&e.get("x-goog-api-key"))&&!t.has("x-goog-api-key"))throw Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){let t=pE([e.headers]);if(!(t.values.has("authorization")||t.values.has("x-goog-api-key"))){if(this.apiKey)return pE([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return pE([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([e,t])=>void 0!==t).map(([e,t])=>{if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return`${encodeURIComponent(e)}=${encodeURIComponent(t)}`;if(null===t)return`${encodeURIComponent(e)}=`;throw new cD(`Cannot stringify type ${typeof t}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${cX}`}defaultIdempotencyKey(){return`stainless-node-retry-${cP()}`}makeStatusError(e,t,n,i){return cj.generate(e,t,n,i)}buildURL(e,t,n){let i=!this.baseURLOverridden()&&n||this.baseURL,r=new URL(cW.test(e)?e:i+(i.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),l=this.defaultQuery();return!function(e){if(!e)return!0;for(let t in e)return!1;return!0}(l)&&(t=Object.assign(Object.assign({},l),t)),"object"==typeof t&&t&&!Array.isArray(t)&&(r.search=this.stringifyQuery(t)),r.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){let t=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${t}`}}async prepareRequest(e,{url:t,options:n}){}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,n){return this.request(Promise.resolve(n).then(n=>Object.assign({method:e,path:t},n)))}request(e,t=null){return new px(this,this.makeRequest(e,t,void 0))}async makeRequest(e,t,n){var i,r,l;let o=await e,s=null!=(i=o.maxRetries)?i:this.maxRetries;null==t&&(t=s),await this.prepareOptions(o);let{req:a,url:u,timeout:d}=await this.buildRequest(o,{retryCount:s-t});await this.prepareRequest(a,{url:u,options:o});let c="log_"+(0x1000000*Math.random()|0).toString(16).padStart(6,"0"),p=void 0===n?"":`, retryOf: ${n}`,h=Date.now();if(pm(this).debug(`[${c}] sending request`,pf({retryOfRequestLogID:n,method:o.method,url:u,options:o,headers:a.headers})),null==(r=o.signal)?void 0:r.aborted)throw new cU;let m=new AbortController,f=await this.fetchWithTimeout(u,a,d,m).catch(cM),g=Date.now();if(f instanceof globalThis.Error){let e=`retrying, ${t} attempts remaining`;if(null==(l=o.signal)?void 0:l.aborted)throw new cU;let i=ck(f)||/timed? ?out/i.test(String(f)+("cause"in f?String(f.cause):""));if(t)return pm(this).info(`[${c}] connection ${i?"timed out":"failed"} - ${e}`),pm(this).debug(`[${c}] connection ${i?"timed out":"failed"} (${e})`,pf({retryOfRequestLogID:n,url:u,durationMs:g-h,message:f.message})),this.retryRequest(o,t,null!=n?n:c);if(pm(this).info(`[${c}] connection ${i?"timed out":"failed"} - error; no more retries left`),pm(this).debug(`[${c}] connection ${i?"timed out":"failed"} (error; no more retries left)`,pf({retryOfRequestLogID:n,url:u,durationMs:g-h,message:f.message})),i)throw new cV;throw new cL({cause:f})}let y=`[${c}${p}] ${a.method} ${u} ${f.ok?"succeeded":"failed"} with status ${f.status} in ${g-h}ms`;if(!f.ok){let e=await this.shouldRetry(f);if(t&&e){let e=`retrying, ${t} attempts remaining`;return await c2(f.body),pm(this).info(`${y} - ${e}`),pm(this).debug(`[${c}] response error (${e})`,pf({retryOfRequestLogID:n,url:f.url,status:f.status,headers:f.headers,durationMs:g-h})),this.retryRequest(o,t,null!=n?n:c,f.headers)}let i=e?"error; no more retries left":"error; not retryable";pm(this).info(`${y} - ${i}`);let r=await f.text().catch(e=>cM(e).message),l=(e=>{try{return JSON.parse(e)}catch(e){return}})(r),s=l?void 0:r;throw pm(this).debug(`[${c}] response error (${i})`,pf({retryOfRequestLogID:n,url:f.url,status:f.status,headers:f.headers,message:s,durationMs:Date.now()-h})),this.makeStatusError(f.status,l,s,f.headers)}return pm(this).info(y),pm(this).debug(`[${c}] response start`,pf({retryOfRequestLogID:n,url:f.url,status:f.status,headers:f.headers,durationMs:g-h})),{response:f,options:o,controller:m,requestLogID:c,retryOfRequestLogID:n,startTime:h}}async fetchWithTimeout(e,t,n,i){let r=t||{},{signal:l,method:o}=r,s=dz(r,["signal","method"]);l&&l.addEventListener("abort",()=>i.abort());let a=setTimeout(()=>i.abort(),n),u=globalThis.ReadableStream&&s.body instanceof globalThis.ReadableStream||"object"==typeof s.body&&null!==s.body&&Symbol.asyncIterator in s.body,d=Object.assign(Object.assign(Object.assign({signal:i.signal},u?{duplex:"half"}:{}),{method:"GET"}),s);o&&(d.method=o.toUpperCase());try{return await this.fetch.call(void 0,e,d)}finally{clearTimeout(a)}}async shouldRetry(e){let t=e.headers.get("x-should-retry");return"true"===t||"false"!==t&&(408===e.status||409===e.status||429===e.status||!!(e.status>=500))}async retryRequest(e,t,n,i){var r;let l,o,s=null==i?void 0:i.get("retry-after-ms");if(s){let e=parseFloat(s);Number.isNaN(e)||(l=e)}let a=null==i?void 0:i.get("retry-after");if(a&&!l){let e=parseFloat(a);l=Number.isNaN(e)?Date.parse(a)-Date.now():1e3*e}if(!(l&&0<=l&&l<6e4)){let n=null!=(r=e.maxRetries)?r:this.maxRetries;l=this.calculateDefaultRetryTimeoutMillis(t,n)}return await (o=l,new Promise(e=>setTimeout(e,o))),this.makeRequest(e,t-1,n)}calculateDefaultRetryTimeoutMillis(e,t){return Math.min(.5*Math.pow(2,t-e),8)*(1-.25*Math.random())*1e3}async buildRequest(e,{retryCount:t=0}={}){var n,i,r;let l=Object.assign({},e),{method:o,path:s,query:a,defaultBaseURL:u}=l,d=this.buildURL(s,a,u);"timeout"in l&&((e,t)=>{if("number"!=typeof t||!Number.isInteger(t))throw new cD(`${e} must be an integer`);if(t<0)throw new cD(`${e} must be a positive integer`)})("timeout",l.timeout),l.timeout=null!=(n=l.timeout)?n:this.timeout;let{bodyHeaders:c,body:p}=this.buildBody({options:l}),h=await this.buildHeaders({options:e,method:o,bodyHeaders:c,retryCount:t});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:o,headers:h},l.signal&&{signal:l.signal}),globalThis.ReadableStream&&p instanceof globalThis.ReadableStream&&{duplex:"half"}),p&&{body:p}),null!=(i=this.fetchOptions)?i:{}),null!=(r=l.fetchOptions)?r:{}),url:d,timeout:l.timeout}}async buildHeaders({options:e,method:t,bodyHeaders:i,retryCount:r}){let l={};this.idempotencyHeader&&"get"!==t&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),l[this.idempotencyHeader]=e.idempotencyKey);let o=await this.authHeaders(e),s=pE([l,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(r)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),null!=n?n:n=(()=>{var e,t,n,i,r;let l="undefined"!=typeof Deno&&null!=Deno.build?"deno":"undefined"!=typeof EdgeRuntime?"edge":"[object process]"===Object.prototype.toString.call(void 0!==globalThis.process?globalThis.process:0)?"node":"unknown";if("deno"===l)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":cX,"X-Stainless-OS":cZ(Deno.build.os),"X-Stainless-Arch":cQ(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":"string"==typeof Deno.version?Deno.version:null!=(t=null==(e=Deno.version)?void 0:e.deno)?t:"unknown"};if("undefined"!=typeof EdgeRuntime)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":cX,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if("node"===l)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":cX,"X-Stainless-OS":cZ(null!=(n=globalThis.process.platform)?n:"unknown"),"X-Stainless-Arch":cQ(null!=(i=globalThis.process.arch)?i:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":null!=(r=globalThis.process.version)?r:"unknown"};let o=function(){if("undefined"==typeof navigator||!navigator)return null;for(let{key:e,pattern:t}of[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}]){let n=t.exec(navigator.userAgent);if(n){let t=n[1]||0,i=n[2]||0,r=n[3]||0;return{browser:e,version:`${t}.${i}.${r}`}}}return null}();return o?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":cX,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${o.browser}`,"X-Stainless-Runtime-Version":o.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":cX,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}})()),this._options.defaultHeaders,i,e.headers,o]);return this.validateHeaders(s),s.values}buildBody({options:{body:e,headers:t}}){let n;if(!e)return{bodyHeaders:void 0,body:void 0};let i=pE([t]);if(ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||"string"==typeof e&&i.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream)return{bodyHeaders:void 0,body:e};if("object"!=typeof e||!(Symbol.asyncIterator in e)&&(!(Symbol.iterator in e)||!("next"in e)||"function"!=typeof e.next))return this.encoder({body:e,headers:i});return{bodyHeaders:void 0,body:(n=Symbol.asyncIterator in e?e[Symbol.asyncIterator]():e[Symbol.iterator](),c0({start(){},async pull(e){let{done:t,value:i}=await n.next();t?e.close():e.enqueue(i)},async cancel(){var e;await (null==(e=n.return)?void 0:e.call(n))}}))}}}pw.DEFAULT_TIMEOUT=6e4;class pT extends pw{constructor(){super(...arguments),this.interactions=new pr(this)}}function pA(e,t){let n,i,r,l={},o=uG(e,["sdkHttpResponse"]);null!=o&&uq(l,["sdkHttpResponse"],o);let s=uG(e,["name"]);null!=s&&uq(l,["name"],s);let a=uG(e,["state"]);null!=a&&uq(l,["state"],dN(a));let u=uG(e,["createTime"]);null!=u&&uq(l,["createTime"],u);let d=uG(e,["tuningTask","startTime"]);null!=d&&uq(l,["startTime"],d);let c=uG(e,["tuningTask","completeTime"]);null!=c&&uq(l,["endTime"],c);let p=uG(e,["updateTime"]);null!=p&&uq(l,["updateTime"],p);let h=uG(e,["description"]);null!=h&&uq(l,["description"],h);let m=uG(e,["baseModel"]);null!=m&&uq(l,["baseModel"],m);let f=uG(e,["_self"]);return null!=f&&uq(l,["tunedModel"],(n={},null!=(i=uG(f,["name"]))&&uq(n,["model"],i),null!=(r=uG(f,["name"]))&&uq(n,["endpoint"],r),n)),l}function pC(e,t){let n={},i=uG(e,["sdkHttpResponse"]);null!=i&&uq(n,["sdkHttpResponse"],i);let r=uG(e,["name"]);null!=r&&uq(n,["name"],r);let l=uG(e,["state"]);null!=l&&uq(n,["state"],dN(l));let o=uG(e,["createTime"]);null!=o&&uq(n,["createTime"],o);let s=uG(e,["startTime"]);null!=s&&uq(n,["startTime"],s);let a=uG(e,["endTime"]);null!=a&&uq(n,["endTime"],a);let u=uG(e,["updateTime"]);null!=u&&uq(n,["updateTime"],u);let d=uG(e,["error"]);null!=d&&uq(n,["error"],d);let c=uG(e,["description"]);null!=c&&uq(n,["description"],c);let p=uG(e,["baseModel"]);null!=p&&uq(n,["baseModel"],p);let h=uG(e,["tunedModel"]);null!=h&&uq(n,["tunedModel"],h);let m=uG(e,["preTunedModel"]);null!=m&&uq(n,["preTunedModel"],m);let f=uG(e,["supervisedTuningSpec"]);null!=f&&uq(n,["supervisedTuningSpec"],f);let g=uG(e,["preferenceOptimizationSpec"]);null!=g&&uq(n,["preferenceOptimizationSpec"],g);let y=uG(e,["tuningDataStats"]);null!=y&&uq(n,["tuningDataStats"],y);let v=uG(e,["encryptionSpec"]);null!=v&&uq(n,["encryptionSpec"],v);let x=uG(e,["partnerModelTuningSpec"]);null!=x&&uq(n,["partnerModelTuningSpec"],x);let b=uG(e,["customBaseModel"]);null!=b&&uq(n,["customBaseModel"],b);let E=uG(e,["experiment"]);null!=E&&uq(n,["experiment"],E);let S=uG(e,["labels"]);null!=S&&uq(n,["labels"],S);let w=uG(e,["outputUri"]);null!=w&&uq(n,["outputUri"],w);let T=uG(e,["pipelineJob"]);null!=T&&uq(n,["pipelineJob"],T);let A=uG(e,["serviceAccount"]);null!=A&&uq(n,["serviceAccount"],A);let C=uG(e,["tunedModelDisplayName"]);null!=C&&uq(n,["tunedModelDisplayName"],C);let I=uG(e,["veoTuningSpec"]);return null!=I&&uq(n,["veoTuningSpec"],I),n}function pI(e,t){let n={},i=uG(e,["gcsUri"]);null!=i&&uq(n,["validationDatasetUri"],i);let r=uG(e,["vertexDatasetResource"]);return null!=r&&uq(n,["validationDatasetUri"],r),n}pT.GeminiNextGenAPIClient=pT,pT.GeminiNextGenAPIClientError=cD,pT.APIError=cj,pT.APIConnectionError=cL,pT.APIConnectionTimeoutError=cV,pT.APIUserAbortError=cU,pT.NotFoundError=cH,pT.ConflictError=cB,pT.RateLimitError=cz,pT.BadRequestError=cF,pT.AuthenticationError=cq,pT.InternalServerError=cJ,pT.PermissionDeniedError=cG,pT.UnprocessableEntityError=c$,pT.toFile=c8,pT.Interactions=pr;class p_ extends uV{constructor(e){super(),this.apiClient=e,this.list=async(e={})=>new dG(tI.PAGED_ITEM_TUNING_JOBS,e=>this.listInternal(e),await this.listInternal(e),e),this.get=async e=>await this.getInternal(e),this.tune=async e=>{var t;if(this.apiClient.isVertexAI())if(e.baseModel.startsWith("projects/")){let n={tunedModelName:e.baseModel};(null==(t=e.config)?void 0:t.preTunedModelCheckpointId)&&(n.checkpointId=e.config.preTunedModelCheckpointId);let i=Object.assign(Object.assign({},e),{preTunedModel:n});return i.baseModel=void 0,await this.tuneInternal(i)}else{let t=Object.assign({},e);return await this.tuneInternal(t)}{let t=Object.assign({},e),n=await this.tuneMldevInternal(t),i="";return void 0!==n.metadata&&void 0!==n.metadata.tunedModel?i=n.metadata.tunedModel:void 0!==n.name&&n.name.includes("/operations/")&&(i=n.name.split("/operations/")[0]),{name:i,state:e4.JOB_STATE_QUEUED}}}}async getInternal(e){var t,n,i,r;let l="",o={};if(this.apiClient.isVertexAI()){let i,r,s=(i={},null!=(r=uG(e,["name"]))&&uq(i,["_url","name"],r),i);return l=uF("{name}",s._url),o=s._query,delete s._url,delete s._query,this.apiClient.request({path:l,queryParams:o,body:JSON.stringify(s),httpMethod:"GET",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(n=e.config)?void 0:n.abortSignal}).then(e=>e.json().then(t=>(t.sdkHttpResponse={headers:e.headers},t))).then(e=>pC(e))}{let t,n,s=(t={},null!=(n=uG(e,["name"]))&&uq(t,["_url","name"],n),t);return l=uF("{name}",s._url),o=s._query,delete s._url,delete s._query,this.apiClient.request({path:l,queryParams:o,body:JSON.stringify(s),httpMethod:"GET",httpOptions:null==(i=e.config)?void 0:i.httpOptions,abortSignal:null==(r=e.config)?void 0:r.abortSignal}).then(e=>e.json().then(t=>(t.sdkHttpResponse={headers:e.headers},t))).then(e=>pA(e))}}async listInternal(e){var t,n,i,r;let l="",o={};if(this.apiClient.isVertexAI()){let i,r,s,a,u,d=(i={},null!=(r=uG(e,["config"]))&&(s=uG(r,["pageSize"]),void 0!==i&&null!=s&&uq(i,["_query","pageSize"],s),a=uG(r,["pageToken"]),void 0!==i&&null!=a&&uq(i,["_query","pageToken"],a),u=uG(r,["filter"]),void 0!==i&&null!=u&&uq(i,["_query","filter"],u)),i);return l=uF("tuningJobs",d._url),o=d._query,delete d._url,delete d._query,this.apiClient.request({path:l,queryParams:o,body:JSON.stringify(d),httpMethod:"GET",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(n=e.config)?void 0:n.abortSignal}).then(e=>e.json().then(t=>(t.sdkHttpResponse={headers:e.headers},t))).then(e=>{let t=function(e,t){let n={},i=uG(e,["sdkHttpResponse"]);null!=i&&uq(n,["sdkHttpResponse"],i);let r=uG(e,["nextPageToken"]);null!=r&&uq(n,["nextPageToken"],r);let l=uG(e,["tuningJobs"]);if(null!=l){let e=l;Array.isArray(e)&&(e=e.map(e=>pC(e))),uq(n,["tuningJobs"],e)}return n}(e),n=new u4;return Object.assign(n,t),n})}{let t,n,s,a,u,d=(t={},null!=(n=uG(e,["config"]))&&(s=uG(n,["pageSize"]),void 0!==t&&null!=s&&uq(t,["_query","pageSize"],s),a=uG(n,["pageToken"]),void 0!==t&&null!=a&&uq(t,["_query","pageToken"],a),u=uG(n,["filter"]),void 0!==t&&null!=u&&uq(t,["_query","filter"],u)),t);return l=uF("tunedModels",d._url),o=d._query,delete d._url,delete d._query,this.apiClient.request({path:l,queryParams:o,body:JSON.stringify(d),httpMethod:"GET",httpOptions:null==(i=e.config)?void 0:i.httpOptions,abortSignal:null==(r=e.config)?void 0:r.abortSignal}).then(e=>e.json().then(t=>(t.sdkHttpResponse={headers:e.headers},t))).then(e=>{let t=function(e,t){let n={},i=uG(e,["sdkHttpResponse"]);null!=i&&uq(n,["sdkHttpResponse"],i);let r=uG(e,["nextPageToken"]);null!=r&&uq(n,["nextPageToken"],r);let l=uG(e,["tunedModels"]);if(null!=l){let e=l;Array.isArray(e)&&(e=e.map(e=>pA(e))),uq(n,["tuningJobs"],e)}return n}(e),n=new u4;return Object.assign(n,t),n})}}async cancel(e){var t,n,i,r;let l="",o={};if(this.apiClient.isVertexAI()){let i,r,s=(i={},null!=(r=uG(e,["name"]))&&uq(i,["_url","name"],r),i);return l=uF("{name}:cancel",s._url),o=s._query,delete s._url,delete s._query,this.apiClient.request({path:l,queryParams:o,body:JSON.stringify(s),httpMethod:"POST",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(n=e.config)?void 0:n.abortSignal}).then(e=>e.json().then(t=>(t.sdkHttpResponse={headers:e.headers},t))).then(e=>{let t,n,i=(t={},null!=(n=uG(e,["sdkHttpResponse"]))&&uq(t,["sdkHttpResponse"],n),t),r=new u3;return Object.assign(r,i),r})}{let t,n,s=(t={},null!=(n=uG(e,["name"]))&&uq(t,["_url","name"],n),t);return l=uF("{name}:cancel",s._url),o=s._query,delete s._url,delete s._query,this.apiClient.request({path:l,queryParams:o,body:JSON.stringify(s),httpMethod:"POST",httpOptions:null==(i=e.config)?void 0:i.httpOptions,abortSignal:null==(r=e.config)?void 0:r.abortSignal}).then(e=>e.json().then(t=>(t.sdkHttpResponse={headers:e.headers},t))).then(e=>{let t,n,i=(t={},null!=(n=uG(e,["sdkHttpResponse"]))&&uq(t,["sdkHttpResponse"],n),t),r=new u3;return Object.assign(r,i),r})}}async tuneInternal(e){var t,n;let i="",r={};if(this.apiClient.isVertexAI()){let l,o,s,a,u,d=(l={},null!=(o=uG(e,["baseModel"]))&&uq(l,["baseModel"],o),null!=(s=uG(e,["preTunedModel"]))&&uq(l,["preTunedModel"],s),null!=(a=uG(e,["trainingDataset"]))&&function(e,t,n){let i=uG(n,["config","method"]);if(void 0===i&&(i="SUPERVISED_FINE_TUNING"),"SUPERVISED_FINE_TUNING"===i){let n=uG(e,["gcsUri"]);void 0!==t&&null!=n&&uq(t,["supervisedTuningSpec","trainingDatasetUri"],n)}else if("PREFERENCE_TUNING"===i){let n=uG(e,["gcsUri"]);void 0!==t&&null!=n&&uq(t,["preferenceOptimizationSpec","trainingDatasetUri"],n)}let r=uG(n,["config","method"]);if(void 0===r&&(r="SUPERVISED_FINE_TUNING"),"SUPERVISED_FINE_TUNING"===r){let n=uG(e,["vertexDatasetResource"]);void 0!==t&&null!=n&&uq(t,["supervisedTuningSpec","trainingDatasetUri"],n)}else if("PREFERENCE_TUNING"===r){let n=uG(e,["vertexDatasetResource"]);void 0!==t&&null!=n&&uq(t,["preferenceOptimizationSpec","trainingDatasetUri"],n)}if(void 0!==uG(e,["examples"]))throw Error("examples parameter is not supported in Vertex AI.")}(a,l,e),null!=(u=uG(e,["config"]))&&function(e,t,n){let i=uG(n,["config","method"]);if(void 0===i&&(i="SUPERVISED_FINE_TUNING"),"SUPERVISED_FINE_TUNING"===i){let n=uG(e,["validationDataset"]);void 0!==t&&null!=n&&uq(t,["supervisedTuningSpec"],pI(n))}else if("PREFERENCE_TUNING"===i){let n=uG(e,["validationDataset"]);void 0!==t&&null!=n&&uq(t,["preferenceOptimizationSpec"],pI(n))}let r=uG(e,["tunedModelDisplayName"]);void 0!==t&&null!=r&&uq(t,["tunedModelDisplayName"],r);let l=uG(e,["description"]);void 0!==t&&null!=l&&uq(t,["description"],l);let o=uG(n,["config","method"]);if(void 0===o&&(o="SUPERVISED_FINE_TUNING"),"SUPERVISED_FINE_TUNING"===o){let n=uG(e,["epochCount"]);void 0!==t&&null!=n&&uq(t,["supervisedTuningSpec","hyperParameters","epochCount"],n)}else if("PREFERENCE_TUNING"===o){let n=uG(e,["epochCount"]);void 0!==t&&null!=n&&uq(t,["preferenceOptimizationSpec","hyperParameters","epochCount"],n)}let s=uG(n,["config","method"]);if(void 0===s&&(s="SUPERVISED_FINE_TUNING"),"SUPERVISED_FINE_TUNING"===s){let n=uG(e,["learningRateMultiplier"]);void 0!==t&&null!=n&&uq(t,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],n)}else if("PREFERENCE_TUNING"===s){let n=uG(e,["learningRateMultiplier"]);void 0!==t&&null!=n&&uq(t,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],n)}let a=uG(n,["config","method"]);if(void 0===a&&(a="SUPERVISED_FINE_TUNING"),"SUPERVISED_FINE_TUNING"===a){let n=uG(e,["exportLastCheckpointOnly"]);void 0!==t&&null!=n&&uq(t,["supervisedTuningSpec","exportLastCheckpointOnly"],n)}else if("PREFERENCE_TUNING"===a){let n=uG(e,["exportLastCheckpointOnly"]);void 0!==t&&null!=n&&uq(t,["preferenceOptimizationSpec","exportLastCheckpointOnly"],n)}let u=uG(n,["config","method"]);if(void 0===u&&(u="SUPERVISED_FINE_TUNING"),"SUPERVISED_FINE_TUNING"===u){let n=uG(e,["adapterSize"]);void 0!==t&&null!=n&&uq(t,["supervisedTuningSpec","hyperParameters","adapterSize"],n)}else if("PREFERENCE_TUNING"===u){let n=uG(e,["adapterSize"]);void 0!==t&&null!=n&&uq(t,["preferenceOptimizationSpec","hyperParameters","adapterSize"],n)}if(void 0!==uG(e,["batchSize"]))throw Error("batchSize parameter is not supported in Vertex AI.");if(void 0!==uG(e,["learningRate"]))throw Error("learningRate parameter is not supported in Vertex AI.");let d=uG(e,["labels"]);void 0!==t&&null!=d&&uq(t,["labels"],d);let c=uG(e,["beta"]);void 0!==t&&null!=c&&uq(t,["preferenceOptimizationSpec","hyperParameters","beta"],c)}(u,l,e),l);return i=uF("tuningJobs",d._url),r=d._query,delete d._url,delete d._query,this.apiClient.request({path:i,queryParams:r,body:JSON.stringify(d),httpMethod:"POST",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(n=e.config)?void 0:n.abortSignal}).then(e=>e.json().then(t=>(t.sdkHttpResponse={headers:e.headers},t))).then(e=>pC(e))}throw Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,n;let i="",r={};if(this.apiClient.isVertexAI())throw Error("This method is only supported by the Gemini Developer API.");{let l,o,s,a,u,d=(l={},null!=(o=uG(e,["baseModel"]))&&uq(l,["baseModel"],o),null!=(s=uG(e,["preTunedModel"]))&&uq(l,["preTunedModel"],s),null!=(a=uG(e,["trainingDataset"]))&&function(e,t){if(void 0!==uG(e,["gcsUri"]))throw Error("gcsUri parameter is not supported in Gemini API.");if(void 0!==uG(e,["vertexDatasetResource"]))throw Error("vertexDatasetResource parameter is not supported in Gemini API.");let n=uG(e,["examples"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>e)),uq({},["examples","examples"],e)}}(a),null!=(u=uG(e,["config"]))&&function(e,t,n){if(void 0!==uG(e,["validationDataset"]))throw Error("validationDataset parameter is not supported in Gemini API.");let i=uG(e,["tunedModelDisplayName"]);if(void 0!==t&&null!=i&&uq(t,["displayName"],i),void 0!==uG(e,["description"]))throw Error("description parameter is not supported in Gemini API.");let r=uG(e,["epochCount"]);void 0!==t&&null!=r&&uq(t,["tuningTask","hyperparameters","epochCount"],r);let l=uG(e,["learningRateMultiplier"]);if(null!=l&&uq({},["tuningTask","hyperparameters","learningRateMultiplier"],l),void 0!==uG(e,["exportLastCheckpointOnly"]))throw Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(void 0!==uG(e,["preTunedModelCheckpointId"]))throw Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(void 0!==uG(e,["adapterSize"]))throw Error("adapterSize parameter is not supported in Gemini API.");let o=uG(e,["batchSize"]);void 0!==t&&null!=o&&uq(t,["tuningTask","hyperparameters","batchSize"],o);let s=uG(e,["learningRate"]);if(void 0!==t&&null!=s&&uq(t,["tuningTask","hyperparameters","learningRate"],s),void 0!==uG(e,["labels"]))throw Error("labels parameter is not supported in Gemini API.");if(void 0!==uG(e,["beta"]))throw Error("beta parameter is not supported in Gemini API.")}(u,l),l);return i=uF("tunedModels",d._url),r=d._query,delete d._url,delete d._query,this.apiClient.request({path:i,queryParams:r,body:JSON.stringify(d),httpMethod:"POST",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(n=e.config)?void 0:n.abortSignal}).then(e=>e.json().then(t=>(t.sdkHttpResponse={headers:e.headers},t))).then(e=>{let t,n,i,r,l,o;return t={},null!=(n=uG(e,["sdkHttpResponse"]))&&uq(t,["sdkHttpResponse"],n),null!=(i=uG(e,["name"]))&&uq(t,["name"],i),null!=(r=uG(e,["metadata"]))&&uq(t,["metadata"],r),null!=(l=uG(e,["done"]))&&uq(t,["done"],l),null!=(o=uG(e,["error"]))&&uq(t,["error"],o),t})}}}class pO{async download(e,t){throw Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}let pN="x-goog-upload-status";async function pR(e,t,n){var i;let r=await pk(e,t,n),l=await (null==r?void 0:r.json());if((null==(i=null==r?void 0:r.headers)?void 0:i[pN])!=="final")throw Error("Failed to upload file: Upload status is not finalized.");return l.file}async function pP(e,t,n){var i;let r=await pk(e,t,n),l=await (null==r?void 0:r.json());if((null==(i=null==r?void 0:r.headers)?void 0:i[pN])!=="final")throw Error("Failed to upload file: Upload status is not finalized.");let o=uB(l),s=new du;return Object.assign(s,o),s}async function pk(e,t,n){var i,r;let l=0,o=0,s=new u$(new Response),a="upload";for(l=e.size;o<l;){let u=Math.min(8388608,l-o),d=e.slice(o,o+u);o+u>=l&&(a+=", finalize");let c=0,p=1e3;for(;c<3&&(null==(i=null==(s=await n.request({path:"",body:d,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:t,headers:{"X-Goog-Upload-Command":a,"X-Goog-Upload-Offset":String(o),"Content-Length":String(u)}}}))?void 0:s.headers)||!i[pN]);)c++,await function(e){return new Promise(t=>setTimeout(t,e))}(p),p*=2;if(o+=u,(null==(r=null==s?void 0:s.headers)?void 0:r[pN])!=="active")break;if(l<=o)throw Error("All content has been uploaded, but the upload status is not finalized.")}return s}async function pM(e){return{size:e.size,type:e.type}}class pD{async upload(e,t,n){if("string"==typeof e)throw Error("File path is not supported in browser uploader.");return await pR(e,t,n)}async uploadToFileSearchStore(e,t,n){if("string"==typeof e)throw Error("File path is not supported in browser uploader.");return await pP(e,t,n)}async stat(e){if("string"!=typeof e)return await pM(e);throw Error("File path is not supported in browser uploader.")}}class pj{create(e,t,n){return new pU(e,t,n)}}class pU{constructor(e,t,n){this.url=e,this.headers=t,this.callbacks=n}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(void 0===this.ws)throw Error("WebSocket is not connected");this.ws.send(e)}close(){if(void 0===this.ws)throw Error("WebSocket is not connected");this.ws.close()}}let pL="x-goog-api-key";class pV{constructor(e){this.apiKey=e}async addAuthHeaders(e,t){if(null===e.get(pL)){if(this.apiKey.startsWith("auth_tokens/"))throw Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw Error("API key is missing. Please provide a valid API key.");e.append(pL,this.apiKey)}}}let pF=new class{get interactions(){if(void 0!==this._interactions)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");let e=this.httpOptions;(null==e?void 0:e.extraBody)&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");let t=new pT({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:null==e?void 0:e.timeout});return this._interactions=t.interactions,this._interactions}constructor(e){var t;if(null==e.apiKey)throw Error("An API Key must be set when running in a browser");if(e.project||e.location)throw Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=null!=(t=e.vertexai)&&t,this.apiKey=e.apiKey;const n=function(e,t,n,i){return(null==e?void 0:e.baseUrl)?e.baseUrl:t?null!=a?a:n:null!=s?s:i}(e.httpOptions,e.vertexai,void 0,void 0);n&&(e.httpOptions?e.httpOptions.baseUrl=n:e.httpOptions={baseUrl:n}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const i=new pV(this.apiKey);this.apiClient=new cc({auth:i,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:"gl-node/web",uploader:new pD,downloader:new pO}),this.models=new cI(this.apiClient),this.live=new cb(this.apiClient,i,new pj),this.batches=new dH(this.apiClient),this.chats=new dQ(this.models,this.apiClient),this.caches=new d$(this.apiClient),this.files=new d1(this.apiClient),this.operations=new c_(this.apiClient),this.authTokens=new cO(this.apiClient),this.tunings=new p_(this.apiClient),this.fileSearchStores=new cR(this.apiClient)}}({apiKey:"AIzaSyDp4y5DoJb3KHP9V2panIPYSbGcNCe5oHU"}),pq=async(e,t=[])=>{try{let n=pF.chats.create({model:"gemini-2.5-flash",config:{systemInstruction:"You are Nexus, a futuristic personal assistant for a programmer/student. You help with coding, scheduling, and summarizing notes. Keep answers concise, technical, and helpful. You can use Markdown for formatting (bold, lists, headers), but DO NOT wrap general responses, lists, or schedules in code blocks (```). Only use code blocks for actual executable programming code (e.g., Python, JavaScript, HTML)."},history:t.map(e=>({role:e.role,parts:[{text:e.text}]}))});return(await n.sendMessage({message:e})).text||"No response generated."}catch(e){return console.error("Gemini API Error:",e),"Error connecting to Nexus AI Core. Please check your API Key configuration."}},pG=()=>{let[e,t]=(0,tO.useState)(""),[n,i]=(0,tO.useState)([{id:"1",role:"model",text:"Systems Online. How can I assist you today?",timestamp:new Date}]),[r,l]=(0,tO.useState)(!1),o=(0,tO.useRef)(null);(0,tO.useEffect)(()=>{o.current?.scrollIntoView({behavior:"smooth"})},[n]);let s=async()=>{if(!e.trim()||r)return;let o={id:Date.now().toString(),role:"user",text:e,timestamp:new Date};i(e=>[...e,o]),t(""),l(!0);try{let t=n.map(e=>({role:e.role,text:e.text})),r=await pq(e,t),l={id:(Date.now()+1).toString(),role:"model",text:r,timestamp:new Date};i(e=>[...e,l])}catch(e){console.error(e)}finally{l(!1)}};return(0,t_.jsxs)("div",{className:"flex flex-col h-full",children:[(0,t_.jsxs)("div",{className:"flex-1 overflow-y-auto space-y-4 pr-2",children:[n.map(e=>(0,t_.jsx)("div",{className:`flex ${"user"===e.role?"justify-end":"justify-start"}`,children:(0,t_.jsxs)("div",{className:`
                max-w-[85%] p-3 rounded-2xl text-sm font-mono
                ${"user"===e.role?"bg-nexus-purple text-white rounded-br-none":"bg-nexus-dark/50 border border-white/10 text-gray-200 rounded-bl-none"}
              `,children:[(0,t_.jsxs)("div",{className:"flex items-center gap-2 mb-1 opacity-50 text-xs",children:["model"===e.role?(0,t_.jsx)(uj,{size:12}):(0,t_.jsx)(uU,{size:12}),(0,t_.jsx)("span",{children:"model"===e.role?"Nexus AI":"You"})]}),(0,t_.jsx)("div",{className:"whitespace-pre-wrap",children:e.text})]})},e.id)),r&&(0,t_.jsx)("div",{className:"flex justify-start animate-pulse",children:(0,t_.jsxs)("div",{className:"bg-nexus-dark/50 border border-white/10 p-3 rounded-2xl rounded-bl-none text-sm text-nexus-teal flex items-center gap-2",children:[(0,t_.jsx)(uL,{size:14,className:"animate-spin"}),(0,t_.jsx)("span",{children:"Thinking..."})]})}),(0,t_.jsx)("div",{ref:o})]}),(0,t_.jsxs)("div",{className:"mt-4 flex gap-2",children:[(0,t_.jsx)("input",{type:"text",value:e,onChange:e=>t(e.target.value),onKeyDown:e=>"Enter"===e.key&&s(),placeholder:"Ask Gemini...",className:"flex-1 bg-black/20 border border-white/10 rounded-xl px-4 py-2 text-sm text-white focus:outline-none focus:border-nexus-teal transition-colors font-mono"}),(0,t_.jsx)("button",{onClick:s,disabled:r,className:"bg-nexus-teal hover:bg-teal-400 text-nexus-deep p-2 rounded-xl transition-transform active:scale-95 disabled:opacity-50",children:(0,t_.jsx)(uD,{size:18})})]})]})},pH=tM("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]),pB=tM("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),p$=tM("code",[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]]),pz=()=>{let[e,t]=(0,tO.useState)(()=>localStorage.getItem("nexus_notes_content_html")||"<h1>Lecture 4: React Hooks</h1><ul><li>useState</li><li>useEffect</li></ul>");return(0,t_.jsxs)("div",{className:"flex flex-col h-full relative",children:[(0,t_.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t_.jsxs)("div",{className:"flex gap-2",children:[(0,t_.jsx)("button",{className:"p-1.5 hover:bg-white/10 rounded text-gray-400 hover:text-nexus-teal transition-colors",title:"Insert Image",children:(0,t_.jsx)(pB,{size:16})}),(0,t_.jsx)("button",{className:"p-1.5 hover:bg-white/10 rounded text-gray-400 hover:text-nexus-teal transition-colors",title:"Code Block",children:(0,t_.jsx)(p$,{size:16})}),(0,t_.jsx)("button",{className:"p-1.5 hover:bg-white/10 rounded text-gray-400 hover:text-nexus-teal transition-colors",title:"Latex Mode",children:(0,t_.jsx)("span",{className:"font-serif italic font-bold",children:""})})]}),(0,t_.jsxs)("button",{onClick:()=>{alert("Exporting note as PDF..."),document.getElementById("note-editor")?.innerHTML,document.body.innerHTML},className:"flex items-center gap-1 text-[10px] bg-nexus-deep border border-nexus-teal/30 text-nexus-teal px-2 py-1 rounded hover:bg-nexus-teal hover:text-nexus-deep transition-all",children:[(0,t_.jsx)(pH,{size:12})," PDF"]})]}),(0,t_.jsx)("textarea",{className:"flex-1 bg-black/10 rounded-xl p-4 text-sm text-gray-300 font-mono focus:outline-none focus:ring-1 focus:ring-nexus-purple/50 resize-none leading-relaxed w-full h-full overflow-y-auto",value:e,onChange:e=>t(e.target.value),spellCheck:!1}),(0,t_.jsx)("div",{className:"absolute bottom-2 right-4 text-[10px] text-gray-600",children:"Markdown Supported"})]})},pJ=tM("folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]),pW=tM("link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]),pY=tM("youtube",[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]]),pK=tM("file-text",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]),pX=tM("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),pQ=({searchQuery:e=""})=>{let t=[{id:"1",title:"Calculus Syllabus",url:"#",category:"doc"},{id:"2",title:"React Crash Course",url:"#",category:"youtube"},{id:"3",title:"Project Drive",url:"#",category:"drive"},{id:"4",title:"Design System",url:"#",category:"other"}],[n,i]=(0,tO.useState)(()=>{{let e=localStorage.getItem("nexus_vault_links");return e?JSON.parse(e):t}}),[r,l]=(0,tO.useState)(!1),[o,s]=(0,tO.useState)(""),[a,u]=(0,tO.useState)(""),[d,c]=(0,tO.useState)("other"),[p,h]=(0,tO.useState)("");(0,tO.useEffect)(()=>{localStorage.setItem("nexus_vault_links",JSON.stringify(n))},[n]);let m=e=>{switch(e){case"youtube":return(0,t_.jsx)(pY,{size:16,className:"text-red-400"});case"doc":return(0,t_.jsx)(pK,{size:16,className:"text-blue-400"});case"drive":return(0,t_.jsx)(pJ,{size:16,className:"text-yellow-400"});default:return(0,t_.jsx)(pW,{size:16,className:"text-nexus-teal"})}},f=n.filter(t=>{let n=!e||t.title.toLowerCase().includes(e.toLowerCase())||t.url.toLowerCase().includes(e.toLowerCase())||t.category.toLowerCase().includes(e.toLowerCase()),i=!p||t.title.toLowerCase().includes(p.toLowerCase())||t.url.toLowerCase().includes(p.toLowerCase())||t.category.toLowerCase().includes(p.toLowerCase());return n&&i});return(0,t_.jsx)("div",{className:"h-full relative overflow-hidden flex flex-col",children:r?(0,t_.jsxs)("div",{className:"h-full flex flex-col gap-3 animate-fade-in p-1",children:[(0,t_.jsxs)("div",{className:"flex justify-between items-center mb-1",children:[(0,t_.jsx)("h4",{className:"text-sm font-semibold text-white",children:"Add Resource"}),(0,t_.jsx)("button",{onClick:()=>l(!1),className:"text-gray-400 hover:text-white p-1 hover:bg-white/10 rounded-full transition-colors",children:(0,t_.jsx)(tG,{size:14})})]}),(0,t_.jsxs)("div",{className:"space-y-2 flex-1",children:[(0,t_.jsx)("input",{type:"text",placeholder:"Resource Title",value:o,onChange:e=>s(e.target.value),className:"w-full bg-black/20 border border-white/10 rounded-lg px-3 py-2 text-xs text-white focus:border-nexus-teal focus:ring-1 focus:ring-nexus-teal/50 outline-none placeholder:text-gray-600 transition-all",autoFocus:!0}),(0,t_.jsx)("input",{type:"text",placeholder:"URL (e.g. google.com)",value:a,onChange:e=>u(e.target.value),className:"w-full bg-black/20 border border-white/10 rounded-lg px-3 py-2 text-xs text-white focus:border-nexus-teal focus:ring-1 focus:ring-nexus-teal/50 outline-none placeholder:text-gray-600 transition-all"}),(0,t_.jsx)("div",{className:"grid grid-cols-4 gap-2 mt-2",children:["doc","youtube","drive","other"].map(e=>(0,t_.jsxs)("button",{onClick:()=>c(e),className:`
                        p-2 rounded-lg border flex flex-col items-center justify-center gap-1 transition-all h-16
                        ${d===e?"bg-nexus-teal/10 border-nexus-teal text-white shadow-[0_0_10px_rgba(101,187,189,0.2)]":"border-white/5 text-gray-500 hover:bg-white/5 hover:text-gray-300"}
                    `,title:e,children:[m(e),(0,t_.jsx)("span",{className:"text-[9px] uppercase font-bold tracking-wider",children:e})]},e))})]}),(0,t_.jsxs)("button",{onClick:()=>{o.trim()&&a.trim()&&(i([...n,{id:Date.now().toString(),title:o,url:a.startsWith("http")?a:`https://${a}`,category:d}]),l(!1),s(""),u(""),c("other"))},className:"w-full bg-nexus-teal text-nexus-deep font-bold py-2.5 rounded-xl text-xs hover:bg-white transition-all flex items-center justify-center gap-2 mt-2 shadow-lg hover:shadow-nexus-teal/50",children:[(0,t_.jsx)(pX,{size:14})," Save to Vault"]})]}):(0,t_.jsxs)(t_.Fragment,{children:[(0,t_.jsxs)("div",{className:"relative mb-3 group shrink-0",children:[(0,t_.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,t_.jsx)(tF,{size:12,className:"text-gray-500 group-focus-within:text-nexus-teal transition-colors"})}),(0,t_.jsx)("input",{type:"text",value:p,onChange:e=>h(e.target.value),placeholder:"Filter vault...",className:"w-full bg-black/20 border border-white/10 rounded-xl pl-9 pr-8 py-2 text-xs text-white focus:outline-none focus:border-nexus-teal/50 focus:bg-white/5 transition-all font-mono placeholder:text-gray-600"}),p&&(0,t_.jsx)("button",{onClick:()=>h(""),className:"absolute inset-y-0 right-0 pr-2 flex items-center text-gray-500 hover:text-white",children:(0,t_.jsx)(tG,{size:12})})]}),(0,t_.jsx)("div",{className:"flex-1 overflow-y-auto custom-scrollbar pr-1",children:(0,t_.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[f.map(e=>(0,t_.jsxs)("a",{href:e.url,target:"_blank",rel:"noreferrer",className:"group relative flex flex-col p-3 rounded-xl bg-white/5 border border-white/5 hover:border-nexus-teal/50 transition-all hover:-translate-y-1 hover:shadow-lg hover:shadow-nexus-teal/10",children:[(0,t_.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t_.jsx)("div",{className:"p-2 bg-black/30 rounded-lg group-hover:bg-nexus-teal/20 transition-colors",children:m(e.category)}),(0,t_.jsx)("button",{onClick:t=>{var r;return r=e.id,void(t.preventDefault(),t.stopPropagation(),i(n.filter(e=>e.id!==r)))},className:"opacity-0 group-hover:opacity-100 p-1.5 text-gray-500 hover:text-red-400 hover:bg-red-500/10 rounded-md transition-all",title:"Remove Link",children:(0,t_.jsx)(uf,{size:12})})]}),(0,t_.jsx)("span",{className:"text-xs font-medium text-gray-300 group-hover:text-white truncate",title:e.title,children:e.title})]},e.id)),(0,t_.jsxs)("button",{onClick:()=>l(!0),className:"flex flex-col items-center justify-center p-3 rounded-xl border border-dashed border-white/10 hover:border-nexus-purple/50 text-gray-500 hover:text-nexus-purple transition-all gap-2 min-h-[88px] group",children:[(0,t_.jsx)("div",{className:"w-8 h-8 rounded-full bg-white/5 group-hover:bg-nexus-purple/20 flex items-center justify-center transition-colors",children:(0,t_.jsx)(tz,{size:16})}),(0,t_.jsx)("span",{className:"text-[10px] font-medium",children:"Add Resource"})]})]})})]})})},pZ=tM("wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]),p0=tM("battery",[["path",{d:"M 22 14 L 22 10",key:"nqc4tb"}],["rect",{x:"2",y:"6",width:"16",height:"12",rx:"2",key:"13zb55"}]]),p1=tM("cloud-sun",[["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}],["path",{d:"M15.947 12.65a4 4 0 0 0-5.925-4.128",key:"dpwdj0"}],["path",{d:"M13 22H7a5 5 0 1 1 4.9-6H13a3 3 0 0 1 0 6Z",key:"s09mg5"}]]),p2=tM("cpu",[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]]),p5=tM("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]),p4=()=>{let[e,t]=(0,tO.useState)(new Date);return(0,tO.useEffect)(()=>{let e=setInterval(()=>t(new Date),1e3);return()=>clearInterval(e)},[]),(0,t_.jsxs)("div",{className:"flex flex-col md:flex-row items-center justify-between h-full px-2 gap-4 md:gap-0",children:[(0,t_.jsxs)("div",{className:"flex items-center gap-4 w-full md:w-1/3",children:[(0,t_.jsx)("div",{className:"p-3 bg-white/5 rounded-xl border border-white/5",children:(0,t_.jsx)(p1,{size:24,className:"text-nexus-teal"})}),(0,t_.jsxs)("div",{children:[(0,t_.jsx)("h2",{className:"text-xl font-bold text-white tracking-wide",children:e.toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric"})}),(0,t_.jsxs)("div",{className:"flex items-center gap-2 text-xs text-gray-400 font-mono",children:[(0,t_.jsx)("span",{children:"Jakarta, ID"}),(0,t_.jsx)("span",{className:"w-1 h-1 rounded-full bg-gray-500"}),(0,t_.jsx)("span",{children:"32C"})]})]})]}),(0,t_.jsxs)("div",{className:"flex flex-col items-center justify-center w-full md:w-1/3",children:[(0,t_.jsxs)("div",{className:"text-5xl md:text-6xl font-mono font-bold text-transparent bg-clip-text bg-gradient-to-b from-white to-white/50 tracking-tighter",children:[e.toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit"}),(0,t_.jsx)("span",{className:"text-lg md:text-xl text-nexus-purple ml-1 animate-pulse",children:e.getSeconds().toString().padStart(2,"0")})]}),(0,t_.jsx)("div",{className:"text-[10px] tracking-[0.3em] text-nexus-teal uppercase mt-1",children:"System Optimal"})]}),(0,t_.jsxs)("div",{className:"flex flex-col gap-2 w-full md:w-1/3 items-end",children:[(0,t_.jsxs)("div",{className:"flex items-center gap-3 text-xs font-mono text-gray-400 mb-1",children:[(0,t_.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t_.jsx)(pZ,{size:14,className:"text-green-400"}),(0,t_.jsx)("span",{children:"NET: 5G"})]}),(0,t_.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t_.jsx)(p0,{size:14,className:"text-nexus-purple"}),(0,t_.jsx)("span",{children:"PWR: 98%"})]})]}),(0,t_.jsxs)("div",{className:"w-full max-w-[200px] space-y-1.5",children:[(0,t_.jsxs)("div",{className:"flex items-center justify-between text-[10px] text-nexus-teal/80 font-bold uppercase",children:[(0,t_.jsxs)("span",{className:"flex items-center gap-1",children:[(0,t_.jsx)(p2,{size:10})," CPU Load"]}),(0,t_.jsx)("span",{children:"12%"})]}),(0,t_.jsx)("div",{className:"w-full h-1.5 bg-white/10 rounded-full overflow-hidden",children:(0,t_.jsx)("div",{className:"h-full bg-nexus-teal w-[12%] rounded-full shadow-[0_0_10px_#65BBBD]"})}),(0,t_.jsxs)("div",{className:"flex items-center justify-between text-[10px] text-nexus-purple/80 font-bold uppercase mt-1",children:[(0,t_.jsxs)("span",{className:"flex items-center gap-1",children:[(0,t_.jsx)(p5,{size:10})," Memory"]}),(0,t_.jsx)("span",{children:"4.2 GB"})]}),(0,t_.jsx)("div",{className:"w-full h-1.5 bg-white/10 rounded-full overflow-hidden",children:(0,t_.jsx)("div",{className:"h-full bg-nexus-purple w-[45%] rounded-full shadow-[0_0_10px_#732ADF]"})})]})]})]})},p3=(e,t)=>{let n;return/^#([A-Fa-f0-9]{3}){1,2}$/.test(e)?(3==(n=e.substring(1).split("")).length&&(n=[n[0],n[0],n[1],n[1],n[2],n[2]]),"rgba("+[(n="0x"+n.join(""))>>16&255,n>>8&255,255&n].join(",")+","+t+")"):`rgba(115, 42, 223, ${t})`},p6=[{id:"nexus",name:"Nexus",primary:"#732ADF",secondary:"#65BBBD"},{id:"cyber",name:"Cyber",primary:"#FF0055",secondary:"#00E5FF"},{id:"emerald",name:"Forest",primary:"#10B981",secondary:"#F59E0B"},{id:"monochrome",name:"Mono",primary:"#6B7280",secondary:"#E5E7EB"},{id:"sunset",name:"Sunset",primary:"#F97316",secondary:"#8B5CF6"}],p8=({id:e,children:t,className:n})=>{let{attributes:i,listeners:r,setNodeRef:l,transform:o,transition:s,isDragging:a}=function(e){var t,n,i,r;let{animateLayoutChanges:l=i_,attributes:o,disabled:s,data:a,getNewIndex:u=iI,id:d,strategy:c,resizeObserverConfig:p,transition:h=iO}=e,{items:m,containerId:f,activeIndex:g,disabled:y,disableTransforms:v,sortedRects:x,overIndex:b,useDragOverlay:E,strategy:S}=(0,tO.useContext)(iA),w=(t=s,n=y,"boolean"==typeof t?{draggable:t,droppable:!1}:{draggable:null!=(i=null==t?void 0:t.draggable)?i:n.draggable,droppable:null!=(r=null==t?void 0:t.droppable)?r:n.droppable}),T=m.indexOf(d),A=(0,tO.useMemo)(()=>({sortable:{containerId:f,index:T,items:m},...a}),[f,a,T,m]),C=(0,tO.useMemo)(()=>m.slice(m.indexOf(d)),[m,d]),{rect:I,node:_,isOver:O,setNodeRef:N}=function(e){let{data:t,disabled:n=!1,id:i,resizeObserverConfig:r}=e,l=ne("Droppable"),{active:o,dispatch:s,over:a,measureDroppableContainers:u}=(0,tO.useContext)(ia),d=(0,tO.useRef)({disabled:n}),c=(0,tO.useRef)(!1),p=(0,tO.useRef)(null),h=(0,tO.useRef)(null),{disabled:m,updateMeasurementsFor:f,timeout:g}={...iv,...r},y=t3(null!=f?f:i),v=n4({callback:(0,tO.useCallback)(()=>{if(!c.current){c.current=!0;return}null!=h.current&&clearTimeout(h.current),h.current=setTimeout(()=>{u(Array.isArray(y.current)?y.current:[y.current]),h.current=null},g)},[g]),disabled:m||!o}),[x,b]=t8((0,tO.useCallback)((e,t)=>{v&&(t&&(v.unobserve(t),c.current=!1),e&&v.observe(e))},[v])),E=t3(t);return(0,tO.useEffect)(()=>{v&&x.current&&(v.disconnect(),c.current=!1,v.observe(x.current))},[x,v]),(0,tO.useEffect)(()=>(s({type:eA.RegisterDroppable,element:{id:i,key:l,disabled:n,node:x,rect:p,data:E}}),()=>s({type:eA.UnregisterDroppable,key:l,id:i})),[i]),(0,tO.useEffect)(()=>{n!==d.current.disabled&&(s({type:eA.SetDroppableDisabled,id:i,key:l,disabled:n}),d.current.disabled=n)},[i,l,n,s]),{active:o,rect:p,isOver:(null==a?void 0:a.id)===i,node:x,over:a,setNodeRef:b}}({id:d,data:A,disabled:w.droppable,resizeObserverConfig:{updateMeasurementsFor:C,...p}}),{active:R,activatorEvent:P,activeNodeRect:k,attributes:M,setNodeRef:D,listeners:j,isDragging:U,over:L,setActivatorNodeRef:V,transform:F}=function(e){let{id:t,data:n,disabled:i=!1,attributes:r}=e,l=ne("Draggable"),{activators:o,activatorEvent:s,active:a,activeNodeRect:u,ariaDescribedById:d,draggableNodes:c,over:p}=(0,tO.useContext)(ia),{role:h=iy,roleDescription:m="draggable",tabIndex:f=0}=null!=r?r:{},g=(null==a?void 0:a.id)===t,y=(0,tO.useContext)(g?ih:ig),[v,x]=t8(),[b,E]=t8(),S=(0,tO.useMemo)(()=>o.reduce((e,n)=>{let{eventName:i,handler:r}=n;return e[i]=e=>{r(e,t)},e},{}),[o,t]),w=t3(n);return t5(()=>(c.set(t,{id:t,key:l,node:v,activatorNode:b,data:w}),()=>{let e=c.get(t);e&&e.key===l&&c.delete(t)}),[c,t]),{active:a,activatorEvent:s,activeNodeRect:u,attributes:(0,tO.useMemo)(()=>({role:h,tabIndex:f,"aria-disabled":i,"aria-pressed":!!g&&h===iy||void 0,"aria-roledescription":m,"aria-describedby":d.draggable}),[i,h,f,g,m,d.draggable]),isDragging:g,listeners:i?void 0:S,node:v,over:p,setNodeRef:x,setActivatorNodeRef:E,transform:y}}({id:d,data:A,attributes:{...iP,...o},disabled:w.draggable}),q=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,tO.useMemo)(()=>e=>{t.forEach(t=>t(e))},t)}(N,D),G=!!R,H=G&&!v&&iS(g)&&iS(b),B=!E&&U,$=B&&H?F:null,z=H?null!=$?$:(null!=c?c:S)({rects:x,activeNodeRect:k,activeIndex:g,overIndex:b,index:T}):null,J=iS(g)&&iS(b)?u({id:d,items:m,activeIndex:g,overIndex:b}):T,W=null==R?void 0:R.id,Y=(0,tO.useRef)({activeId:W,items:m,newIndex:J,containerId:f}),K=m!==Y.current.items,X=l({active:R,containerId:f,isDragging:U,isSorting:G,id:d,index:T,items:m,newIndex:Y.current.newIndex,previousItems:Y.current.items,previousContainerId:Y.current.containerId,transition:h,wasDragging:null!=Y.current.activeId}),Q=function(e){let{disabled:t,index:n,node:i,rect:r}=e,[l,o]=(0,tO.useState)(null),s=(0,tO.useRef)(n);return t5(()=>{if(!t&&n!==s.current&&i.current){let e=r.current;if(e){let t=nO(i.current,{ignoreTransform:!0}),n={x:e.left-t.left,y:e.top-t.top,scaleX:e.width/t.width,scaleY:e.height/t.height};(n.x||n.y)&&o(n)}}n!==s.current&&(s.current=n)},[t,n,i,r]),(0,tO.useEffect)(()=>{l&&o(null)},[l]),l}({disabled:!X,index:T,node:_,rect:I});return(0,tO.useEffect)(()=>{G&&Y.current.newIndex!==J&&(Y.current.newIndex=J),f!==Y.current.containerId&&(Y.current.containerId=f),m!==Y.current.items&&(Y.current.items=m)},[G,J,f,m]),(0,tO.useEffect)(()=>{if(W===Y.current.activeId)return;if(null!=W&&null==Y.current.activeId){Y.current.activeId=W;return}let e=setTimeout(()=>{Y.current.activeId=W},50);return()=>clearTimeout(e)},[W]),{active:R,activeIndex:g,attributes:M,data:A,rect:I,index:T,newIndex:J,items:m,isOver:O,isSorting:G,isDragging:U,listeners:j,node:_,overIndex:b,over:L,setNodeRef:q,setActivatorNodeRef:V,setDroppableNodeRef:N,setDraggableNodeRef:D,transform:null!=Q?Q:z,transition:Q||K&&Y.current.newIndex===T?iR:(!B||nr(P))&&h&&(G||X)?no.Transition.toString({...h,property:iN}):void 0}}({id:e}),u={transform:no.Transform.toString(o),transition:s||"transform 250ms cubic-bezier(0.25, 1, 0.5, 1)",zIndex:a?999:"auto",position:"relative",opacity:a?.8:1,scale:a?1.05:1};return(0,t_.jsx)("div",{ref:l,style:u,className:n,...i,children:tO.default.Children.map(t,e=>tO.default.isValidElement(e)?tO.default.cloneElement(e,{dragHandleProps:r}):e)})};function p9(){let[e,t]=(0,tO.useState)("dashboard"),[n,i]=(0,tO.useState)(""),r=(0,tO.useRef)(null),[l,o]=(0,tO.useState)(!1),[s,a]=(0,tO.useState)(!1),[u,d]=(0,tO.useState)("dark"),[c,p]=(0,tO.useState)("nexus"),[h,m]=(0,tO.useState)(p6[0]),[f,g]=(0,tO.useState)({monitor:{col:2,row:1},tasks:{col:2,row:2},ai:{col:2,row:2},agenda:{col:2,row:2},vault:{col:2,row:1},notes:{col:2,row:1}}),[y,v]=(0,tO.useState)(["monitor","tasks","ai","agenda","vault","notes"]),[x,b]=(0,tO.useState)([]),[E,S]=(0,tO.useState)(""),[w,T]=(0,tO.useState)(1),[A,C]=(0,tO.useState)(1),[I,_]=(0,tO.useState)("#732ADF"),[O,N]=(0,tO.useState)({monitor:"#732ADF",tasks:"#10B981",ai:"#F59E0B",agenda:"#3B82F6",vault:"#EC4899",notes:"#8B5CF6"});(0,tO.useEffect)(()=>{{let e=localStorage.getItem("nexus_theme_mode");e&&d(e);let t=localStorage.getItem("nexus_palette_id");if(t){p(t);let e=p6.find(e=>e.id===t);e&&m(e)}let n=localStorage.getItem("nexus_static_layout");n&&g(JSON.parse(n));let i=localStorage.getItem("nexus_widget_order");i&&v(JSON.parse(i));let r=localStorage.getItem("nexus_custom_widgets");r&&b(JSON.parse(r));let l=localStorage.getItem("nexus_widget_colors");l&&N(JSON.parse(l))}},[]),(0,tO.useEffect)(()=>{localStorage.setItem("nexus_theme_mode",u),localStorage.setItem("nexus_palette_id",c),localStorage.setItem("nexus_static_layout",JSON.stringify(f)),localStorage.setItem("nexus_widget_order",JSON.stringify(y)),localStorage.setItem("nexus_custom_widgets",JSON.stringify(x)),localStorage.setItem("nexus_widget_colors",JSON.stringify(O))},[u,c,f,y,x,O]),(0,tO.useEffect)(()=>{"dark"===u?(document.documentElement.classList.add("dark"),document.documentElement.removeAttribute("data-theme")):(document.documentElement.classList.remove("dark"),document.documentElement.setAttribute("data-theme","light"))},[u]);let R=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,tO.useMemo)(()=>[...t].filter(e=>null!=e),[...t])}(ng(n0),ng(nY,{coordinateGetter:iD})),P=(e,t)=>{N(n=>({...n,[e]:t}))},k=(e,t,n)=>{g(i=>({...i,[e]:{col:t,row:n}}))},M=(e,t)=>`md:col-span-${e} md:row-span-${t}`;return(0,t_.jsxs)("div",{className:"min-h-screen bg-nexus-deep text-nexus-text p-4 md:p-8 font-sans selection:bg-nexus-purple selection:text-white relative overflow-x-hidden transition-colors duration-300",children:[(0,t_.jsxs)("div",{className:"fixed top-0 left-0 w-full h-full overflow-hidden pointer-events-none z-0",children:[(0,t_.jsx)("div",{className:"absolute top-[-10%] left-[-10%] w-[40%] h-[40%] bg-nexus-purple/20 rounded-full blur-[120px] animate-pulse-slow",style:{backgroundColor:l?O.ai+"40":void 0}}),(0,t_.jsx)("div",{className:"absolute bottom-[-10%] right-[-10%] w-[40%] h-[40%] bg-nexus-teal/10 rounded-full blur-[120px] animate-pulse-slow",style:{animationDelay:"2s",backgroundColor:l?O.monitor+"20":void 0}})]}),(0,t_.jsxs)("div",{className:"relative z-10 max-w-7xl mx-auto flex flex-col min-h-screen",children:[(0,t_.jsxs)("header",{className:"flex flex-col md:flex-row justify-between items-center mb-8 gap-4",children:[(0,t_.jsxs)("div",{className:"flex items-center gap-4 w-full md:w-auto",children:["dashboard"!==e&&(0,t_.jsx)("button",{onClick:()=>t("dashboard"),className:"p-2 rounded-full bg-white/5 hover:bg-white/10 transition-colors border border-white/10",children:(0,t_.jsx)(t$,{size:20})}),(0,t_.jsxs)("div",{children:[(0,t_.jsx)("h1",{className:"text-4xl font-bold tracking-tighter bg-clip-text text-transparent bg-gradient-to-r from-white to-gray-400",children:"NEXUS OMNIA"}),(0,t_.jsx)("p",{className:"text-sm text-gray-400 tracking-widest uppercase opacity-70",children:"Personal Command Interface"})]})]}),(0,t_.jsxs)("div",{className:"flex items-center gap-3 w-full md:w-auto justify-end",children:[(0,t_.jsxs)("div",{className:"relative group flex-1 md:flex-none",children:[(0,t_.jsx)(tF,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",size:16}),(0,t_.jsx)("input",{ref:r,type:"text",placeholder:"Search system...",value:n,onChange:e=>i(e.target.value),className:"w-full md:w-64 bg-black/20 border border-white/10 rounded-full py-2 pl-10 pr-4 text-sm focus:outline-none focus:border-nexus-purple/50 transition-all"})]}),(0,t_.jsx)("button",{onClick:()=>{d(e=>"light"===e?"dark":"light")},className:"p-2 rounded-full bg-white/5 hover:bg-white/10 transition-colors border border-white/10",title:"Toggle Theme",children:"dark"===u?(0,t_.jsx)(tB,{size:18}):(0,t_.jsx)(tH,{size:18})}),(0,t_.jsx)("button",{onClick:()=>o(!l),className:`p-2 rounded-full transition-colors border border-white/10 ${l?"bg-nexus-purple text-white":"bg-white/5 hover:bg-white/10"}`,title:"Customize Layout",children:(0,t_.jsx)(tq,{size:18})})]})]}),l&&(0,t_.jsx)("div",{className:"mb-8 p-4 rounded-2xl bg-black/30 border border-white/10 backdrop-blur-md animate-slide-down",children:(0,t_.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-6",children:[(0,t_.jsxs)("div",{children:[(0,t_.jsx)("h3",{className:"text-sm font-bold text-gray-300 mb-3 uppercase tracking-wider",children:"Color Theme"}),(0,t_.jsx)("div",{className:"flex gap-3",children:p6.map(e=>(0,t_.jsx)("button",{onClick:()=>{p(e.id),m(e)},className:`w-8 h-8 rounded-full border-2 transition-transform hover:scale-110 ${c===e.id?"border-white scale-110":"border-transparent"}`,style:{background:`linear-gradient(135deg, ${e.primary}, ${e.secondary})`},title:e.name},e.id))})]}),(0,t_.jsxs)("div",{children:[(0,t_.jsx)("h3",{className:"text-sm font-bold text-gray-300 mb-3 uppercase tracking-wider",children:"Widgets"}),(0,t_.jsxs)("div",{className:"flex gap-3",children:[(0,t_.jsxs)("button",{onClick:()=>a(!0),className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-white/5 hover:bg-white/10 border border-white/10 transition-colors text-sm",children:[(0,t_.jsx)(tz,{size:16}),"Add Custom Widget"]}),(0,t_.jsx)("button",{onClick:()=>{g({monitor:{col:2,row:1},tasks:{col:2,row:2},ai:{col:2,row:2},agenda:{col:2,row:2},vault:{col:2,row:1},notes:{col:2,row:1}}),v(["monitor","tasks","ai","agenda","vault","notes"])},className:"px-4 py-2 rounded-lg bg-red-500/10 hover:bg-red-500/20 border border-red-500/20 text-red-400 transition-colors text-sm",children:"Reset Layout"})]})]})]})}),(0,t_.jsx)("main",{className:"flex-1 relative",children:"calendar"===e?(0,t_.jsx)("div",{className:"flex-1 w-full pb-8 animate-fade-in min-h-[800px]",children:(0,t_.jsx)(uc,{className:"h-full",title:"Master Timeline",icon:(0,t_.jsx)(tD,{}),glowColor:p3(h.secondary,.3),children:(0,t_.jsx)("div",{className:"h-full p-4",children:(0,t_.jsx)(ug,{searchQuery:n})})})}):"tasks"===e?(0,t_.jsx)("div",{className:"flex-1 w-full pb-8 animate-fade-in min-h-[800px]",children:(0,t_.jsx)(uc,{className:"h-full",title:"Command Center",icon:(0,t_.jsx)(tj,{}),glowColor:p3(h.primary,.2),children:(0,t_.jsx)("div",{className:"h-full p-4 max-w-3xl mx-auto",children:(0,t_.jsx)(uM,{searchQuery:n})})})}):"notes"===e?(0,t_.jsx)("div",{className:"flex-1 w-full pb-8 animate-fade-in min-h-[800px]",children:(0,t_.jsx)(uc,{className:"h-full",title:"Neural Notes Workspace",icon:(0,t_.jsx)(tV,{}),glowColor:p3(O.notes,.2),children:(0,t_.jsx)("div",{className:"h-full p-4",children:(0,t_.jsx)(pz,{searchQuery:n})})})}):"vault"===e?(0,t_.jsx)("div",{className:"flex-1 w-full pb-8 animate-fade-in min-h-[800px]",children:(0,t_.jsx)(uc,{className:"h-full",title:"Data Vault Archive",icon:(0,t_.jsx)(tL,{}),glowColor:p3(O.vault,.3),children:(0,t_.jsx)("div",{className:"h-full p-4 max-w-4xl mx-auto",children:(0,t_.jsx)(pQ,{searchQuery:n})})})}):"ai"===e?(0,t_.jsx)("div",{className:"flex-1 w-full pb-8 animate-fade-in min-h-[800px]",children:(0,t_.jsx)(uc,{className:"h-full",title:"Nexus AI Core - Full Interface",icon:(0,t_.jsx)(tU,{}),glowColor:p3(O.ai,.4),children:(0,t_.jsx)("div",{className:"h-full p-4 max-w-4xl mx-auto",children:(0,t_.jsx)(pG,{})})})}):(0,t_.jsx)(im,{sensors:R,collisionDetection:nT,onDragEnd:e=>{let{active:t,over:n}=e;t.id!==n.id&&v(e=>{let i=e.indexOf(t.id),r=e.indexOf(n.id);return iE(e,i,r)})},children:(0,t_.jsx)(iC,{items:y,strategy:iw,children:(0,t_.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 pb-12 animate-fade-in auto-rows-[180px]",children:y.map(e=>(0,t_.jsx)(p8,{id:e,className:(e=>{if("monitor"===e)return M(f.monitor.col,f.monitor.row);if("tasks"===e)return M(f.tasks.col,f.tasks.row);if("ai"===e)return M(f.ai.col,f.ai.row);if("agenda"===e)return M(f.agenda.col,f.agenda.row);if("vault"===e)return M(f.vault.col,f.vault.row);if("notes"===e)return M(f.notes.col,f.notes.row);let t=x.find(t=>t.id===e);return t?M(t.colSpan,t.rowSpan):"md:col-span-1 md:row-span-1"})(e),children:(e=>{if("monitor"===e)return(0,t_.jsx)(uc,{colSpanInt:f.monitor.col,rowSpanInt:f.monitor.row,onResize:(e,t)=>k("monitor",e,t),className:"h-full min-h-[140px]",glowColor:p3(O.monitor,.15),isCustomizing:l,pickerColor:O.monitor,onColorChange:e=>P("monitor",e),children:(0,t_.jsx)(p4,{})},e);if("tasks"===e)return(0,t_.jsx)(uc,{colSpanInt:f.tasks.col,rowSpanInt:f.tasks.row,onResize:(e,t)=>k("tasks",e,t),title:"Missions",icon:(0,t_.jsx)(tj,{}),glowColor:p3(O.tasks,.2),className:"h-full min-h-[140px]",isCustomizing:l,pickerColor:O.tasks,onColorChange:e=>P("tasks",e),onTripleClick:()=>t("tasks"),children:(0,t_.jsx)(uM,{searchQuery:n})},e);if("ai"===e)return(0,t_.jsx)(uc,{colSpanInt:f.ai.col,rowSpanInt:f.ai.row,onResize:(e,t)=>k("ai",e,t),title:"Nexus AI Core",icon:(0,t_.jsx)(tU,{}),glowColor:p3(O.ai,.4),className:"h-full min-h-[140px]",isCustomizing:l,pickerColor:O.ai,onColorChange:e=>P("ai",e),onTripleClick:()=>t("ai"),children:(0,t_.jsx)(pG,{})},e);if("agenda"===e)return(0,t_.jsx)(uc,{colSpanInt:f.agenda.col,rowSpanInt:f.agenda.row,onResize:(e,t)=>k("agenda",e,t),title:"Timeline",icon:(0,t_.jsx)(tD,{}),glowColor:p3(O.agenda,.3),className:"h-full min-h-[140px]",isCustomizing:l,pickerColor:O.agenda,onColorChange:e=>P("agenda",e),onTripleClick:()=>t("calendar"),children:(0,t_.jsx)(ug,{searchQuery:n})},e);if("vault"===e)return(0,t_.jsx)(uc,{colSpanInt:f.vault.col,rowSpanInt:f.vault.row,onResize:(e,t)=>k("vault",e,t),title:"Data Vault",icon:(0,t_.jsx)(tL,{}),className:"h-full min-h-[140px]",glowColor:p3(O.vault,.5),isCustomizing:l,pickerColor:O.vault,onColorChange:e=>P("vault",e),onTripleClick:()=>t("vault"),children:(0,t_.jsx)(pQ,{searchQuery:n})},e);if("notes"===e)return(0,t_.jsx)(uc,{colSpanInt:f.notes.col,rowSpanInt:f.notes.row,onResize:(e,t)=>k("notes",e,t),title:"Neural Notes",icon:(0,t_.jsx)(tV,{}),glowColor:p3(O.notes,.1),className:"h-full min-h-[140px]",isCustomizing:l,pickerColor:O.notes,onColorChange:e=>P("notes",e),onTripleClick:()=>t("notes"),children:(0,t_.jsx)("div",{className:"h-full w-full",children:(0,t_.jsx)(pz,{searchQuery:n})})},e);let i=x.find(t=>t.id===e);return i?(0,t_.jsx)(uc,{colSpanInt:i.colSpan,rowSpanInt:i.rowSpan,onResize:(e,t)=>{var n;return n=i.id,void b(i=>i.map(i=>i.id===n?{...i,colSpan:e,rowSpan:t}:i))},title:i.title,icon:(0,t_.jsx)(tJ,{}),glowColor:p3(i.color,.3),className:"h-full",isCustomizing:l,pickerColor:i.color,onColorChange:e=>{var t;return t=i.id,void b(n=>n.map(n=>n.id===t?{...n,color:e}:n))},onDelete:()=>{var e;return e=i.id,void b(t=>t.filter(t=>t.id!==e))},children:(0,t_.jsx)("textarea",{className:"w-full h-full bg-transparent resize-none focus:outline-none text-sm text-gray-300 placeholder:text-gray-600 font-mono",placeholder:"Enter widget content...",value:i.content,onChange:e=>{var t,n;return t=i.id,n=e.target.value,void b(e=>e.map(e=>e.id===t?{...e,content:n}:e))}})},e):null})(e)},e))})})})}),(0,t_.jsx)("footer",{className:"mt-auto py-6 text-center text-xs text-gray-600 border-t border-white/5",children:(0,t_.jsx)("p",{children:"NEXUS OMNIA SYSTEM v2.4.0 // AUTHORIZED ACCESS ONLY"})})]}),s&&(0,t_.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm p-4",children:(0,t_.jsxs)("div",{className:"bg-[#111] border border-white/10 rounded-2xl p-6 w-full max-w-md shadow-2xl animate-scale-in",children:[(0,t_.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,t_.jsx)("h2",{className:"text-xl font-bold",children:"Add Custom Widget"}),(0,t_.jsx)("button",{onClick:()=>a(!1),className:"text-gray-400 hover:text-white",children:(0,t_.jsx)(tG,{size:20})})]}),(0,t_.jsxs)("div",{className:"space-y-4",children:[(0,t_.jsxs)("div",{children:[(0,t_.jsx)("label",{className:"block text-xs text-gray-400 mb-1 uppercase",children:"Title"}),(0,t_.jsx)("input",{type:"text",value:E,onChange:e=>S(e.target.value),className:"w-full bg-white/5 border border-white/10 rounded-lg p-2 text-sm focus:border-nexus-purple/50 outline-none",placeholder:"Widget Title"})]}),(0,t_.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t_.jsxs)("div",{children:[(0,t_.jsx)("label",{className:"block text-xs text-gray-400 mb-1 uppercase",children:"Columns (Width)"}),(0,t_.jsx)("select",{value:w,onChange:e=>T(Number(e.target.value)),className:"w-full bg-white/5 border border-white/10 rounded-lg p-2 text-sm outline-none",children:[1,2,3,4].map(e=>(0,t_.jsx)("option",{value:e,children:e},e))})]}),(0,t_.jsxs)("div",{children:[(0,t_.jsx)("label",{className:"block text-xs text-gray-400 mb-1 uppercase",children:"Rows (Height)"}),(0,t_.jsx)("select",{value:A,onChange:e=>C(Number(e.target.value)),className:"w-full bg-white/5 border border-white/10 rounded-lg p-2 text-sm outline-none",children:[1,2,3,4].map(e=>(0,t_.jsx)("option",{value:e,children:e},e))})]})]}),(0,t_.jsxs)("div",{children:[(0,t_.jsx)("label",{className:"block text-xs text-gray-400 mb-1 uppercase",children:"Accent Color"}),(0,t_.jsx)("div",{className:"flex gap-2 flex-wrap",children:["#732ADF","#10B981","#F59E0B","#3B82F6","#EC4899","#EF4444"].map(e=>(0,t_.jsx)("button",{onClick:()=>_(e),className:`w-8 h-8 rounded-full border-2 ${I===e?"border-white":"border-transparent"}`,style:{backgroundColor:e}},e))})]}),(0,t_.jsx)("button",{onClick:()=>{if(!E)return;let e={id:`custom-${Date.now()}`,title:E,content:"",colSpan:w,rowSpan:A,color:I};b(t=>[...t,e]),a(!1),S(""),T(1),C(1)},disabled:!E,className:"w-full py-3 mt-4 bg-nexus-purple hover:bg-nexus-purple/80 text-white rounded-lg font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Create Widget"})]})]})})]})}e.s(["default",()=>p9],81694)}]);